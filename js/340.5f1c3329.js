"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[340],{85571:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Be});var l=a(59835),n=a(86970);const o={class:"q-pa-md",style:{width:"100%","max-width":"1439px","padding-top":"60px"}},s=(0,l._)("br",null,null,-1),i={class:"q-pa-md col-3 col-md-4 col-sm-6 col-xs-12"},r={class:"q-gutter-x-sm",style:{"z-index":"2"}},u=["src"],c={class:"q-gutter-x-sm",style:{"z-index":"1",position:"absolute",top:"0px",left:"0px"}},d=["src"],m=["href"],p={class:"cursor-pointer"},v={class:"self-center full-width no-outline",tabindex:"0"},w=(0,l._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," LP Token: ",-1),f={class:"self-center full-width no-outline",tabindex:"0"},h=(0,l._)("br",null,null,-1),g=(0,l._)("br",null,null,-1),k={class:"text-center"},b=(0,l._)("br",null,null,-1),_=(0,l._)("br",null,null,-1),W=(0,l._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1),y=(0,l._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1),x=(0,l._)("span",{class:"text-h6 q-ml-sm"},"Transaction",-1),I={class:"q-pa-xs"},q={key:0,class:"text-left"},H=(0,l._)("a",null,[(0,l._)("span",{class:"cursor-pointer"}," Sign transaction with your wallet and we will never touch your private key! ")],-1),T=[H],S={key:1,class:"text-left text-red"},C=["href"],A={class:"cursor-pointer"},U=(0,l._)("a",null,[(0,l._)("span",{class:"cursor-pointer"}," Transaction is broadcasted, waiting for confirmation. ")],-1),Z=(0,l._)("div",null,"Transaction Success!",-1),V=["href"],L={class:"cursor-pointer"},Q=(0,l._)("span",{class:"text-subtitle2 text-secondary q-ml-sm"},"https://crystal.network",-1),z=["src"],F={class:"text-h6 q-ml-sm"},P={class:"q-ml-sm"},E=(0,l.Uk)(" You can invest some of your crypto currency with this game for other players to bet against. This both increases the maximum bets on the game, and you keep any profits made. You also 'keep' any losses. "),B=(0,l.Uk)("If you believe that the potential gains do not outweigh the potential losses, please do not invest."),N=(0,l.Uk)(" Please help advertise the site. The more players we have, the faster your investment will grow. "),$=(0,l.Uk)(" https://crystal.network ");function G(e,t,a,H,G,D){const j=(0,l.up)("q-icon"),R=(0,l.up)("q-btn"),M=(0,l.up)("q-page-sticky"),O=(0,l.up)("q-avatar"),Y=(0,l.up)("q-item-section"),J=(0,l.up)("q-item-label"),K=(0,l.up)("q-item"),X=(0,l.up)("q-chip"),ee=(0,l.up)("q-card-section"),te=(0,l.up)("q-separator"),ae=(0,l.up)("q-field"),le=(0,l.up)("q-tab"),ne=(0,l.up)("q-tabs"),oe=(0,l.up)("q-input"),se=(0,l.up)("q-btn-group"),ie=(0,l.up)("q-tab-panel"),re=(0,l.up)("q-slider"),ue=(0,l.up)("q-tab-panels"),ce=(0,l.up)("q-card-actions"),de=(0,l.up)("q-card"),me=(0,l.up)("q-space"),pe=(0,l.up)("q-dialog"),ve=(0,l.up)("q-step"),we=(0,l.up)("q-linear-progress"),fe=(0,l.up)("q-stepper"),he=(0,l.up)("q-expansion-item"),ge=(0,l.up)("q-list"),ke=(0,l.up)("BalanceView"),be=(0,l.up)("q-page"),_e=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(be,{class:"row justify-evenly"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{position:"top-left",offset:[0,0],style:{"z-index":"999"}},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{flat:"","no-caps":"",to:"/games"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{name:"las la-angle-double-left"})])),_:1}),(0,l.Wm)(R,{flat:"","no-caps":"",onClick:e.refresh},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{name:"las la-sync"})])),_:1},8,["onClick"])])),_:1}),(0,l._)("div",o,[s,(0,l._)("div",i,[(0,l.Wm)(de,{class:"my-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Y,{avatar:""},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(O,{size:"48px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"tokens/"+e.token+".png"},null,8,u)])),_:1})]),(0,l._)("div",c,[(0,l.Wm)(O,{size:"30px",color:"white"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"chains/"+e.networkName+".svg",style:{width:"60%"}},null,8,d)])),_:1})])])),_:1}),(0,l.Wm)(Y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(J,{class:"text-h6"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.gameName),1)])),_:1}),(0,l.Wm)(J,{caption:""},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{"no-caps":"",size:"10px",flat:"",dense:"",icon:"open_in_new"},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.contract,e.network),target:"_blank",class:"text-white"},[(0,l._)("span",p,(0,n.zw)(e.shortAddress(e.contract)),1)],8,m)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,{color:"orange","text-color":"white",icon:"las la-coins"}),(0,l.Uk)(" "+(0,n.zw)(e.$t("profit"))+" "+(0,n.zw)(e.gameInfo.profitRate.value+"%"),1)])),_:1}),(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("APR"))+" "+(0,n.zw)((365*parseFloat(e.gameInfo.profitRate.value)/e.days).toFixed(2)+"%"),1)])),_:1}),(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,{color:"red","text-color":"white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.houseEdge+"%"),1)])),_:1}),(0,l.Uk)(" "+(0,n.zw)(e.$t("houseEdge")),1)])),_:1}),(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("rake"))+" "+(0,n.zw)(e.rake+"%"),1)])),_:1})])])),_:1})])),_:1}),(0,l.Wm)(te),(0,l.Wm)(ee,{class:"row q-gutter-sm justify-evenly"},{default:(0,l.w5)((()=>[(0,l.Wm)(ae,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[(0,l._)("div",v,(0,n.zw)(e.$t("invested"))+": ",1)])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(parseFloat(e.infoStr.userInvested.value).toPrecision(6))+" "+e.token.toUpperCase()),1)])),_:1}),(0,l.Wm)(ae,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[w])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(parseFloat(e.infoStr.userLp.value).toPrecision(6))+" LP"),1)])),_:1}),(0,l.Wm)(ae,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[(0,l._)("div",f,(0,n.zw)(e.$t("value"))+": ",1)])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat((parseFloat(e.infoStr.userLp.value)*parseFloat(e.infoStr.gameBalanceEth.value)/parseFloat(e.infoStr.gameLpSupplyEth.value)).toPrecision(6))+" "+e.token.toUpperCase()),1)])),_:1})])),_:1}),(0,l.Wm)(ce,{class:"row",align:"around"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey full-width","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"",breakpoint:0},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{name:"invest",label:e.$t("invest")},null,8,["label"]),parseFloat(e.infoStr.userLp.value)>0?((0,l.wg)(),(0,l.j4)(le,{key:0,name:"divest",label:e.$t("divest")},null,8,["label"])):((0,l.wg)(),(0,l.j4)(le,{key:1,label:e.$t("divest"),disable:""},null,8,["label"]))])),_:1},8,["modelValue"]),(0,l.Wm)(ue,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=t=>e.tab=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{class:"q-pa-md q-gutter-y-md",name:"invest"},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{filled:"",type:"number",modelValue:e.investInputed,"onUpdate:modelValue":t[1]||(t[1]=t=>e.investInputed=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[2]||(t[2]=t=>e.updateInputs(0)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(R,{class:"fixed-width-100",color:"brown",label:"Token"})])),append:(0,l.w5)((()=>[(0,l.Wm)(R,{flat:"",label:e.token,class:"fixed-width-80"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1}),h,(0,l.Wm)(R,{class:"full-width min-width-320",color:"primary",label:e.$t("invest"),onClick:t[3]||(t[3]=t=>e.investClicked())},null,8,["label"])])),_:1}),(0,l.Wm)(ie,{class:"q-pa-md q-gutter-y-md",name:"divest"},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{filled:"",type:"number",modelValue:e.divestLp,"onUpdate:modelValue":t[4]||(t[4]=t=>e.divestLp=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[5]||(t[5]=t=>e.updateInputs(1)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(R,{class:"fixed-width-100",color:"brown",label:"Liquidity"})])),append:(0,l.w5)((()=>[(0,l.Wm)(R,{flat:"",label:"LP",class:"fixed-width-80"})])),_:1},8,["modelValue"])])),_:1}),g,(0,l._)("div",k,[(0,l.Wm)(j,{name:"las la-angle-double-down",color:"primary"})]),(0,l.Wm)(se,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{filled:"",type:"number",modelValue:e.divestToken,"onUpdate:modelValue":t[6]||(t[6]=t=>e.divestToken=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[7]||(t[7]=t=>e.updateInputs(2)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(R,{class:"fixed-width-100",color:"brown",label:"Token"})])),append:(0,l.w5)((()=>[(0,l.Wm)(R,{flat:"",label:e.token,class:"fixed-width-80"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(re,{"model-value":e.divestPercent,min:0,max:100,step:1,markers:25,"marker-labels":e=>e+"%",color:"primary",label:"",onChange:t[8]||(t[8]=t=>{e.divestPercent=t,e.updateInputs(3)})},null,8,["model-value","marker-labels"]),b,(0,l.Wm)(R,{class:"full-width min-width-320",color:"primary",label:e.$t("divest"),onClick:t[9]||(t[9]=t=>e.divestClicked())},null,8,["label"]),_])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,l.Wm)(pe,{modelValue:e.switchNet,"onUpdate:modelValue":t[11]||(t[11]=t=>e.switchNet=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(de,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),W,(0,l.Wm)(me),(0,l.wy)((0,l.Wm)(R,{icon:"close",flat:"",round:"",dense:""},null,512),[[_e]])])),_:1}),(0,l.Wm)(ee,{class:"row items-center"},{default:(0,l.w5)((()=>[y])),_:1}),(0,l.Wm)(ce,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(R,{class:"full-width",label:"Switch",color:"primary",onClick:e.switchNetwork},null,8,["onClick"]),[[_e]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(pe,{modelValue:e.signTx,"onUpdate:modelValue":t[14]||(t[14]=t=>e.signTx=t),position:"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(de,{class:"bg-glass",style:{top:"50px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{class:"q-pa-xs row items-center q-pb-none"},{default:(0,l.w5)((()=>[x,(0,l.Wm)(me),(0,l.wy)((0,l.Wm)(R,{icon:"close",flat:"",round:"",dense:""},null,512),[[_e]])])),_:1}),(0,l.Wm)(ee,{class:"row items-center q-pa-xs"},{default:(0,l.w5)((()=>[(0,l._)("div",I,[(0,l.Wm)(fe,{modelValue:e.txStep,"onUpdate:modelValue":t[13]||(t[13]=t=>e.txStep=t),vertical:"",color:"primary",flat:"",animated:"",class:"bg-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve,{name:1,title:"Sign Transaction",icon:"las la-wallet",done:e.txStep>1,error:e.signTxErr.length>0},{default:(0,l.w5)((()=>[""==e.signTxErr?((0,l.wg)(),(0,l.iD)("div",q,T)):((0,l.wg)(),(0,l.iD)("div",S,(0,n.zw)(e.signTxErr),1))])),_:1},8,["done","error"]),(0,l.Wm)(ve,{name:2,title:"Send Transaction",icon:"las la-receipt",done:e.txStep>2},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.signTxHash,e.network,"tx"),target:"_blank",class:"text-grey-6"},[(0,l._)("span",A,(0,n.zw)(" tx hash: "+e.shortAddress(e.signTxHash,6,!1)),1)],8,C),U,(0,l.Wm)(we,{dark:"",rounded:"",indeterminate:"",color:"secondary",class:"q-mt-sm"})])),_:1},8,["done"]),(0,l.Wm)(ve,{name:3,title:"Success",icon:"las la-trophy"},{default:(0,l.w5)((()=>[Z,(0,l._)("a",{href:e.linkAddress(e.signTxHash,e.network,"tx"),target:"_blank",class:"text-grey-6"},[(0,l._)("span",L,(0,n.zw)("tx hash: "+e.shortAddress(e.signTxHash,6,!1)),1)],8,V),(0,l.Wm)(R,{onClick:t[12]||(t[12]=t=>e.signTx=!1),color:"primary",label:"OK",class:"q-ml-sm full-width",dense:""})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,l.Wm)(ee,{class:"q-pa-xs row items-center q-pb-none"},{default:(0,l.w5)((()=>[Q])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(pe,{modelValue:e.addAllowance,"onUpdate:modelValue":t[16]||(t[16]=t=>e.addAllowance=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(de,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{color:"primary","text-color":"white",size:"md"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"tokens/"+e.token+".png"},null,8,z)])),_:1}),(0,l._)("span",F,(0,n.zw)(e.token.toUpperCase())+" Allowance",1),(0,l.Wm)(me),(0,l.wy)((0,l.Wm)(R,{icon:"close",flat:"",round:"",dense:""},null,512),[[_e]])])),_:1}),(0,l.Wm)(ee,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l._)("span",P,(0,n.zw)(e.$t("allowanceInfo")),1)])),_:1}),(0,l.Wm)(ce,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(R,{class:"full-width",label:e.$t("increase"),color:"primary",onClick:t[15]||(t[15]=t=>e.approveToken())},null,8,["label"]),[[_e]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,l._)("div",null,[(0,l.Wm)(ge,null,{default:(0,l.w5)((()=>[(0,l.Wm)(he,{icon:"las la-hand-holding-usd",label:"Your crypto Bank!","header-class":"text-primary text-h6","default-opened":""},{default:(0,l.w5)((()=>[(0,l.Wm)(de,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ee,null,{default:(0,l.w5)((()=>[E])),_:1}),(0,l.Wm)(ee,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Although we this game has a "+(0,n.zw)(e.houseEdge)+"% house edge, and in the long run will earn a profit of "+(0,n.zw)(e.houseEdge)+"% of the wagered amount, in the short to medium term we can still lose money. In times when we are lucky, we win many bets and earn a larger-than-expected profit, and in unlucky times we earn less than expected, and can even lose out. This is especially so if someone comes in and makes a large number of massive bets; we can either gain a lot or lose a lot. ",1)])),_:1}),(0,l.Wm)(ee,{class:"text-bold"},{default:(0,l.w5)((()=>[B])),_:1})])),_:1})])),_:1}),(0,l.Wm)(he,{icon:"las la-bullhorn",label:"Help advertise the site!","header-class":"text-primary text-h6","default-opened":""},{default:(0,l.w5)((()=>[(0,l.Wm)(de,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{class:"text-bold text-h6"},{default:(0,l.w5)((()=>[N])),_:1}),(0,l.Wm)(ee,{class:"text-center text-bold text-h5"},{default:(0,l.w5)((()=>[$])),_:1})])),_:1})])),_:1})])),_:1})]),(0,l.Wm)(ke,{modelValue:e.selectedToken,"onUpdate:modelValue":t[17]||(t[17]=t=>e.selectedToken=t)},null,8,["modelValue"])])),_:1})}var D=a(60499),j=a(85990),R=a(19302),M=a(65457),O=a(18910),Y=a(28488),J=a(39710),K=a(17779),X=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,o){function s(e){try{r(l.next(e))}catch(t){o(t)}}function i(e){try{r(l["throw"](e))}catch(t){o(t)}}function r(e){e.done?a(e.value):n(e.value).then(s,i)}r((l=l.apply(e,t||[])).next())}))};const ee=a(57841),te=a(82897),ae=a(53310),le={title:"Crystal - Invest"};function ne(e){K.log("Switch network: ",(0,j.v)().networks[e].name,(0,j.v)().networks[e].id),(0,j.v)().initWeb3(e)}const oe=(0,l.aZ)({name:"InvestPage",components:{BalanceView:J.Z},setup(){const e=(0,O.yj)(),t=(0,R.Z)();t.dark.set(!0),(0,M.Z)(le);const a=(0,D.iH)("matic"),l=(0,D.iH)(!1),n=(0,D.iH)(256e5),o=(0,D.iH)(0),s=(0,D.iH)(""),i=(0,D.iH)(""),r=(0,D.iH)(""),u=(0,D.iH)(""),c=(0,D.iH)("04/04/2022"),d=(0,D.iH)(1),m=(0,D.iH)(""),p=(0,D.iH)(""),v=(0,D.iH)(0),w=(0,D.iH)(0),f=(0,D.iH)(!1),h=(0,D.iH)(!1),g=(0,D.iH)(""),k=(0,D.iH)(""),b=(0,D.iH)(1),_={bets:(0,D.iH)("0"),supply:(0,D.iH)("0"),invested:(0,D.iH)("0"),divisted:(0,D.iH)("0"),balance:(0,D.iH)("0"),profitRate:(0,D.iH)("0")},W={lpBalnce:(0,D.iH)("0"),invested:(0,D.iH)("0")},y={userInvested:(0,D.iH)("0"),userLp:(0,D.iH)("0"),userLpValue:(0,D.iH)("0"),gameBalanceEth:(0,D.iH)("0"),gameLpSupplyEth:(0,D.iH)("0")},x=(0,D.iH)(0),I=(0,D.iH)(0),q=(0,D.iH)(0),H=(0,D.iH)(0),T=(0,j.v)();function S(){return X(this,void 0,void 0,(function*(){const e=yield(0,j.v)().web3.eth.net.getId().then((e=>(K.log(e),e))).catch((e=>(K.log("checkNetwork: ",e),-1)));return e}))}function C(){return X(this,void 0,void 0,(function*(){const e=(0,j.v)().networks[o.value].id,t=(0,j.v)().networks[o.value].name,a=(0,j.v)().networks[o.value].tokenName,l=(0,j.v)().networks[o.value].symbol,n=(0,j.v)().networks[o.value].rpcUrl,s=(0,j.v)().networks[o.value].explorer,i="0x"+e.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:i}]}),location.reload()}catch(r){if(K.log(r),4902===r.code){K.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:i,chainName:t,nativeCurrency:{name:a,symbol:l,decimals:18},rpcUrls:[n],blockExplorerUrls:[s]}]}),location.reload()}catch(u){alert(u.message)}}else alert(r.message)}}))}function A(e){return X(this,void 0,void 0,(function*(){const t=(0,j.v)().web3Instance,a=new t.eth.Contract(ee,e);a.methods.gameInfo().call().then((function(e){K.log(e),_.bets.value=e[0],_.supply.value=e[1],_.invested.value=e[2],_.divisted.value=e[3],_.balance.value=e[4];let a=parseFloat(t.utils.fromWei(e[1])),l=parseFloat(t.utils.fromWei(e[2])),n=parseFloat(t.utils.fromWei(e[3])),o=parseFloat(t.utils.fromWei(e[4])),s=o+n-l;s=s<0?0:s;let i=100*s/l;_.profitRate.value=i.toFixed(4),y.gameBalanceEth.value=o.toPrecision(6),y.gameLpSupplyEth.value=a.toPrecision(6)})).catch((function(e){K.log("getGameInfo: ",e)}))}))}function U(e){return X(this,void 0,void 0,(function*(){const t=(0,j.v)().web3Instance;if(t.utils.isAddress((0,j.v)().accountAddr)){const a=new t.eth.Contract(ee,e);a.methods.userDetail((0,j.v)().accountAddr).call().then((function(e){K.log("getUserInfo: ",e),W.invested.value=e.invested,y.userInvested.value=parseFloat(t.utils.fromWei(e.invested.concat(r.value))).toPrecision(6)})).catch((function(e){K.log("getUserInfo: ",e)}))}}))}function Z(e){return X(this,void 0,void 0,(function*(){const t=(0,j.v)().web3Instance;if(t.utils.isAddress((0,j.v)().accountAddr)){const a=new t.eth.Contract(ee,e);a.methods.balanceOf((0,j.v)().accountAddr).call().then((function(e){K.log("getUserLp: ",e),W.lpBalnce.value=e;const a=t.utils.fromWei(e.concat(r.value));y.userLp.value=parseFloat(a).toPrecision(6)})).catch((function(e){K.log("getUserLp: ",e)}))}}))}function V(e,t){return X(this,void 0,void 0,(function*(){if(!(0,j.v)().web3.utils.isAddress((0,j.v)().accountAddr))return void alert("Need Connect Wallet!");if(K.log("Invest(",t,",",e,")"),e<=0)return;const a=yield S();if(a!=(0,j.v)().networks[o.value].id)return K.log(a,"!=",(0,j.v)().networks[o.value].id),void(f.value=!0);const l=(0,j.v)().web3,n=new l.eth.Contract(ee,t);let s=n.methods.invest(),i=s.encodeABI();l.eth.estimateGas({from:(0,j.v)().account,to:t,value:l.utils.toWei(e.toString(),"ether"),data:i}).then((function(a){K.log("gasAmount: ",a),l.eth.sendTransaction({from:(0,j.v)().account,to:t,value:l.utils.toWei(e.toString(),"ether"),gas:parseInt((1.05*a).toString()),gasPrice:36e9,data:i}).on("transactionHash",(e=>{K.log("transactionHash: ",e),b.value=2,k.value=e})).on("receipt",(e=>{K.log("receipt: ",e),b.value=3,A(t),U(t),Z(t)})).on("error",(e=>{K.log("investTx ",e),g.value=e.message,b.value=1}))})).catch((function(e){K.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],l=JSON.parse(a),n=l.message.split(":");g.value=n[0]+": "+n[1]}))}))}function L(e,t){return X(this,void 0,void 0,(function*(){if(!(0,j.v)().web3.utils.isAddress((0,j.v)().accountAddr))return void alert("Need Connect Wallet!");if(K.log("Invest(",t,",",e,")"),e<=0)return;const a=yield S();if(a!=(0,j.v)().networks[o.value].id)return K.log(a,"!=",(0,j.v)().networks[o.value].id),void(f.value=!0);const n=(0,j.v)().web3,s=new n.eth.Contract(te,t);let i=n.utils.toWei(e.toString(),"ether");i=i.substring(0,i.length-r.value.length);let u=s.methods.invest(i),c=u.encodeABI();n.eth.estimateGas({from:(0,j.v)().account,to:t,value:0,data:c}).then((function(e){K.log("gasAmount: ",e),n.eth.sendTransaction({from:(0,j.v)().account,to:t,value:0,gas:parseInt((1.05*e).toString()),gasPrice:36e9,data:c}).on("transactionHash",(e=>{K.log("transactionHash: ",e),b.value=2,k.value=e})).on("receipt",(e=>{K.log("receipt: ",e),b.value=3,A(t),U(t),Z(t)})).on("error",(e=>{K.log("investTx ",e),g.value=e.message,b.value=1}))})).catch((function(e){K.log("estimateGas: ",e);let t=e.message.toString();g.value=t,t.includes("exceeds")&&t.includes("allowance")?(l.value=!0,h.value=!1):b.value=1}))}))}function Q(){return X(this,void 0,void 0,(function*(){let e=x.value;K.log("Invest Clicked: ",e),e<=0||(h.value=!0,g.value="",k.value="",b.value=1,"matic"==p.value?V(e,m.value):L(e,m.value),x.value=0)}))}function z(e,t){return X(this,void 0,void 0,(function*(){if(!(0,j.v)().web3.utils.isAddress((0,j.v)().accountAddr))return void alert("Need Connect Wallet!");const a=yield S();if(a!=(0,j.v)().networks[o.value].id)return K.log(a,"!=",(0,j.v)().networks[o.value].id),void(f.value=!0);const l=(0,j.v)().web3,n=new l.eth.Contract(ee,t);K.log("Divest(",t,",",e,")");let s=n.methods.divest(e),i=s.encodeABI();l.eth.estimateGas({from:(0,j.v)().account,to:t,value:0,data:i}).then((function(e){K.log("gasAmount: ",e),l.eth.sendTransaction({from:(0,j.v)().account,to:t,value:0,gas:parseInt((1.05*e).toString()),gasPrice:36e9,data:i}).on("transactionHash",(e=>{K.log("transactionHash: ",e),b.value=2,k.value=e})).on("receipt",(e=>{K.log("receipt: ",e),b.value=3,A(t),U(t),Z(t)})).on("error",(e=>{K.log("divestTx ",e),g.value=e.message,b.value=1}))})).catch((function(e){K.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],l=JSON.parse(a),n=l.message.split(":");g.value=n[0]+": "+n[1]}))}))}function F(){return X(this,void 0,void 0,(function*(){let e=T.web3.utils.toWei(q.value.toFixed(10));I.value>=99.9&&(K.log(W.lpBalnce.value),e=W.lpBalnce.value),e=e.substring(0,e.length-r.value.length),K.log("Divest Clicked: ",e),z(e,m.value),h.value=!0,g.value="",k.value="",b.value=1,I.value=0,H.value=0,q.value=0}))}function P(){return X(this,void 0,void 0,(function*(){const e=u.value;K.log("approveToken");const t=(0,j.v)().web3,a=t.utils.toWei("99999999999999999999"),l=new t.eth.Contract(ae,e);let n=l.methods.approve(m.value,a),o=n.encodeABI();t.eth.estimateGas({from:(0,j.v)().account,to:e,value:0,data:o}).then((function(a){K.log("gasAmount: ",a),t.eth.sendTransaction({from:(0,j.v)().account,to:e,value:0,gas:parseInt((1.05*a).toString()),gasPrice:36e9,data:o}).on("transactionHash",(e=>{K.log("transactionHash: ",e)})).on("receipt",(e=>{K.log("receipt: ",e)})).on("error",(e=>{K.log("tx increaseAllowance ",e)}))})).catch((function(e){alert(e)}))}))}return{tab:(0,D.iH)("invest"),shortAddress:Y.sC,copyAddress:Y.c4,linkAddress:Y.ol,approveToken:P,selectedToken:a,addAllowance:l,signTx:h,signTxErr:g,signTxHash:k,txStep:b,store:T,network:o,networkName:s,switchNet:f,fromBlock:n,gameName:i,start:c,days:d,contract:m,token:p,houseEdge:v,rake:w,gameInfo:_,userInfo:W,infoStr:y,investInputed:x,divestPercent:I,divestLp:q,divestToken:H,refresh(){K.log("Refresh"),location.reload()},updateInputs(e){(q.value<0||H.value<0)&&(q.value=0,I.value=0);var t=0;2==e?(t=H.value,q.value=H.value*parseFloat(y.gameLpSupplyEth.value)/parseFloat(y.gameBalanceEth.value)):3==e&&(q.value=I.value*parseFloat(y.userLp.value)/100),q.value>parseFloat(y.userLp.value)?(q.value=parseFloat(y.userLp.value),I.value=100,t=0):I.value=100*q.value/parseFloat(y.userLp.value),H.value=2==e&&0!=t?t:q.value*parseFloat(y.gameBalanceEth.value)/parseFloat(y.gameLpSupplyEth.value),1!=e&&(q.value=parseFloat(q.value.toPrecision(6))),2!=e&&(H.value=parseFloat(H.value.toPrecision(6)))},initInvest(){return X(this,void 0,void 0,(function*(){let t=0;null!=e.query.game?t=parseInt(e.query.game.toString()):K.log("Default game");let l=T.gameList[t];u.value=l.tokenContract,r.value=l.tokenUnit,i.value=l.name,o.value=l.networkId,s.value=(0,j.v)().networks[l.networkId].name.toLowerCase(),m.value=l.contract,a.value=l.token,p.value=l.token,v.value=l.houseEdge,w.value=l.rake,c.value=l.start;let n=new Date(c.value),h=new Date;d.value=Math.round(h.getTime()-n.getTime())/864e5,K.log("Init Invest: ",t),ne(l.networkId);const g=yield S();if(g!=(0,j.v)().networks[o.value].id)return K.log(g,"!=",(0,j.v)().networks[o.value].id),void(f.value=!0)}))},checkNetwork:S,switchNetwork:C,investTx:V,investTokenTx:L,investClicked:Q,divestTx:z,divestClicked:F,getGameInfo:A,getUserInfo:U,getUserLp:Z}},beforeMount(){this.initInvest(),this.getGameInfo(this.contract),this.getUserInfo(this.contract),this.getUserLp(this.contract)}});var se=a(11639),ie=a(69885),re=a(3388),ue=a(68879),ce=a(22857),de=a(44458),me=a(63190),pe=a(490),ve=a(76749),we=a(61357),fe=a(33115),he=a(57691),ge=a(11821),ke=a(50926),be=a(18149),_e=a(47817),We=a(57661),ye=a(89800),xe=a(84106),Ie=a(67236),qe=a(66611),He=a(28423),Te=a(32074),Se=a(90136),Ce=a(8225),Ae=a(46017),Ue=a(21992),Ze=a(8289),Ve=a(13246),Le=a(50651),Qe=a(8858),ze=a(62146),Fe=a(69984),Pe=a.n(Fe);const Ee=(0,se.Z)(oe,[["render",G]]),Be=Ee;Pe()(oe,"components",{QPage:ie.Z,QPageSticky:re.Z,QBtn:ue.Z,QIcon:ce.Z,QCard:de.Z,QCardSection:me.Z,QItem:pe.Z,QItemSection:ve.Z,QAvatar:we.Z,QItemLabel:fe.Z,QChip:he.Z,QCardActions:ge.Z,QSeparator:ke.Z,QField:be.Z,QTabs:_e.Z,QTab:We.Z,QTabPanels:ye.Z,QTabPanel:xe.Z,QBtnGroup:Ie.Z,QInput:qe.Z,QSlider:He.Z,QDialog:Te.Z,QSpace:Se.Z,QStepper:Ce.Z,QStep:Ae.Z,QStepperNavigation:Ue.Z,QLinearProgress:Ze.Z,QList:Ve.Z,QExpansionItem:Le.Z,QTable:Qe.Z}),Pe()(oe,"directives",{ClosePopup:ze.Z})}}]);