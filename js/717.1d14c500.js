"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[717],{44430:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ze});var l=a(59835),n=a(86970);const s={class:"q-pa-md",style:{width:"100%","max-width":"1439px"}},o=(0,l._)("br",null,null,-1),i={class:"q-pa-md col-3 col-md-4 col-sm-6 col-xs-12"},r={class:"q-gutter-x-sm",style:{"z-index":"2"}},u=["src"],d={class:"q-gutter-x-sm",style:{"z-index":"1",position:"absolute",top:"0px",left:"0px"}},c=["src"],p=["href"],m={class:"cursor-pointer"},v=(0,l.Uk)(" House Edge "),w=(0,l._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," Invested: ",-1),f=(0,l._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," LP Token: ",-1),h=(0,l._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," Value: ",-1),g=(0,l._)("br",null,null,-1),k=(0,l._)("br",null,null,-1),b={class:"text-center"},_=(0,l._)("br",null,null,-1),W=(0,l._)("br",null,null,-1),y=(0,l._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1),x=(0,l._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1),I=(0,l._)("span",{class:"text-h6 q-ml-sm"},"Transaction",-1),q={class:"q-pa-xs"},H={key:0,class:"text-left"},S=(0,l._)("a",null,[(0,l._)("span",{class:"cursor-pointer"}," Sign transaction with your wallet and we will never touch your private key! ")],-1),C=[S],T={key:1,class:"text-left text-red"},Z=["href"],L={class:"cursor-pointer"},Q=(0,l._)("a",null,[(0,l._)("span",{class:"cursor-pointer"}," Transaction is broadcasted, waiting for confirmation. ")],-1),U=(0,l._)("div",null,"Transaction Success!",-1),V=["href"],A={class:"cursor-pointer"},F=(0,l._)("span",{class:"text-subtitle2 text-secondary q-ml-sm"},"https://crystal.network",-1);function P(e,t,a,S,P,E){const z=(0,l.up)("q-icon"),N=(0,l.up)("q-btn"),B=(0,l.up)("q-page-sticky"),D=(0,l.up)("q-avatar"),G=(0,l.up)("q-item-section"),j=(0,l.up)("q-item-label"),R=(0,l.up)("q-item"),M=(0,l.up)("q-chip"),O=(0,l.up)("q-card-section"),J=(0,l.up)("q-separator"),K=(0,l.up)("q-field"),Y=(0,l.up)("q-tab"),X=(0,l.up)("q-tabs"),$=(0,l.up)("q-input"),ee=(0,l.up)("q-btn-group"),te=(0,l.up)("q-tab-panel"),ae=(0,l.up)("q-slider"),le=(0,l.up)("q-tab-panels"),ne=(0,l.up)("q-card-actions"),se=(0,l.up)("q-card"),oe=(0,l.up)("q-space"),ie=(0,l.up)("q-dialog"),re=(0,l.up)("q-step"),ue=(0,l.up)("q-linear-progress"),de=(0,l.up)("q-stepper"),ce=(0,l.up)("BalanceView"),pe=(0,l.up)("q-page"),me=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(pe,{class:"row justify-evenly"},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{position:"top-left",offset:[0,0],style:{"z-index":"999"}},{default:(0,l.w5)((()=>[(0,l.Wm)(N,{flat:"","no-caps":"",to:"/"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{name:"las la-angle-double-left"})])),_:1}),(0,l.Wm)(N,{flat:"","no-caps":"",onClick:e.refresh},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{name:"las la-sync"})])),_:1},8,["onClick"])])),_:1}),(0,l._)("div",s,[o,(0,l._)("div",i,[(0,l.Wm)(se,{class:"my-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G,{avatar:""},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(D,{size:"48px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"tokens/"+e.token+".png"},null,8,u)])),_:1})]),(0,l._)("div",d,[(0,l.Wm)(D,{size:"30px",color:"white"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"chains/"+e.networkName+".svg",style:{width:"60%"}},null,8,c)])),_:1})])])),_:1}),(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Wm)(j,{class:"text-h6"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.gameName),1)])),_:1}),(0,l.Wm)(j,{caption:""},{default:(0,l.w5)((()=>[(0,l.Wm)(N,{"no-caps":"",size:"10px",flat:"",dense:"",icon:"open_in_new"},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.contract,e.network),target:"_blank",class:"text-white"},[(0,l._)("span",m,(0,n.zw)(e.shortAddress(e.contract)),1)],8,p)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(R,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(M,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{color:"orange","text-color":"white",icon:"las la-coins"}),(0,l.Uk)(" Profit "+(0,n.zw)(e.gameInfo.profitRate.value+"%"),1)])),_:1}),(0,l.Wm)(M,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" APR "+(0,n.zw)((365*parseFloat(e.gameInfo.profitRate.value)/e.days).toFixed(2)+"%"),1)])),_:1}),(0,l.Wm)(M,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{color:"red","text-color":"white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.houseEdge+"%"),1)])),_:1}),v])),_:1}),(0,l.Wm)(M,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Rake "+(0,n.zw)(e.rake+"%"),1)])),_:1})])])),_:1})])),_:1}),(0,l.Wm)(J),(0,l.Wm)(O,{class:"row q-gutter-sm justify-evenly"},{default:(0,l.w5)((()=>[(0,l.Wm)(K,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[w])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(e.infoStr.userInvested.value)+" "+e.token),1)])),_:1}),(0,l.Wm)(K,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[f])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(e.infoStr.userLp.value)+" LP"),1)])),_:1}),(0,l.Wm)(K,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[h])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(e.infoStr.userLp.value)*parseFloat(e.infoStr.gameBalanceEth.value)/parseFloat(e.infoStr.gameLpSupplyEth.value)+" "+e.token),1)])),_:1})])),_:1}),(0,l.Wm)(ne,{class:"row",align:"around"},{default:(0,l.w5)((()=>[(0,l.Wm)(X,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey full-width","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"",breakpoint:0},{default:(0,l.w5)((()=>[(0,l.Wm)(Y,{name:"invest",label:"Invest"}),parseFloat(e.infoStr.userLp.value)>0?((0,l.wg)(),(0,l.j4)(Y,{key:0,name:"divest",label:"Divest"})):((0,l.wg)(),(0,l.j4)(Y,{key:1,label:"Divest",disable:""}))])),_:1},8,["modelValue"]),(0,l.Wm)(le,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=t=>e.tab=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(te,{class:"q-pa-md q-gutter-y-md",name:"invest"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)($,{filled:"",type:"number",modelValue:e.investInputed,"onUpdate:modelValue":t[1]||(t[1]=t=>e.investInputed=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[2]||(t[2]=t=>e.updateInputs(0)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(N,{class:"fixed-width-100",color:"brown",label:"Token"})])),append:(0,l.w5)((()=>[(0,l.Wm)(N,{flat:"",label:e.token,class:"fixed-width-80"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1}),g,(0,l.Wm)(N,{class:"full-width min-width-320",color:"primary",label:"Invest",onClick:t[3]||(t[3]=t=>e.investClicked())})])),_:1}),(0,l.Wm)(te,{class:"q-pa-md q-gutter-y-md",name:"divest"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)($,{filled:"",type:"number",modelValue:e.divestLp,"onUpdate:modelValue":t[4]||(t[4]=t=>e.divestLp=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[5]||(t[5]=t=>e.updateInputs(1)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(N,{class:"fixed-width-100",color:"brown",label:"Liquidity"})])),append:(0,l.w5)((()=>[(0,l.Wm)(N,{flat:"",label:"LP",class:"fixed-width-80"})])),_:1},8,["modelValue"])])),_:1}),k,(0,l._)("div",b,[(0,l.Wm)(z,{name:"las la-angle-double-down",color:"primary"})]),(0,l.Wm)(ee,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)($,{filled:"",type:"number",modelValue:e.divestToken,"onUpdate:modelValue":t[6]||(t[6]=t=>e.divestToken=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[7]||(t[7]=t=>e.updateInputs(2)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(N,{class:"fixed-width-100",color:"brown",label:"Token"})])),append:(0,l.w5)((()=>[(0,l.Wm)(N,{flat:"",label:e.token,class:"fixed-width-80"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(ae,{"model-value":e.divestPercent,min:0,max:100,step:1,markers:25,"marker-labels":e=>e+"%",color:"primary",label:"",onChange:t[8]||(t[8]=t=>{e.divestPercent=t,e.updateInputs(3)})},null,8,["model-value","marker-labels"]),_,(0,l.Wm)(N,{class:"full-width min-width-320",color:"primary",label:"Divest",onClick:t[9]||(t[9]=t=>e.divestClicked())}),W])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,l.Wm)(ie,{modelValue:e.switchNet,"onUpdate:modelValue":t[11]||(t[11]=t=>e.switchNet=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(se,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),y,(0,l.Wm)(oe),(0,l.wy)((0,l.Wm)(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[me]])])),_:1}),(0,l.Wm)(O,{class:"row items-center"},{default:(0,l.w5)((()=>[x])),_:1}),(0,l.Wm)(ne,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(N,{class:"full-width",label:"Switch",color:"primary",onClick:e.switchNetwork},null,8,["onClick"]),[[me]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ie,{modelValue:e.signTx,"onUpdate:modelValue":t[14]||(t[14]=t=>e.signTx=t),position:"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{style:{top:"50px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{class:"q-pa-xs row items-center q-pb-none"},{default:(0,l.w5)((()=>[I,(0,l.Wm)(oe),(0,l.wy)((0,l.Wm)(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[me]])])),_:1}),(0,l.Wm)(O,{class:"row items-center q-pa-xs"},{default:(0,l.w5)((()=>[(0,l._)("div",q,[(0,l.Wm)(de,{modelValue:e.txStep,"onUpdate:modelValue":t[13]||(t[13]=t=>e.txStep=t),vertical:"",color:"primary",animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{name:1,title:"Sign Transaction",icon:"las la-wallet",done:e.txStep>1,error:e.signTxErr.length>0},{default:(0,l.w5)((()=>[""==e.signTxErr?((0,l.wg)(),(0,l.iD)("div",H,C)):((0,l.wg)(),(0,l.iD)("div",T,(0,n.zw)(e.signTxErr),1))])),_:1},8,["done","error"]),(0,l.Wm)(re,{name:2,title:"Send Transaction",icon:"las la-receipt",done:e.txStep>2},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.signTxHash,e.network,"tx"),target:"_blank",class:"text-grey-6"},[(0,l._)("span",L,(0,n.zw)(" tx hash: "+e.shortAddress(e.signTxHash,6,!1)),1)],8,Z),Q,(0,l.Wm)(ue,{dark:"",rounded:"",indeterminate:"",color:"secondary",class:"q-mt-sm"})])),_:1},8,["done"]),(0,l.Wm)(re,{name:3,title:"Success",icon:"las la-trophy"},{default:(0,l.w5)((()=>[U,(0,l._)("a",{href:e.linkAddress(e.signTxHash,e.network,"tx"),target:"_blank",class:"text-grey-6"},[(0,l._)("span",A,(0,n.zw)("tx hash: "+e.shortAddress(e.signTxHash,6,!1)),1)],8,V),(0,l.Wm)(N,{onClick:t[12]||(t[12]=t=>e.signTx=!1),color:"primary",label:"OK",class:"q-ml-sm full-width",dense:""})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,l.Wm)(O,{class:"q-pa-xs row items-center q-pb-none"},{default:(0,l.w5)((()=>[F])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,l.Wm)(ce)])),_:1})}var E=a(60499),z=a(85990),N=a(19302),B=a(65457),D=a(18910),G=a(28488),j=a(37948),R=a(17779),M=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(l.next(e))}catch(t){s(t)}}function i(e){try{r(l["throw"](e))}catch(t){s(t)}}function r(e){e.done?a(e.value):n(e.value).then(o,i)}r((l=l.apply(e,t||[])).next())}))};const O=a(57841),J={title:"Crystal - Invest"};function K(e){R.log("Switch network: ",(0,z.v)().networks[e].name,(0,z.v)().networks[e].id),(0,z.v)().initWeb3(e)}const Y=(0,l.aZ)({name:"InvestPage",components:{BalanceView:j.Z},setup(){const e=(0,D.yj)(),t=(0,N.Z)();t.dark.set(!0),(0,B.Z)(J);const a=(0,E.iH)(256e5),l=(0,E.iH)(0),n=(0,E.iH)(""),s=(0,E.iH)(""),o=(0,E.iH)("04/04/2022"),i=(0,E.iH)(1),r=(0,E.iH)(""),u=(0,E.iH)(""),d=(0,E.iH)(0),c=(0,E.iH)(0),p=(0,E.iH)(!1),m=(0,E.iH)(!1),v=(0,E.iH)(""),w=(0,E.iH)(""),f=(0,E.iH)(1),h={bets:(0,E.iH)("0"),supply:(0,E.iH)("0"),invested:(0,E.iH)("0"),divisted:(0,E.iH)("0"),balance:(0,E.iH)("0"),profitRate:(0,E.iH)("0")},g={lpBalnce:(0,E.iH)("0"),invested:(0,E.iH)("0")},k={userInvested:(0,E.iH)("0"),userLp:(0,E.iH)("0"),userLpValue:(0,E.iH)("0"),gameBalanceEth:(0,E.iH)("0"),gameLpSupplyEth:(0,E.iH)("0")},b=(0,E.iH)(0),_=(0,E.iH)(0),W=(0,E.iH)(0),y=(0,E.iH)(0),x=(0,z.v)();function I(){return M(this,void 0,void 0,(function*(){const e=yield(0,z.v)().web3.eth.net.getId().then((e=>(R.log(e),e))).catch((e=>(R.log("checkNetwork: ",e),-1)));return e}))}function q(){return M(this,void 0,void 0,(function*(){const e=(0,z.v)().networks[l.value].id,t=(0,z.v)().networks[l.value].name,a=(0,z.v)().networks[l.value].tokenName,n=(0,z.v)().networks[l.value].symbol,s=(0,z.v)().networks[l.value].rpcUrl,o=(0,z.v)().networks[l.value].explorer,i="0x"+e.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:i}]}),location.reload()}catch(r){if(R.log(r),4902===r.code){R.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:i,chainName:t,nativeCurrency:{name:a,symbol:n,decimals:18},rpcUrls:[s],blockExplorerUrls:[o]}]}),location.reload()}catch(u){alert(u.message)}}else alert(r.message)}}))}function H(e){return M(this,void 0,void 0,(function*(){const t=(0,z.v)().web3Instance,a=new t.eth.Contract(O,e);a.methods.gameInfo().call().then((function(e){R.log(e),h.bets.value=e[0],h.supply.value=e[1],h.invested.value=e[2],h.divisted.value=e[3],h.balance.value=e[4];let a=parseFloat(t.utils.fromWei(e[1])),l=parseFloat(t.utils.fromWei(e[2])),n=parseFloat(t.utils.fromWei(e[3])),s=parseFloat(t.utils.fromWei(e[4])),o=s+n-l;o=o<0?0:o;let i=100*o/l;h.profitRate.value=i.toFixed(4),k.gameBalanceEth.value=s.toPrecision(6),k.gameLpSupplyEth.value=a.toPrecision(6)})).catch((function(e){R.log("getGameInfo: ",e)}))}))}function S(e){return M(this,void 0,void 0,(function*(){const t=(0,z.v)().web3Instance;if(t.utils.isAddress((0,z.v)().accountAddr)){const a=new t.eth.Contract(O,e);a.methods.userDetail((0,z.v)().accountAddr).call().then((function(e){R.log("getUserInfo: ",e),g.invested.value=e.invested,k.userInvested.value=parseFloat(t.utils.fromWei(e.invested)).toPrecision(6)})).catch((function(e){R.log("getUserInfo: ",e)}))}}))}function C(e){return M(this,void 0,void 0,(function*(){const t=(0,z.v)().web3Instance;if(t.utils.isAddress((0,z.v)().accountAddr)){const a=new t.eth.Contract(O,e);a.methods.balanceOf((0,z.v)().accountAddr).call().then((function(e){R.log("getUserLp: ",e),g.lpBalnce.value=e,k.userLp.value=parseFloat(t.utils.fromWei(e)).toPrecision(6)})).catch((function(e){R.log("getUserLp: ",e)}))}}))}function T(e,t){return M(this,void 0,void 0,(function*(){if(!(0,z.v)().web3.utils.isAddress((0,z.v)().accountAddr))return void alert("Need Connect Wallet!");const a=yield I();if(a!=(0,z.v)().networks[l.value].id)return R.log(a,"!=",(0,z.v)().networks[l.value].id),void(p.value=!0);const n=(0,z.v)().web3,s=new n.eth.Contract(O,t);R.log("Invest(",t,",",e,")");let o=s.methods.invest(),i=o.encodeABI();n.eth.estimateGas({from:(0,z.v)().account,to:t,value:n.utils.toWei(e.toString(),"ether"),data:i}).then((function(a){R.log("gasAmount: ",a),n.eth.sendTransaction({from:(0,z.v)().account,to:t,value:n.utils.toWei(e.toString(),"ether"),gas:parseInt((1.05*a).toString()),gasPrice:36e9,data:i}).on("transactionHash",(e=>{R.log("transactionHash: ",e),f.value=2,w.value=e})).on("receipt",(e=>{R.log("receipt: ",e),f.value=3,H(t),S(t),C(t)})).on("error",(e=>{R.log("investTx ",e),v.value=e.message,f.value=1}))})).catch((function(e){R.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],l=JSON.parse(a),n=l.message.split(":");v.value=n[0]+": "+n[1]}))}))}function Z(){return M(this,void 0,void 0,(function*(){let e=b.value;R.log("Invest Clicked: ",e),T(e,r.value),m.value=!0,v.value="",w.value="",f.value=1,b.value=0}))}function L(e,t){return M(this,void 0,void 0,(function*(){if(!(0,z.v)().web3.utils.isAddress((0,z.v)().accountAddr))return void alert("Need Connect Wallet!");const a=yield I();if(a!=(0,z.v)().networks[l.value].id)return R.log(a,"!=",(0,z.v)().networks[l.value].id),void(p.value=!0);const n=(0,z.v)().web3,s=new n.eth.Contract(O,t);R.log("Divest(",t,",",e,")");let o=s.methods.divest(e),i=o.encodeABI();n.eth.estimateGas({from:(0,z.v)().account,to:t,value:0,data:i}).then((function(e){R.log("gasAmount: ",e),n.eth.sendTransaction({from:(0,z.v)().account,to:t,value:0,gas:parseInt((1.05*e).toString()),gasPrice:36e9,data:i}).on("transactionHash",(e=>{R.log("transactionHash: ",e),f.value=2,w.value=e})).on("receipt",(e=>{R.log("receipt: ",e),f.value=3,H(t),S(t),C(t)})).on("error",(e=>{R.log("divestTx ",e),v.value=e.message,f.value=1}))})).catch((function(e){R.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],l=JSON.parse(a),n=l.message.split(":");v.value=n[0]+": "+n[1]}))}))}function Q(){return M(this,void 0,void 0,(function*(){let e=x.web3.utils.toWei(W.value.toFixed(10));_.value>=99.9&&(R.log(g.lpBalnce.value),e=g.lpBalnce.value),R.log("Divest Clicked: ",e),L(e,r.value),m.value=!0,v.value="",w.value="",f.value=1,_.value=0,y.value=0,W.value=0}))}return{tab:(0,E.iH)("invest"),shortAddress:G.sC,copyAddress:G.c4,linkAddress:G.ol,signTx:m,signTxErr:v,signTxHash:w,txStep:f,store:x,network:l,networkName:n,switchNet:p,fromBlock:a,gameName:s,start:o,days:i,contract:r,token:u,houseEdge:d,rake:c,gameInfo:h,userInfo:g,infoStr:k,investInputed:b,divestPercent:_,divestLp:W,divestToken:y,refresh(){R.log("Refresh"),location.reload()},updateInputs(e){(W.value<0||y.value<0)&&(W.value=0,_.value=0);var t=0;2==e?(t=y.value,W.value=y.value*parseFloat(k.gameLpSupplyEth.value)/parseFloat(k.gameBalanceEth.value)):3==e&&(W.value=_.value*parseFloat(k.userLp.value)/100),W.value>parseFloat(k.userLp.value)?(W.value=parseFloat(k.userLp.value),_.value=100,t=0):_.value=100*W.value/parseFloat(k.userLp.value),y.value=2==e&&0!=t?t:W.value*parseFloat(k.gameBalanceEth.value)/parseFloat(k.gameLpSupplyEth.value)},initInvest(){return M(this,void 0,void 0,(function*(){let t=0;null!=e.query.game?t=parseInt(e.query.game.toString()):R.log("Default game");let a=x.gameList[t];s.value=a.name,l.value=a.networkId,n.value=(0,z.v)().networks[a.networkId].name.toLowerCase(),r.value=a.contract,u.value=a.token,d.value=a.houseEdge,c.value=a.rake,o.value=a.start;let m=new Date(o.value),v=new Date;i.value=Math.round(v.getTime()-m.getTime())/864e5,R.log("Init Invest: ",t),K(a.networkId);const w=yield I();if(w!=(0,z.v)().networks[l.value].id)return R.log(w,"!=",(0,z.v)().networks[l.value].id),void(p.value=!0)}))},checkNetwork:I,switchNetwork:q,investTx:T,investClicked:Z,divestTx:L,divestClicked:Q,getGameInfo:H,getUserInfo:S,getUserLp:C}},beforeMount(){this.initInvest(),this.getGameInfo(this.contract),this.getUserInfo(this.contract),this.getUserLp(this.contract)}});var X=a(11639),$=a(69885),ee=a(3388),te=a(68879),ae=a(22857),le=a(44458),ne=a(63190),se=a(490),oe=a(76749),ie=a(61357),re=a(33115),ue=a(57691),de=a(11821),ce=a(50926),pe=a(18149),me=a(47817),ve=a(70900),we=a(89800),fe=a(84106),he=a(67236),ge=a(66611),ke=a(28423),be=a(32074),_e=a(90136),We=a(8225),ye=a(46017),xe=a(21992),Ie=a(8289),qe=a(68989),He=a(62146),Se=a(69984),Ce=a.n(Se);const Te=(0,X.Z)(Y,[["render",P]]),Ze=Te;Ce()(Y,"components",{QPage:$.Z,QPageSticky:ee.Z,QBtn:te.Z,QIcon:ae.Z,QCard:le.Z,QCardSection:ne.Z,QItem:se.Z,QItemSection:oe.Z,QAvatar:ie.Z,QItemLabel:re.Z,QChip:ue.Z,QCardActions:de.Z,QSeparator:ce.Z,QField:pe.Z,QTabs:me.Z,QTab:ve.Z,QTabPanels:we.Z,QTabPanel:fe.Z,QBtnGroup:he.Z,QInput:ge.Z,QSlider:ke.Z,QDialog:be.Z,QSpace:_e.Z,QStepper:We.Z,QStep:ye.Z,QStepperNavigation:xe.Z,QLinearProgress:Ie.Z,QTable:qe.Z}),Ce()(Y,"directives",{ClosePopup:He.Z})}}]);