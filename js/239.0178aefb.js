"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[239],{10093:(e,t,l)=>{l.r(t),l.d(t,{default:()=>L});var a=l(59835),n=l(86970);const o=e=>((0,a.dD)("data-v-a4403c7c"),e=e(),(0,a.Cn)(),e),s={class:"q-pa-md",style:{"max-width":"1439px"}},r=o((()=>(0,a._)("div",{class:"text-h5",style:{"text-shadow":"#000 1px 0 10px"}}," Auction House Sample ",-1))),i=o((()=>(0,a._)("div",{class:"text-h6",style:{"text-shadow":"#000 1px 0 10px"}}," Under construction ",-1))),c={class:"my-table-details",style:{"padding-left":"0px"}},d={class:"inline",style:{width:"55px"}},u={class:"inline"},p={class:"my-table-details text-left"},w={class:"text-bold"},m={class:"my-table-details"},f={class:"my-table-details text-left"},h={class:"my-table-details text-left"},v=o((()=>(0,a._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1))),y=o((()=>(0,a._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1)));function g(e,t,l,o,g,b){const _=(0,a.up)("q-th"),x=(0,a.up)("q-tr"),k=(0,a.up)("CrystalGem"),q=(0,a.up)("q-td"),W=(0,a.up)("q-table"),Z=(0,a.up)("q-card"),C=(0,a.up)("q-tab-panel"),I=(0,a.up)("q-tab-panels"),Q=(0,a.up)("nft-menu"),N=(0,a.up)("q-avatar"),P=(0,a.up)("q-space"),S=(0,a.up)("q-btn"),z=(0,a.up)("q-card-section"),A=(0,a.up)("q-card-actions"),G=(0,a.up)("q-dialog"),M=(0,a.up)("q-page"),$=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(M,{class:"row items-center justify-evenly bg-pic",style:{"padding-top":"58px"}},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(I,{class:"bg-none",flat:"","model-value":"auction",animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{name:"auction"},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"bg-glass"},{default:(0,a.w5)((()=>[r,i,(0,a.Wm)(W,{dense:e.$q.screen.lt.sm,"virtual-scroll":"","rows-per-page-options":[25],class:"my-sticky-header-table bg-none",rows:e.sellingGems,columns:e.gemColumns,"row-key":"auctionId",style:{"text-shadow":"#000 1px 0 10px"}},{header:(0,a.w5)((t=>[(0,a.Wm)(x,{props:t},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.cols,(l=>((0,a.wg)(),(0,a.j4)(_,{key:l.name,props:t,class:"text-primary text-justify"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(""==l.label?"":e.$t("gems."+l.label)),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),"body-cell-nft":(0,a.w5)((t=>[(0,a.Wm)(q,{props:t},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a._)("div",d,[(0,a.Wm)(k,{nft:t.row.nft,level:t.row.level,color:t.row.color,quality:t.row.quality,scale:t.row.scale,size:50,detail:!0,sell:!0},null,8,["nft","level","color","quality","scale"])]),(0,a._)("div",u,(0,n.zw)(e.$t("gems.levels."+t.row.level.toString())+e.$t("gems.names."+t.row.color.toString())),1)])])),_:2},1032,["props"])])),"body-cell-price":(0,a.w5)((t=>[(0,a.Wm)(q,{props:t},{default:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a._)("div",w," $"+(0,n.zw)(e.$n(t.row.price.startingPrice)),1),(0,a._)("div",null,"$"+(0,n.zw)(e.$n(t.row.price.buyOutPrice)),1)])])),_:2},1032,["props"])])),"body-cell-scale":(0,a.w5)((e=>[(0,a.Wm)(q,{props:e},{default:(0,a.w5)((()=>[(0,a._)("div",m,(0,n.zw)(parseInt(100*e.row.scale)),1)])),_:2},1032,["props"])])),"body-cell-quality":(0,a.w5)((e=>[(0,a.Wm)(q,{props:e},{default:(0,a.w5)((()=>[(0,a._)("div",f,(0,n.zw)(e.row.quality),1)])),_:2},1032,["props"])])),"body-cell-level":(0,a.w5)((e=>[(0,a.Wm)(q,{props:e},{default:(0,a.w5)((()=>[(0,a._)("div",h,(0,n.zw)(parseInt(4*e.row.level+10)),1)])),_:2},1032,["props"])])),_:1},8,["dense","rows","columns"])])),_:1})])),_:1})])),_:1})]),(0,a.Wm)(Q),(0,a.Wm)(G,{modelValue:e.switchNet,"onUpdate:modelValue":t[1]||(t[1]=t=>e.switchNet=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"bg-glass"},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{class:"row items-center q-pb-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),v,(0,a.Wm)(P),(0,a.wy)((0,a.Wm)(S,{icon:"close",flat:"",round:"",dense:""},null,512),[[$]])])),_:1}),(0,a.Wm)(z,{class:"row items-center"},{default:(0,a.w5)((()=>[y])),_:1}),(0,a.Wm)(A,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(S,{class:"full-width",label:"Switch",color:"primary",onClick:t[0]||(t[0]=t=>e.switchNetwork(e.netIndex))},null,512),[[$]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var b=l(60499),_=l(19302),x=l(65457),k=l(44320),q=l(10875),W=l(85990),Z=l(17779),C=function(e,t,l,a){function n(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,o){function s(e){try{i(a.next(e))}catch(t){o(t)}}function r(e){try{i(a["throw"](e))}catch(t){o(t)}}function i(e){e.done?l(e.value):n(e.value).then(s,r)}i((a=a.apply(e,t||[])).next())}))};const I=[{name:"nft",label:"itemName",field:"auctionId",align:"left",sortable:!0},{name:"price",label:"price",field:"price",align:"left",sortable:!0,sort:(e,t)=>parseInt(e.startingPrice,10)-parseInt(t.startingPrice,10)},{name:"quality",label:"quality",field:"quality",align:"left",sortable:!0},{name:"level",label:"level",field:"level",align:"left",sortable:!0}];function Q(e){Z.log("Switch network: ",(0,W.v)().networks[e].name,(0,W.v)().networks[e].id),(0,W.v)().initWeb3(e)}const N={title:"Crystal - Auction"},P=(0,a.aZ)({name:"AuctionPage",components:{NftMenu:k.Z,CrystalGem:q.Z},setup(){const e=(0,_.Z)();e.dark.set(!0),(0,x.Z)(N);const t=(0,b.iH)([]),l=(0,b.iH)(!1),a=(0,b.iH)(0),n=(0,b.iH)("0xf18a1FEf4823Ce5ddb20B71D82FA06470DF84B17");function o(){return C(this,void 0,void 0,(function*(){const e=yield(0,W.v)().web3.eth.net.getId().then((e=>(Z.log(e),e))).catch((e=>(Z.log("checkNetwork: ",e),-1)));return e}))}function s(e){return C(this,void 0,void 0,(function*(){const t=(0,W.v)().networks[e].id,l=(0,W.v)().networks[e].name,a=(0,W.v)().networks[e].tokenName,n=(0,W.v)().networks[e].symbol,o=(0,W.v)().networks[e].rpcUrl,s=(0,W.v)().networks[e].explorer,r="0x"+t.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]}),location.reload()}catch(i){if(Z.log(i),4902===i.code){Z.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:r,chainName:l,nativeCurrency:{name:a,symbol:n,decimals:18},rpcUrls:[o],blockExplorerUrls:[s]}]}),location.reload()}catch(c){alert(c.message)}}else alert(i.message)}}))}function r(){return C(this,void 0,void 0,(function*(){for(let e=0;e<96;e++){let l=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),a=Math.floor(1e3*Math.random())/1e3;const n={nft:0,level:l%16,color:l%6,quality:l%100+1,scale:l%74/100+.24,properties:"0xffffffffff",auctionId:333+e,price:{startingPrice:a*Math.pow(2,l%16+1),buyOutPrice:a*Math.pow(2,l%16+1)*(l%50+1)}};t.value.push(n)}}))}return{gemColumns:I,sellingGems:t,netIndex:a,auctionContract:n,switchNet:l,checkNetwork:o,switchNetwork:s,getSellingGems:r,initGame(){return C(this,void 0,void 0,(function*(){let e=new URLSearchParams(window.location.search),t=e.get("ref");Z.log(t||"No Ref");const n=a.value;Q(n);const s=yield o();if(s!=(0,W.v)().networks[n].id)return Z.log(s,"!=",(0,W.v)().networks[n].id),void(l.value=!0)}))}}},beforeMount(){this.initGame(),this.getSellingGems()}});var S=l(11639),z=l(69885),A=l(89800),G=l(84106),M=l(44458),$=l(8858),E=l(31233),T=l(21682),U=l(67220),H=l(32074),D=l(63190),j=l(61357),F=l(90136),B=l(68879),R=l(11821),V=l(62146),O=l(69984),Y=l.n(O);const K=(0,S.Z)(P,[["render",g],["__scopeId","data-v-a4403c7c"]]),L=K;Y()(P,"components",{QPage:z.Z,QTabPanels:A.Z,QTabPanel:G.Z,QCard:M.Z,QTable:$.Z,QTr:E.Z,QTh:T.Z,QTd:U.Z,QDialog:H.Z,QCardSection:D.Z,QAvatar:j.Z,QSpace:F.Z,QBtn:B.Z,QCardActions:R.Z}),Y()(P,"directives",{ClosePopup:V.Z})}}]);