"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[288],{44285:(e,t,l)=>{l.r(t),l.d(t,{default:()=>J});var a=l(59835),o=l(86970);const n=e=>((0,a.dD)("data-v-236f16aa"),e=e(),(0,a.Cn)(),e),s={class:"q-pa-md",style:{"max-width":"1439px"}},i={style:{position:"absolute",top:"5px",right:"5px","z-index":"1"}},r={key:0,class:"row content-start min-width-320 gem-box"},c=["onClick"],d={class:"my-table-details",style:{"padding-left":"0px"}},u=["onClick"],m={class:"inline"},p={class:"my-table-details"},w={class:"my-table-details"},f=n((()=>(0,a._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1))),h=n((()=>(0,a._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1)));function g(e,t,l,n,g,v){const y=(0,a.up)("q-icon"),b=(0,a.up)("q-btn-toggle"),k=(0,a.up)("q-btn"),_=(0,a.up)("CrystalGem"),q=(0,a.up)("q-th"),x=(0,a.up)("q-tr"),W=(0,a.up)("q-td"),C=(0,a.up)("q-table"),Z=(0,a.up)("q-card"),S=(0,a.up)("q-tab-panel"),Q=(0,a.up)("q-tab-panels"),N=(0,a.up)("nft-menu"),I=(0,a.up)("q-avatar"),G=(0,a.up)("q-space"),M=(0,a.up)("q-card-section"),z=(0,a.up)("q-card-actions"),T=(0,a.up)("q-dialog"),H=(0,a.up)("q-page"),P=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(H,{class:"row items-center justify-evenly bg-pic",style:{"padding-top":"58px"}},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(Q,{class:"bg-none",flat:"","model-value":"collection",animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{name:"collection",class:"q-pa-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"bg-glass"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(b,{modelValue:e.isStashGrid,"onUpdate:modelValue":t[0]||(t[0]=t=>e.isStashGrid=t),flat:"",dense:"","toggle-color":"white",color:"grey",options:[{value:!0,slot:"one"},{value:!1,slot:"two"}]},{one:(0,a.w5)((()=>[(0,a.Wm)(y,{right:"",name:"view_module"})])),two:(0,a.w5)((()=>[(0,a.Wm)(y,{right:"",name:"view_list"})])),_:1},8,["modelValue"])]),(0,a._)("div",i,[(0,a.Wm)(k,{"no-caps":"",unelevated:"",label:"Gem samples",onClick:t[1]||(t[1]=t=>e.test())})]),e.isStashGrid?((0,a.wg)(),(0,a.iD)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sample,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"gem-in-box",key:t,onClick:l=>e.gemSelected(t.nft)},[(0,a.Wm)(_,{nft:t.nft,level:t.level,color:t.color,quality:t.quality,scale:t.scale,size:50,detail:!0},null,8,["nft","level","color","quality","scale"])],8,c)))),128))])):((0,a.wg)(),(0,a.j4)(C,{key:1,dense:e.$q.screen.lt.sm,"virtual-scroll":"","rows-per-page-options":[25],class:"my-sticky-header-table bg-none",rows:e.sample,columns:e.gemColumns,"row-key":"nft",style:{"text-shadow":"#000 1px 0 10px"}},{header:(0,a.w5)((t=>[(0,a.Wm)(x,{props:t},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.cols,(l=>((0,a.wg)(),(0,a.j4)(q,{key:l.name,props:t,class:"text-primary text-justify"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(""==l.label?"":e.$t("gems."+l.label)),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),"body-cell-nft":(0,a.w5)((t=>[(0,a.Wm)(W,{props:t},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",{class:"inline",style:{width:"55px"},onClick:l=>e.gemSelected(t.row.nft)},[(0,a.Wm)(_,{nft:t.row.nft,level:t.row.level,color:t.row.color,quality:t.row.quality,scale:t.row.scale,size:50,detail:!0,showName:!0},null,8,["nft","level","color","quality","scale"])],8,u),(0,a._)("div",m,(0,o.zw)(e.$t("gems.levels."+t.row.level.toString())+e.$t("gems.names."+t.row.color.toString())),1)])])),_:2},1032,["props"])])),"body-cell-scale":(0,a.w5)((e=>[(0,a.Wm)(W,{props:e},{default:(0,a.w5)((()=>[(0,a._)("div",p,(0,o.zw)(parseInt(100*e.row.scale)),1)])),_:2},1032,["props"])])),"body-cell-level":(0,a.w5)((e=>[(0,a.Wm)(W,{props:e},{default:(0,a.w5)((()=>[(0,a._)("div",w,(0,o.zw)(parseInt(4*e.row.level+10)),1)])),_:2},1032,["props"])])),_:1},8,["dense","rows","columns"]))])),_:1})])),_:1})])),_:1})]),(0,a.Wm)(N),(0,a.Wm)(T,{modelValue:e.switchNet,"onUpdate:modelValue":t[3]||(t[3]=t=>e.switchNet=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"bg-glass"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{class:"row items-center q-pb-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),f,(0,a.Wm)(G),(0,a.wy)((0,a.Wm)(k,{icon:"close",flat:"",round:"",dense:""},null,512),[[P]])])),_:1}),(0,a.Wm)(M,{class:"row items-center"},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(z,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(k,{class:"full-width",label:"Switch",color:"primary",onClick:t[2]||(t[2]=t=>e.switchNetwork(e.netIndex))},null,512),[[P]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var v=l(60499),y=l(19302),b=l(65457),k=l(88325),_=l(43620),q=l(85990),x=l(17779),W=function(e,t,l,a){function o(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,n){function s(e){try{r(a.next(e))}catch(t){n(t)}}function i(e){try{r(a["throw"](e))}catch(t){n(t)}}function r(e){e.done?l(e.value):o(e.value).then(s,i)}r((a=a.apply(e,t||[])).next())}))};function C(e){x.log("Switch network: ",(0,q.v)().networks[e].name,(0,q.v)().networks[e].id),(0,q.v)().initWeb3(e)}const Z={title:"Crystal - NFT"},S=[{name:"nft",label:"itemName",field:"nft",align:"left",sortable:!0},{name:"quality",label:"quality",field:"quality",align:"center",sortable:!0},{name:"scale",label:"weight",field:"scale",align:"center",sortable:!0},{name:"level",label:"level",field:"level",align:"center",sortable:!0}],Q=(0,a.aZ)({name:"NftListPage",components:{CrystalGem:k.Z,NftMenu:_.Z},setup(){const e=(0,y.Z)();e.dark.set(!0),(0,b.Z)(Z);const t=(0,v.iH)(!1),l=(0,v.iH)(1),a=(0,v.iH)("0xE142A2741E6b55329185E4490F148b97d35c98B9"),o=(0,v.iH)([{}]);let n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function s(){return W(this,void 0,void 0,(function*(){const e=yield(0,q.v)().web3.eth.net.getId().then((e=>(x.log(e),e))).catch((e=>(x.log("checkNetwork: ",e),-1)));return e}))}function i(e){return W(this,void 0,void 0,(function*(){const t=(0,q.v)().networks[e].id,l=(0,q.v)().networks[e].name,a=(0,q.v)().networks[e].tokenName,o=(0,q.v)().networks[e].symbol,n=(0,q.v)().networks[e].rpcUrl,s=(0,q.v)().networks[e].explorer,i="0x"+t.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:i}]}),location.reload()}catch(r){if(x.log(r),4902===r.code){x.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:i,chainName:l,nativeCurrency:{name:a,symbol:o,decimals:18},rpcUrls:[n],blockExplorerUrls:[s]}]}),location.reload()}catch(c){alert(c.message)}}else alert(r.message)}}))}function r(){o.value=[];for(let e=0;e<96;e++){const t={nft:e,level:e%16,color:Math.floor(e/16),quality:Math.floor(32*Math.random())+1,scale:.64};o.value.push(t)}}function c(){let e=0;for(let l=0;l<65536;l++){const t=Math.floor(Math.random()*Math.pow(2,16));let l=0;for(let a=0;a<16;a++){const o=t%Math.pow(2,a+1);if(0!==o&&t>0){l=a,e++;break}}n[l]++}x.log("gems:",n);let t=0;for(let l=0;l<n.length;l++){const e=n[l];t+=e}x.log(e,t)}return{isStashGrid:(0,v.iH)(!0),netIndex:l,switchNet:t,memberContract:a,sample:o,gemColumns:S,checkNetwork:s,switchNetwork:i,setSample:r,test:c,initGame(){return W(this,void 0,void 0,(function*(){let e=new URLSearchParams(window.location.search),a=e.get("ref");x.log(a||"No Ref");const o=l.value;C(o);const n=yield s();if(n!=(0,q.v)().networks[o].id)return x.log(n,"!=",(0,q.v)().networks[o].id),void(t.value=!0)}))},updateInputs(e){x.log("updateInputs: ",e)},gemSelected(e){x.log("Selected: ",e)}}},beforeMount(){this.initGame(),this.setSample()}});var N=l(11639),I=l(69885),G=l(89800),M=l(84106),z=l(44458),T=l(1389),H=l(22857),P=l(68879),U=l(8858),D=l(31233),E=l(21682),V=l(67220),j=l(32074),A=l(63190),$=l(61357),B=l(90136),Y=l(11821),F=l(62146),K=l(69984),L=l.n(K);const R=(0,N.Z)(Q,[["render",g],["__scopeId","data-v-236f16aa"]]),J=R;L()(Q,"components",{QPage:I.Z,QTabPanels:G.Z,QTabPanel:M.Z,QCard:z.Z,QBtnToggle:T.Z,QIcon:H.Z,QBtn:P.Z,QTable:U.Z,QTr:D.Z,QTh:E.Z,QTd:V.Z,QDialog:j.Z,QCardSection:A.Z,QAvatar:$.Z,QSpace:B.Z,QCardActions:Y.Z}),L()(Q,"directives",{ClosePopup:F.Z})}}]);