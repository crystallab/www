"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[198],{23253:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ea});var n=a(59835),l=a(86970);const i=e=>((0,n.dD)("data-v-5c249851"),e=e(),(0,n.Cn)(),e),s={class:"q-pa-md",style:{"max-width":"1439px"}},o={class:"row items-center"},r=i((()=>(0,n._)("div",{class:"text-shadow text-h6"},"Auction House - Beta",-1))),c=i((()=>(0,n._)("div",{class:"text-h6"},"Recent Auctions",-1))),u={class:"text-h6 row items-center justify-end"},d=i((()=>(0,n._)("div",{lines:"1",class:"text-primary q-gutter-xs"},"Buyer:",-1))),m={lines:"2",class:"text-primary q-gutter-xs"},f=["href"],p=i((()=>(0,n._)("div",{lines:"1",class:"text-primary q-gutter-xs"},"Seller:",-1))),v={lines:"2",class:"text-primary q-gutter-xs"},w=["href"],g={class:"my-table-details",style:{"padding-left":"0px"}},h=["onClick"],b={class:"my-table-details row"},y={class:"text-left inline"},k={style:{display:"flex","flex-wrap":"nowrap"}},x={style:{display:"flex","flex-wrap":"nowrap"}},_={class:"container",style:{"margin-right":"5px"}},A={class:"text-h7"},W=(0,n.Uk)(" Current Price "),C=i((()=>(0,n._)("div",{class:"text-bold"}," Auction is ending soon ",-1))),q={key:0},I={style:{display:"flex","flex-wrap":"nowrap"}},B={class:"container",style:{"margin-right":"5px"}},S={class:"text-h7 text-grey"},z=(0,n.Uk)(" Buy Out Price "),N={class:"my-table-details text-left text-h7"},U={class:"my-table-details text-left text-h7"},H={class:"my-table-details text-left text-h7"},D=i((()=>(0,n._)("div",{class:"text-h4 q-mb-md"},"Alarms",-1))),F=i((()=>(0,n._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),P=i((()=>(0,n._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),E=i((()=>(0,n._)("div",{class:"text-h4 q-mb-md"},"Movies",-1))),T=i((()=>(0,n._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),Z=i((()=>(0,n._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),Q=i((()=>(0,n._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),j={key:0,class:"text-h6"},V=["onClick"],G=i((()=>(0,n._)("span",{class:"text-grey-8"},"Your bid: ",-1))),O={class:"text-weight-medium q-pr-xs"},$=i((()=>(0,n._)("span",{class:"text-grey-8"},"Current: ",-1))),R={class:"q-pr-xs cursor-pointer"},L=(0,n.Uk)(" FulFill "),J={key:0},M={key:1},Y=(0,n.Uk)(" Register "),K={key:1,lines:"1"},X={key:2,lines:"2"},ee=(0,n.Uk)(" Upgrade "),te={key:0,class:"text-h6"},ae=["onClick"],ne={class:"q-pr-xs cursor-pointer"},le=i((()=>(0,n._)("div",{class:"text-bold"}," Has expired or is about to expire ",-1))),ie=i((()=>(0,n._)("span",{class:"text-grey-8"},"Bids:",-1))),se={class:"text-weight-medium q-pr-xs"},oe={lines:"1",class:"text-primary q-gutter-xs"},re=(0,n.Uk)(" Expired "),ce=(0,n.Uk)(" Share "),ue=(0,n.Uk)(" Link Copied "),de={lines:"2",class:"text-primary q-gutter-xs"},me=(0,n.Uk)(" FulFill "),fe=(0,n.Uk)(" Cancel "),pe={class:"text-shadow"},ve=i((()=>(0,n._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1))),we=i((()=>(0,n._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1))),ge={class:"gem-detail-box row items-center justify-evenly"},he={key:0,class:"gem-box-text"},be={class:"info text-shadow"},ye={class:"row"},ke={class:"gem-level q-pr-sm"},xe={class:"gem-scale q-pr-sm"},_e={class:"gem-quality q-pr-sm"},Ae={class:"gem-quality text-caption text-grey",style:{"max-width":"200px"}},We={key:0},Ce={key:0},qe={key:1},Ie=(0,n.Uk)(" Auction Closing Time "),Be=(0,n.Uk)(" Share "),Se=(0,n.Uk)(" Link Copied "),ze=["href"],Ne={key:0,class:"text-grey"},Ue=["href"],He={class:"self-center full-width no-outline text-h6",tabindex:"0"},De=i((()=>(0,n._)("div",{class:"text-h6"},"USDC",-1))),Fe={class:"self-center full-width no-outline text-h6",tabindex:"0"},Pe=i((()=>(0,n._)("div",{class:"text-h6"},"USDC",-1))),Ee={class:"self-center full-width no-outline text-h6",tabindex:"0"},Te=i((()=>(0,n._)("div",{class:"text-h6"},"USDC",-1))),Ze=i((()=>(0,n._)("br",null,null,-1))),Qe={class:"event-view row justify-between",style:{"align-items":"baseline",display:"flex","flex-wrap":"wrap-reverse"}},je={class:"row"},Ve={class:"USER q-pr-xs",style:{"margin-top":"0px"}},Ge=["href"],Oe=i((()=>(0,n._)("i",{class:"las la-user"},null,-1))),$e={class:"tx q-pr-xs",style:{"margin-top":"0px"}},Re=["href"],Le=i((()=>(0,n._)("i",{class:"las la-file-alt"},null,-1))),Je={class:(0,l.C_)(""),style:{display:"flex","align-items":"center"}},Me=i((()=>(0,n._)("div",{class:"event text-bold q-mr-sm"},[(0,n._)("a",null,(0,l.zw)("Bid:"))],-1))),Ye={class:"event text-h6"},Ke=["src"],Xe=i((()=>(0,n._)("span",{class:"text-h6 q-ml-sm"},"USDC Allowance",-1))),et={class:"q-ml-sm"};function tt(e,t,a,i,tt,at){const nt=(0,n.up)("q-btn"),lt=(0,n.up)("q-tab"),it=(0,n.up)("q-tabs"),st=(0,n.up)("q-separator"),ot=(0,n.up)("CrystalGem"),rt=(0,n.up)("q-item-section"),ct=(0,n.up)("q-icon"),ut=(0,n.up)("q-item-label"),dt=(0,n.up)("q-item"),mt=(0,n.up)("q-list"),ft=(0,n.up)("q-tab-panel"),pt=(0,n.up)("q-th"),vt=(0,n.up)("q-tr"),wt=(0,n.up)("q-td"),gt=(0,n.up)("q-tooltip"),ht=(0,n.up)("q-banner"),bt=(0,n.up)("q-popup-proxy"),yt=(0,n.up)("q-table"),kt=(0,n.up)("q-tab-panels"),xt=(0,n.up)("q-card"),_t=(0,n.up)("nft-menu"),At=(0,n.up)("q-avatar"),Wt=(0,n.up)("q-space"),Ct=(0,n.up)("q-card-section"),qt=(0,n.up)("q-card-actions"),It=(0,n.up)("q-dialog"),Bt=(0,n.up)("q-chip"),St=(0,n.up)("q-input"),zt=(0,n.up)("q-scroll-area"),Nt=(0,n.up)("BalanceView"),Ut=(0,n.up)("q-page"),Ht=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(Ut,{class:"row items-start justify-center bg-pic",style:{"padding-top":"68px"}},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n._)("div",o,[r,(0,n._)("div",null,[(0,n.Wm)(nt,{size:"12px",flat:"",dense:"","icon-right":"refresh","no-caps":"",onClick:t[0]||(t[0]=t=>e.reloadData())})])]),(0,n.Wm)(xt,{class:""},{default:(0,n.w5)((()=>[(0,n.Wm)(it,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:(0,n.w5)((()=>[(0,n.Wm)(lt,{name:"overview",label:"Overview"}),(0,n.Wm)(lt,{name:"browse",label:"Browse"}),(0,n.Wm)(lt,{name:"bids",label:"Bids"}),(0,n.Wm)(lt,{name:"auctions",label:"Auctions"})])),_:1},8,["modelValue"]),(0,n.Wm)(st),(0,n.Wm)(kt,{modelValue:e.tab,"onUpdate:modelValue":t[7]||(t[7]=t=>e.tab=t),animated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(ft,{name:"overview"},{default:(0,n.w5)((()=>[c,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.allFilled,(t=>((0,n.wg)(),(0,n.j4)(mt,{class:"q-pa-none",style:{"max-width":"600px"},key:t},{default:(0,n.w5)((()=>[(0,n.Wm)(st,{spaced:"0px",inset:""}),t.end?((0,n.wg)(),(0,n.j4)(dt,{key:0,class:"q-pl-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(rt,{avatar:""},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(ot,{nft:t.nft,level:t.level,color:t.color,quality:t.quality,scale:t.scale,size:50,names:!0,namesFixed:!0,detail:!0},null,8,["nft","level","color","quality","scale"])])])),_:2},1024),(0,n.Wm)(rt,{class:"q-pr-none text-right justify-end"},{default:(0,n.w5)((()=>[(0,n.Wm)(ut,null,{default:(0,n.w5)((()=>[(0,n._)("span",u,[(0,n.Uk)((0,l.zw)(e.$n(e.shortNumStr(t.price).short))+" "+(0,l.zw)(e.shortNumStr(t.price).unit)+" ",1),(0,n.Wm)(ct,{size:"sm",name:"img:tokens/USDC.png"})])])),_:2},1024)])),_:2},1024),(0,n.Wm)(rt,{side:""},{default:(0,n.w5)((()=>[d,(0,n._)("div",m,[(0,n._)("a",{href:e.linkAddress(t.bidder),target:"_blank",class:"text-primary"},[(0,n._)("span",null,(0,l.zw)(e.shortAddress(t.bidder,4,!0)),1)],8,f)])])),_:2},1024),(0,n.Wm)(rt,{side:""},{default:(0,n.w5)((()=>[p,(0,n._)("div",v,[(0,n._)("a",{href:e.linkAddress(t.owner),target:"_blank",class:"text-primary"},[(0,n._)("span",null,(0,l.zw)(e.shortAddress(t.owner,4,!0)),1)],8,w)])])),_:2},1024)])),_:2},1024)):(0,n.kq)("",!0)])),_:2},1024)))),128))])),_:1}),(0,n.Wm)(ft,{name:"browse",class:"q-pa-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(it,{"narrow-indicator":"",modelValue:e.browseTab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.browseTab=t),class:"text-teal"},{default:(0,n.w5)((()=>[(0,n.Wm)(lt,{name:"browseGems",icon:"mdi-diamond-stone"}),(0,n.Wm)(lt,{disable:"",name:"browseEquipment",icon:"mdi-sword"}),(0,n.Wm)(lt,{disable:"",name:"browseAvatars",icon:"mdi-account-box-multiple"})])),_:1},8,["modelValue"]),(0,n.Wm)(kt,{modelValue:e.browseTab,"onUpdate:modelValue":t[3]||(t[3]=t=>e.browseTab=t),animated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(ft,{name:"browseGems",class:"no-padding"},{default:(0,n.w5)((()=>[(0,n.Wm)(yt,{dense:"","row-key":"auctionId","rows-per-page-options":[25],rows:e.allAH,columns:e.gemColumns,class:"my-sticky-header-table bg-none text-shadow"},{header:(0,n.w5)((t=>[(0,n.Wm)(vt,{props:t},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.cols,(a=>((0,n.wg)(),(0,n.j4)(pt,{key:a.name,props:t,class:"text-primary text-justify"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(""==a.label?"":e.$t("gems."+a.label)),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),"body-cell-nft":(0,n.w5)((t=>[(0,n.Wm)(wt,{class:"top-border"},{default:(0,n.w5)((()=>[(0,n._)("div",g,[(0,n._)("div",{onClick:a=>e.bidClicked(t.row.auctionId)},[(0,n.Wm)(ot,{nft:t.row.nft,level:t.row.level,color:t.row.color,quality:t.row.quality,scale:t.row.scale,size:50,names:!0},null,8,["nft","level","color","quality","scale"])],8,h)])])),_:2},1024)])),"body-cell-price":(0,n.w5)((t=>[(0,n.Wm)(wt,{class:"top-border"},{default:(0,n.w5)((()=>[(0,n._)("div",b,[(0,n._)("div",y,[(0,n._)("div",k,[(0,n.Wm)(nt,{size:"xs",align:"left",dense:"",flat:"",onClick:a=>e.bidClicked(t.row.auctionId),style:{"padding-left":"0px"}},{default:(0,n.w5)((()=>[(0,n._)("div",x,[(0,n._)("div",_,[(0,n.Wm)(ct,{size:"xs",name:"img:tokens/USDC.png"})]),(0,n._)("div",A,(0,l.zw)(e.$n(e.shortNumStr(t.row.price).short))+" "+(0,l.zw)(e.shortNumStr(t.row.price).unit),1)]),(0,n.Wm)(gt,{anchor:"center start",self:"center end"},{default:(0,n.w5)((()=>[(0,n.Wm)(ct,{name:"mdi-gavel"}),W])),_:1})])),_:2},1032,["onClick"]),t.row.endBlock-e.currentBlock<1600?((0,n.wg)(),(0,n.j4)(nt,{key:0,flat:"",dense:"",class:"no-padding",style:{width:"18px","margin-right":"5px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(ct,{size:"xs",name:"las la-stopwatch"}),(0,n.Wm)(bt,{anchor:"center start",self:"center end"},{default:(0,n.w5)((()=>[(0,n.Wm)(ht,null,{avatar:(0,n.w5)((()=>[(0,n.Wm)(ct,{size:"md",name:"las la-stopwatch",color:"primary"})])),default:(0,n.w5)((()=>[C])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0)]),t.row.buyoutPrice/t.row.price<1e4?((0,n.wg)(),(0,n.iD)("div",q,[(0,n.Wm)(nt,{align:"left",size:"xs",flat:"",dense:"",onClick:a=>e.bidClicked(t.row.auctionId),style:{"padding-left":"0px"}},{default:(0,n.w5)((()=>[(0,n._)("div",I,[(0,n._)("div",B,[(0,n.Wm)(ct,{size:"xs",name:"img:tokens/USDC.png"})]),(0,n._)("div",S,(0,l.zw)(e.$n(e.shortNumStr(t.row.buyoutPrice).short))+" "+(0,l.zw)(e.shortNumStr(t.row.buyoutPrice).unit),1)]),(0,n.Wm)(gt,{anchor:"center start",self:"center end"},{default:(0,n.w5)((()=>[(0,n.Wm)(ct,{name:"mdi-gavel"}),z])),_:1})])),_:2},1032,["onClick"])])):(0,n.kq)("",!0)])])])),_:2},1024)])),"body-cell-level":(0,n.w5)((e=>[(0,n.Wm)(wt,{class:"top-border"},{default:(0,n.w5)((()=>[(0,n._)("div",N,(0,l.zw)(parseInt(4*e.row.level+10)),1)])),_:2},1024)])),"body-cell-scale":(0,n.w5)((e=>[(0,n.Wm)(wt,{class:"top-border"},{default:(0,n.w5)((()=>[(0,n._)("div",U,(0,l.zw)(parseInt(100*e.row.scale)),1)])),_:2},1024)])),"body-cell-quality":(0,n.w5)((e=>[(0,n.Wm)(wt,{class:"top-border"},{default:(0,n.w5)((()=>[(0,n._)("div",H,(0,l.zw)(e.row.quality),1)])),_:2},1024)])),_:1},8,["rows","columns"])])),_:1}),(0,n.Wm)(ft,{name:"browseEquipment"},{default:(0,n.w5)((()=>[D,F,P])),_:1}),(0,n.Wm)(ft,{name:"browseAvatars"},{default:(0,n.w5)((()=>[E,T,Z,Q])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(ft,{name:"bids",class:"min-width-320"},{default:(0,n.w5)((()=>[void 0==e.userBidsArray[0]?((0,n.wg)(),(0,n.iD)("div",j," No Active Bids ")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.userBidsArray,(t=>((0,n.wg)(),(0,n.j4)(mt,{key:t,class:"q-pa-none",style:{"max-width":"600px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(st,{spaced:"0px",inset:""}),(0,n.Wm)(dt,{class:"q-pl-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(rt,{avatar:""},{default:(0,n.w5)((()=>[(0,n._)("div",{onClick:a=>e.bidClicked(t.auctionId,!0)},[(0,n.Wm)(ot,{nft:e.allAuctions[t.auctionId].nft,level:e.allAuctions[t.auctionId].level,color:e.allAuctions[t.auctionId].color,quality:e.allAuctions[t.auctionId].quality,scale:e.allAuctions[t.auctionId].scale,size:50,names:!0,namesFixed:!0},null,8,["nft","level","color","quality","scale"])],8,V)])),_:2},1024),(0,n.Wm)(rt,{class:"q-pr-none text-right justify-end"},{default:(0,n.w5)((()=>[(0,n.Wm)(ut,{caption:"",lines:"1"},{default:(0,n.w5)((()=>[G,(0,n._)("span",O,(0,l.zw)(e.$n(e.shortNumStr(t.price).short))+" "+(0,l.zw)(e.shortNumStr(t.price).unit),1),(0,n.Wm)(ct,{size:"xs",name:"img:tokens/USDC.png"})])),_:2},1024),(0,n.Wm)(ut,{class:"row items-center",caption:"",lines:"2"},{default:(0,n.w5)((()=>[e.allAuctions[t.auctionId].endBlock-e.currentBlock<1600?((0,n.wg)(),(0,n.j4)(ct,{key:0,size:"xs",name:"las la-stopwatch"})):(0,n.kq)("",!0),$,(0,n._)("span",R,(0,l.zw)(e.$n(e.shortNumStr(e.allAuctions[t.auctionId].price).short))+" "+(0,l.zw)(e.shortNumStr(e.allAuctions[t.auctionId].price).unit),1),(0,n.Wm)(ct,{size:"xs",name:"img:tokens/USDC.png"})])),_:2},1024),e.allAuctions[t.auctionId].endBlock<e.currentBlock&&!e.allAuctions[t.auctionId].end&&e.allAuctions[t.auctionId].bidder.toUpperCase()==e.userAccount.toUpperCase()?((0,n.wg)(),(0,n.j4)(ut,{key:0,lines:"3"},{default:(0,n.w5)((()=>[(0,n.Wm)(nt,{class:"full-width",size:"12px",color:"primary",glossy:"",dense:"","icon-right":"las la-coins","no-caps":"",onClick:a=>e.fulfillAuctionTx(t.auctionId)},{default:(0,n.w5)((()=>[L])),_:2},1032,["onClick"])])),_:2},1024)):(0,n.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,n.Wm)(ft,{name:"auctions",class:"min-width-320 q-pa-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(dt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(rt,{avatar:"",class:"text-h6"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.userListing.length)+"/"+(0,l.zw)(e.userListSpace),1)])),_:1}),(0,n.Wm)(rt,{class:"q-pr-none text-right justify-end"},{default:(0,n.w5)((()=>[0==parseInt(e.memberInfo.name)?((0,n.wg)(),(0,n.iD)("div",J," Register to get more listing space ")):((0,n.wg)(),(0,n.iD)("div",M,"Upgrade to get more listing space"))])),_:1}),(0,n.Wm)(rt,{side:""},{default:(0,n.w5)((()=>[0==parseInt(e.memberInfo.name)?((0,n.wg)(),(0,n.j4)(nt,{key:0,color:"primary",size:"12px",icon:"las la-user","no-caps":"",onClick:t[4]||(t[4]=t=>e.registerClick())},{default:(0,n.w5)((()=>[Y])),_:1})):(0,n.kq)("",!0),parseInt(e.memberInfo.name)>0?((0,n.wg)(),(0,n.iD)("div",K,[(0,n.Wm)(nt,{class:"full-width",color:"primary",flat:"",size:"12px",icon:"las la-gem","no-caps":"",dense:"",onClick:t[5]||(t[5]=t=>e.upgradeClick())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.$n(e.shortNumStr(e.upgradeFee).short))+" "+(0,l.zw)(e.shortNumStr(e.upgradeFee).unit),1)])),_:1})])):(0,n.kq)("",!0),parseInt(e.memberInfo.name)>0?((0,n.wg)(),(0,n.iD)("div",X,[(0,n.Wm)(nt,{class:"full-width",color:"primary",size:"12px","no-caps":"",onClick:t[6]||(t[6]=t=>e.upgradeClick())},{default:(0,n.w5)((()=>[ee])),_:1})])):(0,n.kq)("",!0)])),_:1})])),_:1}),void 0==e.userListing[0]?((0,n.wg)(),(0,n.iD)("div",te," No Auctions ")):((0,n.wg)(!0),(0,n.iD)(n.HY,{key:1},(0,n.Ko)(e.userListing,(t=>((0,n.wg)(),(0,n.j4)(mt,{class:"q-pa-none",style:{"max-width":"600px"},key:t},{default:(0,n.w5)((()=>[(0,n.Wm)(st,{spaced:"0px",inset:""}),e.userAuctions[t]?((0,n.wg)(),(0,n.j4)(dt,{key:0,class:"q-pl-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(rt,{avatar:""},{default:(0,n.w5)((()=>[(0,n._)("div",{onClick:a=>e.bidClicked(t,!0)},[(0,n.Wm)(ot,{nft:e.userAuctions[t].nft,level:e.userAuctions[t].level,color:e.userAuctions[t].color,quality:e.userAuctions[t].quality,scale:e.userAuctions[t].scale,size:50,names:!0,namesFixed:!0},null,8,["nft","level","color","quality","scale"])],8,ae)])),_:2},1024),(0,n.Wm)(rt,{class:"q-pr-none text-right justify-end"},{default:(0,n.w5)((()=>[(0,n.Wm)(ut,{lines:"1"},{default:(0,n.w5)((()=>[(0,n._)("span",ne,(0,l.zw)(e.$n(e.shortNumStr(e.userAuctions[t].price).short))+" "+(0,l.zw)(e.shortNumStr(e.userAuctions[t].price).unit),1),(0,n.Wm)(ct,{size:"xs",name:"img:tokens/USDC.png"}),e.userAuctions[t].endBlock-e.currentBlock<1600?((0,n.wg)(),(0,n.j4)(nt,{key:0,flat:"",dense:"",class:"no-padding",style:{width:"18px","margin-right":"5px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(ct,{size:"xs",name:"las la-stopwatch"}),(0,n.Wm)(bt,{anchor:"center start",self:"center end"},{default:(0,n.w5)((()=>[(0,n.Wm)(ht,null,{avatar:(0,n.w5)((()=>[(0,n.Wm)(ct,{size:"md",name:"las la-stopwatch",color:"primary"})])),default:(0,n.w5)((()=>[le])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:2},1024),(0,n.Wm)(ut,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[ie,(0,n._)("span",se,(0,l.zw)(e.userAuctions[t].bids),1),(0,n.Wm)(ct,{size:"xs",name:"las la-gavel"})])),_:2},1024)])),_:2},1024),(0,n.Wm)(rt,{side:""},{default:(0,n.w5)((()=>[(0,n._)("div",oe,[e.userAuctions[t].endBlock<e.currentBlock&&0==e.userAuctions[t].bids?((0,n.wg)(),(0,n.j4)(nt,{key:0,size:"12px",flat:"",dense:"","icon-right":"las la-stopwatch","no-caps":"",onClick:a=>e.cancelAuctionTx(t)},{default:(0,n.w5)((()=>[re])),_:2},1032,["onClick"])):((0,n.wg)(),(0,n.j4)(nt,{key:1,size:"12px",flat:"",dense:"","icon-right":"share","no-caps":"",onClick:a=>e.copyAddress("https://Crystal.Network/auction?id="+(t||"1"))},{default:(0,n.w5)((()=>[ce,(0,n.Wm)(bt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(ht,null,{avatar:(0,n.w5)((()=>[(0,n.Wm)(ct,{name:"check",color:"primary"})])),default:(0,n.w5)((()=>[ue])),_:1})])),_:1})])),_:2},1032,["onClick"]))]),(0,n._)("div",de,[e.userAuctions[t].endBlock<e.currentBlock&&!e.userAuctions[t].end&&e.userAuctions[t].bids>0?((0,n.wg)(),(0,n.j4)(nt,{key:0,size:"12px",color:"primary",glossy:"",dense:"","icon-right":"las la-coins","no-caps":"",onClick:a=>e.fulfillAuctionTx(t)},{default:(0,n.w5)((()=>[me])),_:2},1032,["onClick"])):(0,n.kq)("",!0),0==e.userAuctions[t].bids?((0,n.wg)(),(0,n.j4)(nt,{key:1,size:"12px",flat:"",dense:"","icon-right":"delete","no-caps":"",onClick:a=>e.cancelAuctionTx(t)},{default:(0,n.w5)((()=>[fe])),_:2},1032,["onClick"])):(0,n.kq)("",!0)])])),_:2},1024)])),_:2},1024)):(0,n.kq)("",!0)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,n._)("a",pe," Block Number: "+(0,l.zw)(e.currentBlock),1)]),(0,n.Wm)(_t),(0,n.Wm)(It,{modelValue:e.switchNet,"onUpdate:modelValue":t[9]||(t[9]=t=>e.switchNet=t),persistent:""},{default:(0,n.w5)((()=>[(0,n.Wm)(xt,{class:"bg-glass"},{default:(0,n.w5)((()=>[(0,n.Wm)(Ct,{class:"row items-center q-pb-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(At,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),ve,(0,n.Wm)(Wt),(0,n.wy)((0,n.Wm)(nt,{icon:"close",flat:"",round:"",dense:""},null,512),[[Ht]])])),_:1}),(0,n.Wm)(Ct,{class:"row items-center"},{default:(0,n.w5)((()=>[we])),_:1}),(0,n.Wm)(qt,{align:"right"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(nt,{class:"full-width",label:"Switch",color:"primary",onClick:t[8]||(t[8]=t=>e.switchNetwork(e.netIndex))},null,512),[[Ht]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(It,{modelValue:e.bidGemDetail,"onUpdate:modelValue":t[16]||(t[16]=t=>e.bidGemDetail=t)},{default:(0,n.w5)((()=>[(0,n.Wm)(xt,{dark:"",class:"bg-glass min-width-320"},{default:(0,n.w5)((()=>[(0,n.Wm)(Ct,{class:"q-pb-none row"},{default:(0,n.w5)((()=>[(0,n._)("div",ge,[(0,n.Wm)(ot,{nft:e.currentAuction.nft,level:e.currentAuction.level,color:e.currentAuction.color,quality:e.currentAuction.quality,scale:e.currentAuction.scale,size:50},null,8,["nft","level","color","quality","scale"]),e.currentAuction.nft>0?((0,n.wg)(),(0,n.iD)("div",he," # "+(0,l.zw)(e.currentAuction.nft),1)):(0,n.kq)("",!0)]),(0,n._)("div",be,[(0,n._)("div",{class:(0,l.C_)(e.getRarity(e.currentAuction.level).rarity+" text-h6")},(0,l.zw)(e.$t("gems.levels."+e.currentAuction.level)+e.$t("gems.names."+e.currentAuction.color)),3),(0,n._)("div",{class:(0,l.C_)(e.getRarity(e.currentAuction.level).rarity)},[(0,n.Uk)((0,l.zw)(e.$t("gems."+e.getRarity(e.currentAuction.level).rarity)+" "+e.$t("gems.gem"))+" ",1),(0,n.Wm)(Bt,{dense:""},{default:(0,n.w5)((()=>[(0,n._)("a",{class:(0,l.C_)(e.getRarity(e.currentAuction.level).rarity)},(0,l.zw)(e.getRarity(e.currentAuction.level).short),3)])),_:1})],2),(0,n._)("div",ye,[(0,n._)("div",ke,(0,l.zw)(e.$t("gems.level")+":")+" "+(0,l.zw)(4*parseInt(e.currentAuction.level)+10),1),(0,n._)("div",xe,(0,l.zw)(e.$t("gems.weight")+":")+" "+(0,l.zw)(parseInt(100*e.currentAuction.scale)),1),(0,n._)("div",_e,(0,l.zw)(e.$t("gems.quality")+":")+" "+(0,l.zw)(e.currentAuction.quality),1)]),(0,n._)("div",Ae,(0,l.zw)(e.$t("gems.qualityInfo")),1)])])),_:1}),(0,n.Wm)(Ct,{class:"q-py-none row justify-end"},{default:(0,n.w5)((()=>[e.currentAuction.endBlock>e.currentBlock?((0,n.wg)(),(0,n.iD)("div",We,[(0,n.Wm)(nt,{size:"12px",flat:"",dense:"","icon-right":"las la-clock","no-caps":"",onClick:t[10]||(t[10]=t=>e.getBlockNum())},{default:(0,n.w5)((()=>[e.currentAuction.endBlock>e.currentBlock+1600?((0,n.wg)(),(0,n.iD)("div",Ce," End in "+(0,l.zw)(parseInt(2.25*(e.currentAuction.endBlock-e.currentBlock)/3600))+" Hours ",1)):((0,n.wg)(),(0,n.iD)("div",qe,"End Soon")),(0,n.Wm)(bt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(ht,null,{avatar:(0,n.w5)((()=>[(0,n.Wm)(ct,{name:"las la-clock",color:"primary"})])),default:(0,n.w5)((()=>[Ie])),_:1})])),_:1})])),_:1})])):(0,n.kq)("",!0),(0,n.Wm)(nt,{size:"12px",flat:"",dense:"","icon-right":"share","no-caps":"",onClick:t[11]||(t[11]=t=>e.copyAddress("https://Crystal.Network/auction?id="+(e.currentAuction.auctionId||"1")))},{default:(0,n.w5)((()=>[Be,(0,n.Wm)(bt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(ht,null,{avatar:(0,n.w5)((()=>[(0,n.Wm)(ct,{name:"check",color:"primary"})])),default:(0,n.w5)((()=>[Se])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Ct,{class:"row q-py-none justify-between"},{default:(0,n.w5)((()=>[(0,n._)("a",{href:e.linkAddress(e.currentAuction.owner),target:"_blank",class:"text-grey-6"},[(0,n.Uk)(" #AH"+(0,l.zw)(e.currentAuction.auctionId)+" "+(0,l.zw)(e.$t("auction.owner")+":")+" ",1),(0,n._)("span",null,(0,l.zw)(e.shortAddress(e.currentAuction.owner,6,!0)),1)],8,ze),"0x0000000000000000000000000000000000000000"!=e.currentAuction.bidder?((0,n.wg)(),(0,n.iD)("div",Ne,[(0,n._)("a",{href:e.linkAddress(e.currentAuction.bidder),target:"_blank",class:"text-grey-6"},[(0,n.Uk)((0,l.zw)(e.$t("auction.highestBidder")+":")+" ",1),(0,n._)("span",null,(0,l.zw)(e.shortAddress(e.currentAuction.bidder,6,!0)),1)],8,Ue)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(Ct,{class:"q-py-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(St,{filled:"",dense:"",readonly:"",color:"purple-12","input-class":"text-right"},{prepend:(0,n.w5)((()=>[(0,n._)("div",He,(0,l.zw)(e.$t("auction.currentPrice")+":"),1)])),append:(0,n.w5)((()=>[((0,n.wg)(),(0,n.iD)("div",{class:"text-h6 q-pr-sm",onClick:t[12]||(t[12]=t=>e.setBid(e.currentAuction.price,.05)),key:e.currentAuction.price},(0,l.zw)(e.$n(e.currentAuction.price)),1)),(0,n.Wm)(nt,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,n.w5)((()=>[(0,n.Wm)(bt,{anchor:"center end",self:"center start"},{default:(0,n.w5)((()=>[(0,n.Wm)(ht,null,{avatar:(0,n.w5)((()=>[(0,n.Wm)(ct,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,n.w5)((()=>[De])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(St,{filled:"",dense:"",readonly:"",color:"purple-12","input-class":"text-right",type:"number"},{prepend:(0,n.w5)((()=>[(0,n._)("div",Fe,(0,l.zw)(e.$t("auction.buyoutPriceS")+":"),1)])),append:(0,n.w5)((()=>[(0,n._)("div",{class:"text-h6 q-pr-sm",onClick:t[13]||(t[13]=t=>e.setBid(e.currentAuction.buyoutPrice))},(0,l.zw)(e.$n(e.currentAuction.buyoutPrice)),1),(0,n.Wm)(nt,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,n.w5)((()=>[(0,n.Wm)(bt,{anchor:"center end",self:"center start"},{default:(0,n.w5)((()=>[(0,n.Wm)(ht,null,{avatar:(0,n.w5)((()=>[(0,n.Wm)(ct,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,n.w5)((()=>[Pe])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(St,{filled:"",color:"purple-12","input-class":"text-right text-h6",type:"number",modelValue:e.bidGemPrice,"onUpdate:modelValue":t[14]||(t[14]=t=>e.bidGemPrice=t)},{prepend:(0,n.w5)((()=>[(0,n._)("div",Ee,(0,l.zw)(e.$t("auction.bidPrice")+":"),1)])),append:(0,n.w5)((()=>[(0,n.Wm)(nt,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,n.w5)((()=>[(0,n.Wm)(bt,{anchor:"center end",self:"center start"},{default:(0,n.w5)((()=>[(0,n.Wm)(ht,null,{avatar:(0,n.w5)((()=>[(0,n.Wm)(ct,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,n.w5)((()=>[Te])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(nt,{unelevated:"",color:"primary",class:"full-width","no-caps":"",onClick:t[15]||(t[15]=t=>e.bidSubmit())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.$t("auction.submit")),1)])),_:1}),Ze])),_:1}),(0,n.Wm)(Ct,null,{default:(0,n.w5)((()=>[e.bidGemBids[0]?((0,n.wg)(),(0,n.j4)(zt,{key:0,visible:"",class:"full-width",style:{height:"96px"}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.bidGemBids,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"q-gutter-md"},[(0,n._)("div",Qe,[(0,n._)("div",je,[(0,n._)("div",Ve,[(0,n._)("a",{class:"text-grey",href:"https://polygonscan.com/address/"+t.bidder,target:"_blank",rel:"noopener noreferrer"},[Oe,(0,n.Uk)(" "+(0,l.zw)(e.shortAddress(t.bidder,6,!0)),1)],8,Ge)]),(0,n._)("div",$e,[(0,n._)("a",{class:"text-grey",href:"https://polygonscan.com/address/tx/"+t.txhash,target:"_blank",rel:"noopener noreferrer"},[Le,(0,n.Uk)(" "+(0,l.zw)(e.shortAddress(t.txhash,4,!0)),1)],8,Re)])]),(0,n._)("div",Je,[Me,(0,n._)("div",Ye,(0,l.zw)(e.$n(t.price)),1),(0,n.Wm)(ct,{size:"sm",name:"img:tokens/USDC.png"})])])])))),128))])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(It,{modelValue:e.addAllowance,"onUpdate:modelValue":t[18]||(t[18]=t=>e.addAllowance=t),persistent:""},{default:(0,n.w5)((()=>[(0,n.Wm)(xt,null,{default:(0,n.w5)((()=>[(0,n.Wm)(Ct,{class:"row items-center q-pb-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(At,{color:"primary","text-color":"white",size:"md"},{default:(0,n.w5)((()=>[(0,n._)("img",{src:"tokens/usdc.png"},null,8,Ke)])),_:1}),Xe,(0,n.Wm)(Wt),(0,n.wy)((0,n.Wm)(nt,{icon:"close",flat:"",round:"",dense:""},null,512),[[Ht]])])),_:1}),(0,n.Wm)(Ct,{class:"row items-center"},{default:(0,n.w5)((()=>[(0,n._)("span",et,(0,l.zw)(e.$t("allowanceInfo")),1)])),_:1}),(0,n.Wm)(qt,{align:"right"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(nt,{class:"full-width",label:e.$t("increase"),color:"primary",onClick:t[17]||(t[17]=t=>e.approveToken())},null,8,["label"]),[[Ht]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(Nt,{modelValue:"usdc",points:e.memberInfo.score},null,8,["points"])])),_:1})}var at=a(60499),nt=a(19302),lt=a(65457),it=a(28488),st=a(9229),ot=a(43380),rt=a(16898),ct=a(85990),ut=a(17779),dt=function(e,t,a,n){function l(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,i){function s(e){try{r(n.next(e))}catch(t){i(t)}}function o(e){try{r(n["throw"](e))}catch(t){i(t)}}function r(e){e.done?a(e.value):l(e.value).then(s,o)}r((n=n.apply(e,t||[])).next())}))};const mt=a(89003),ft=a(53310),pt=a(94428),vt=a(97921),wt=a(90278),gt=[{name:"nft",label:"itemName",field:"endBlock",align:"left",sortable:!0,headerStyle:"text-align: center;"},{name:"price",label:"price",field:"price",align:"left",sortable:!0},{name:"level",label:"level",field:"level",align:"left",sortable:!0},{name:"scale",label:"weight",field:"scale",align:"left",sortable:!0},{name:"quality",label:"quality",field:"quality",align:"left",sortable:!0}];function ht(e){ut.log("Switch network: ",(0,ct.v)().networks[e].name,(0,ct.v)().networks[e].id),(0,ct.v)().initWeb3(e)}const bt={title:"Crystal - Auction"},yt=(0,n.aZ)({name:"AuctionPage",components:{NftMenu:st.Z,CrystalGem:ot.Z,BalanceView:rt.Z},setup(){const e=(0,nt.Z)();e.dark.set(!0),(0,lt.Z)(bt);const t=(0,at.iH)(!1),a=(0,at.iH)(0),l=(0,at.iH)("0x7d14730913Cf4859258c285932EC31E804A7E25a"),i=(0,at.iH)("0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"),s=(0,at.iH)("0xf18a1FEf4823Ce5ddb20B71D82FA06470DF84B17"),o=(0,at.iH)("0x92235Ce2CC98cb685dA8D70b2d0Aa86134440286"),r=(0,at.iH)("0xA96E6895e61E1b19369930Fb763F379651a4D711"),c=(0,at.iH)({bets:"0",score:"0",name:"0"}),u=(0,at.iH)("2"),d=(0,at.iH)(!1),m=(0,at.iH)(0),f=(0,at.iH)({}),p=(0,at.iH)({}),v=(0,at.iH)({}),w=(0,at.iH)({}),g=(0,at.iH)([]),h=(0,at.iH)(1),b=(0,at.iH)("0"),y=(0,at.iH)([]),k=(0,at.iH)(!1),x=(0,at.iH)(0);let _=(0,n.Fl)((()=>(0,ct.v)().account||"0x0")),A=(0,n.Fl)((()=>{let e=[];for(var t in w.value)w.value.hasOwnProperty(t)&&(p.value[t].end||e.push(w.value[t]));return e})),W=(0,n.Fl)((()=>1e4*Math.pow(2,h.value-1))),C=(0,n.Fl)((()=>p.value[b.value])),q=(0,n.Fl)((()=>{let e=[];for(var t in f.value)f.value.hasOwnProperty(t)&&f.value[t].bidder&&"0x0000000000000000000000000000000000000000"!=f.value[t].bidder&&e.unshift(f.value[t]);return e})),I=(0,n.Fl)((()=>{let e=[];for(var t in p.value)p.value.hasOwnProperty(t)&&!p.value[t].end&&p.value[t].endBlock>m.value&&e.push(p.value[t]);return e})),B=(0,n.Fl)((()=>{let e=[];for(var t in v.value)p.value.hasOwnProperty(t)&&e.unshift(p.value[t]);return e})),S=[];function z(e){let t=e,a="";return e>1e9?(t/=1e9,a="B"):e>1e6?(t/=1e6,a="M"):e>1e4&&(t/=1e3,a="K"),{short:t,unit:a}}function N(){ut.log("listeners:",S),S&&S.length>0&&S.forEach((e=>{e&&(e.unsubscribe(),ut.log("unsubscribe:",e))}))}function U(){return dt(this,void 0,void 0,(function*(){const e=yield(0,ct.v)().web3.eth.net.getId().then((e=>(ut.log(e),e))).catch((e=>(ut.log("checkNetwork: ",e),-1)));return e}))}function H(e){return dt(this,void 0,void 0,(function*(){const t=(0,ct.v)().networks[e].id,a=(0,ct.v)().networks[e].name,n=(0,ct.v)().networks[e].tokenName,l=(0,ct.v)().networks[e].symbol,i=(0,ct.v)().networks[e].rpcUrl,s=(0,ct.v)().networks[e].explorer,o="0x"+t.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:o}]}),location.reload()}catch(r){if(ut.log(r),4902===r.code){ut.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:o,chainName:a,nativeCurrency:{name:n,symbol:l,decimals:18},rpcUrls:[i],blockExplorerUrls:[s]}]}),location.reload()}catch(c){alert(c.message)}}else alert(r.message)}}))}function D(e,t=!1){return dt(this,void 0,void 0,(function*(){b.value=e,X(e,t).then((()=>{k.value=!0,p.value[e].bids>0?F(p.value[e].price,.05):F(p.value[e].price),M(e,t)}))}))}function F(e,t=0){let a=0;t>0&&(a=e*t,a<1&&(a=1)),x.value=parseFloat((e+a).toFixed(6))}function P(){if(void 0!=b.value){let e=b.value,t=!1;if(p.value[e].bids>0&&x.value<p.value[e].buyoutPrice?(x.value<p.value[e].price+1&&(x.value=parseFloat((p.value[e].price+1.0000001).toFixed(6)),t=!0),x.value<1.05*p.value[e].price&&(x.value=parseFloat((1.05*p.value[e].price+1e-7).toFixed(6)),t=!0)):x.value<p.value[e].price&&(x.value=parseFloat((p.value[e].price+1e-7).toFixed(6)),t=!0),x.value>p.value[e].buyoutPrice&&(x.value=p.value[e].buyoutPrice,t=!0),t)return;let a=parseFloat(x.value.toString()).toFixed(6).replace(".","");ae(e,a)}}function E(e){const t=JSON.parse(e),a=(0,ct.v)().web3.utils.toHex(t.properties);let n=10,l=10;for(let i=2;i<14;i++){const e=parseInt(a[i],16);i<8?n+=e:i<14&&(l+=e)}return{level:t.level,color:t.color,quality:n,scale:l/100}}function T(e,t=!1){var a;if(e.removed)return;const n=(0,ct.v)().web3Instance,l=e.returnValues,i=l.auctionId,s=l.price;if(p.value[i]){if(s){const e=n.utils.fromWei(s+"000000000000");parseFloat(e)>(null===(a=p.value[i])||void 0===a?void 0:a.price)&&(p.value[i].price=parseFloat(e),p.value[i].bidder=l.user)}t&&(p.value[i].end=!0,"0x0000000000000000000000000000000000000000"!=p.value[i].bidder&&(f.value[i]=p.value[i]))}else ut.log("No AH")}function Z(e,t=!1){var a;if(e.removed)return;const n=(0,ct.v)().web3Instance,l=e.returnValues,i=l.auctionId,s=l.price;if(v.value[i]){if(s){const e=n.utils.fromWei(s+"000000000000");parseFloat(e)>(null===(a=v.value[i])||void 0===a?void 0:a.price)&&(v.value[i].price=parseFloat(e),v.value[i].bidder=l.user)}t&&(v.value[i].end=!0),X(i,!0)}else ut.log("No AH")}function Q(e,t=!1){var a,n;if(e.removed)return;const l=(0,ct.v)().web3Instance,i=e.returnValues,s=i.auctionId,o=i.uri,r=E(o),c=l.utils.fromWei(i.startingPrice+"000000000000"),u=l.utils.fromWei(i.buyoutPrice+"000000000000");let d={owner:i.owner,bidder:"",auctionId:parseInt(s),nft:parseInt(i.nft),startingPrice:parseFloat(c),buyoutPrice:parseFloat(u),price:parseFloat(c),bids:0,startBlock:parseInt(e.blockNumber),endBlock:parseInt(e.blockNumber)+76800,end:!1,uri:o,level:r.level,color:r.color,quality:r.quality,scale:r.scale};t?v.value[s]=d:(void 0==p.value[s]||!(null===(a=p.value[s])||void 0===a?void 0:a.end)&&(null===(n=p.value[s])||void 0===n?void 0:n.price)<d.price)&&(p.value[s]=d)}function j(e,t){let a=[];e.forEach((e=>{if(!e.removed){const t=(0,ct.v)().web3Instance,n=e.returnValues,l=n.auctionId,i=t.utils.fromWei(n.price+"000000000000");let s={txhash:e.transactionHash,bidder:n.user,nft:n.nft,auctionId:l,price:parseFloat(i)};a.unshift(s)}})),t==b.value&&(y.value=a)}function V(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=new e.eth.Contract(mt,l.value);e.eth.getBlockNumber().then((function(e){return dt(this,void 0,void 0,(function*(){m.value=e;let a=e-1e5;const n={fromBlock:a};yield t.getPastEvents("CancelAuction",n).then((function(e){e.forEach((e=>{T(e,!0)}))})).catch((e=>{ut.error("allAuctionCancel Error:",e)}))}))}))}))}function G(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=new e.eth.Contract(mt,l.value);e.eth.getBlockNumber().then((function(e){return dt(this,void 0,void 0,(function*(){m.value=e;let a=e-1e5;const n={fromBlock:a};yield t.getPastEvents("FulfillAuction",n).then((function(e){e.forEach((e=>{T(e,!0)}))})).catch((e=>{ut.error("allAuctionFulfill Error:",e)}))}))}))}))}function O(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=new e.eth.Contract(mt,l.value);e.eth.getBlockNumber().then((function(e){return dt(this,void 0,void 0,(function*(){m.value=e;let a=e-1e5;const n={fromBlock:a};yield t.getPastEvents("Bid",n).then((function(e){e.forEach((e=>{T(e)}))})).catch((e=>{ut.error("allAuctionBid Error:",e)}))}))}))}))}function $(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=(0,ct.v)().account;if(!e.utils.isAddress(t))return void ut.log("Not Address:",t);const a=new e.eth.Contract(mt,l.value),n={filter:{owner:t},fromBlock:29762935};yield a.getPastEvents("CancelAuction",n).then((function(e){e.forEach((e=>{Z(e,!0)}))})).catch((e=>{ut.error("userAuctionCancel Error:",e)}))}))}function R(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=(0,ct.v)().account;if(!e.utils.isAddress(t))return void ut.log("Not Address:",t);const a=new e.eth.Contract(mt,l.value),n={filter:{owner:t},fromBlock:29762935};yield a.getPastEvents("FulfillAuction",n).then((function(e){e.forEach((e=>{Z(e,!0)}))})).catch((e=>{ut.error("userAuctionFulfill Error:",e)}))}))}function L(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=(0,ct.v)().account;if(!e.utils.isAddress(t))return void ut.log("Not Address:",t);const a=new e.eth.Contract(mt,l.value),n={filter:{owner:t},fromBlock:29762935};yield a.getPastEvents("Bid",n).then((function(e){e.forEach((e=>{Z(e)}))})).catch((e=>{ut.error("userAuctionBid Error:",e)}))}))}function J(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=(0,ct.v)().account;if(!e.utils.isAddress(t))return void ut.log("Not Address:",t);const a=new e.eth.Contract(mt,l.value),n={filter:{user:t},fromBlock:29762935};yield a.getPastEvents("Bid",n).then((function(t){ut.log("userBidHistory events",t),t.forEach((t=>{if(!t.removed){let a=t.returnValues,n=a.auctionId,l=a.nft,i=e.utils.fromWei(a.price+"000000000000"),s={txhash:t.transactionHash,bidder:a.user,nft:l,auctionId:n,price:parseFloat(i)};w.value[n]=s,X(n)}}))})).catch((e=>{ut.error("userBidHistory Error:",e)}))}))}function M(e,t=!1){return dt(this,void 0,void 0,(function*(){const a=(0,ct.v)().web3Instance,n=new a.eth.Contract(mt,l.value);let i=29762935;const s={filter:{auctionId:e},fromBlock:i};yield n.getPastEvents("Bid",s).then((function(a){ut.log("getBidById Bid events",a),j(a,e),a.forEach((e=>{T(e),t&&Z(e)}))})).catch((e=>{ut.error("getBidById Error:",e)}))}))}function Y(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=new e.eth.Contract(mt,l.value);e.eth.getBlockNumber().then((function(e){return dt(this,void 0,void 0,(function*(){m.value=e;let a=e-1e5;const n={fromBlock:a};yield t.getPastEvents("CreateAuction",n).then((function(e){e.forEach((e=>{Q(e)}))})).catch((e=>{ut.error("allAuctionCreated Error:",e)}))}))}))}))}function K(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=(0,ct.v)().account;if(!e.utils.isAddress(t))return void ut.log("Not Address:",t);const a=new e.eth.Contract(mt,l.value),n={filter:{owner:t},fromBlock:29762935};yield a.getPastEvents("CreateAuction",n).then((function(e){e.forEach((e=>{Q(e,!0)}))})).catch((e=>{ut.error("userAuctionCreated Error:",e)}))}))}function X(e,t=!1){return dt(this,void 0,void 0,(function*(){const a=(0,ct.v)().web3Instance,n=new a.eth.Contract(mt,l.value);n.methods.auctionDetail(e).call().then((function(n){const l=e,i=n.uri,s=E(i),o=a.utils.fromWei(n.startingPrice+"000000000000"),r=a.utils.fromWei(n.buyoutPrice+"000000000000"),c=a.utils.fromWei(n.price+"000000000000");let u={owner:n.owner,bidder:n.bidder,auctionId:parseInt(e),nft:parseInt(n.nft),startingPrice:parseFloat(o),buyoutPrice:parseFloat(r),price:parseFloat(c),bids:n.bids,startBlock:parseInt(n.startBlock),endBlock:parseInt(n.endBlock),end:n.end,uri:n.uri,level:s.level,color:s.color,quality:s.quality,scale:s.scale};p.value[l]=u,t&&(v.value[l]=u);const d=(0,ct.v)().account;d.toUpperCase()==n.owner.toUpperCase()&&(v.value[l]=u)})).catch((function(e){ut.log("getAhById: ",e)}))}))}function ee(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=new e.eth.Contract(mt,l.value),a=(0,ct.v)().account;e.utils.isAddress(a)?t.methods.userListing(a).call({from:a}).then((function(e){ut.log("getUserListing: ",e);let t=[],a=e.list;a.forEach((e=>{t.unshift(e)})),g.value=t,ut.log("getUserListing Space: ",e.space),h.value=parseInt(e.space)})).catch((function(e){ut.log("getUserListing: ",e)})):ut.log("Not Address:",a)}))}function te(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3;e.eth.getBlockNumber().then((function(e){return dt(this,void 0,void 0,(function*(){m.value=e,ut.log("getBlockNum:",e)}))}))}))}function ae(e,t){return dt(this,void 0,void 0,(function*(){if(!(0,ct.v)().web3.utils.isAddress((0,ct.v)().account))return void alert("Need Connect Wallet!");const a=(0,ct.v)().web3,n=l.value,i=(0,ct.v)().account;if(!a.utils.isAddress(i))return void alert("Account is not valid address!");const s=new a.eth.Contract(mt,n);let o=s.methods.bidAuction(e,t),r=o.encodeABI();a.eth.estimateGas({from:i,to:n,value:0,data:r}).then((function(t){ut.log("gasAmount: ",t),a.eth.sendTransaction({from:i,to:n,value:0,gas:parseInt((1.05*t).toString()),gasPrice:36e9,data:r}).on("transactionHash",(e=>{ut.log("transactionHash: ",e)})).on("receipt",(t=>{t&&(M(e),X(e),J())})).on("error",(e=>{ut.log("tx bidAuctionTx",e),J()}))})).catch((function(e){ut.log("estimateGas: ",e);let t=e.message.toString();if(t.includes("exceeds")&&t.includes("allowance"))d.value=!0;else{let e=t.substring(t.indexOf("{"),t.lastIndexOf("}")+1);if(e){let t=JSON.parse(e);alert(t.message)}else alert(t)}}))}))}function ne(e){return dt(this,void 0,void 0,(function*(){if(!(0,ct.v)().web3.utils.isAddress((0,ct.v)().account))return void alert("Need Connect Wallet!");const t=(0,ct.v)().web3,a=l.value,n=(0,ct.v)().account;if(!t.utils.isAddress(n))return void alert("Account is not valid address!");const i=new t.eth.Contract(mt,a);let s=i.methods.cancelAuction(e),o=s.encodeABI();t.eth.estimateGas({from:n,to:a,value:0,data:o}).then((function(l){ut.log("gasAmount: ",l),t.eth.sendTransaction({from:n,to:a,value:0,gas:parseInt((1.05*l).toString()),gasPrice:36e9,data:o}).on("transactionHash",(e=>{ut.log("transactionHash: ",e)})).on("receipt",(t=>{t&&(ee(),M(e,!0),X(e,!0))})).on("error",(e=>{ut.log("tx cancelAuctionTx",e)}))})).catch((function(e){ut.log("estimateGas: ",e);let t=e.message.toString();if(t.includes("exceeds")&&t.includes("allowance"))d.value=!0;else{let e=t.substring(t.indexOf("{"),t.lastIndexOf("}")+1);if(e){let t=JSON.parse(e);alert(t.message)}else alert(t)}}))}))}function le(e){return dt(this,void 0,void 0,(function*(){if(!(0,ct.v)().web3.utils.isAddress((0,ct.v)().account))return void alert("Need Connect Wallet!");const t=(0,ct.v)().web3,a=l.value,n=(0,ct.v)().account;if(!t.utils.isAddress(n))return void alert("Account is not valid address!");const i=new t.eth.Contract(mt,a);let s=i.methods.fulfillAuction(e),o=s.encodeABI();t.eth.estimateGas({from:n,to:a,value:0,data:o}).then((function(l){ut.log("gasAmount: ",l),t.eth.sendTransaction({from:n,to:a,value:0,gas:parseInt((1.05*l).toString()),gasPrice:36e9,data:o}).on("transactionHash",(e=>{ut.log("transactionHash: ",e)})).on("receipt",(t=>{t&&(ee(),M(e,!0),X(e,!0))})).on("error",(e=>{ut.log("tx fulfillAuctionTx",e)}))})).catch((function(e){ut.log("estimateGas: ",e);let t=e.message.toString();if(t.includes("exceeds")&&t.includes("allowance"))d.value=!0;else{let e=t.substring(t.indexOf("{"),t.lastIndexOf("}")+1);if(e){let t=JSON.parse(e);alert(t.message)}else alert(t)}}))}))}function ie(){return dt(this,void 0,void 0,(function*(){const e=i.value;ut.log("approveToken");const t=(0,ct.v)().web3,a="0xffffffffffffffffffffffffffffff",n=new t.eth.Contract(ft,e);let s=n.methods.approve(l.value,a),o=s.encodeABI();t.eth.estimateGas({from:(0,ct.v)().account,to:e,value:0,data:o}).then((function(a){ut.log("gasAmount: ",a),t.eth.sendTransaction({from:(0,ct.v)().account,to:e,value:0,gas:parseInt((1.05*a).toString()),gasPrice:36e9,data:o}).on("transactionHash",(e=>{ut.log("transactionHash: ",e)})).on("receipt",(e=>{ut.log("receipt: ",e)})).on("error",(e=>{ut.log("tx increaseAllowance ",e)}))})).catch((function(e){alert(e)}))}))}function se(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3Instance,t=s.value,a=(0,ct.v)().accountAddr;if(e.utils.isAddress(a)){const n=new e.eth.Contract(pt,t);n.methods.userDetail(a).call().then((function(e){ut.log("getMemberInfo: ",e);const t={bets:e.bets,score:e.score,name:e.name};c.value=t})).catch((function(e){ut.log("getMemberInfo: ",e)}))}}))}function oe(e){return dt(this,void 0,void 0,(function*(){ut.log("Referral ID:",e);const n=(0,ct.v)().web3,l=(0,ct.v)().account;if(!n.utils.isAddress(l))return void alert("Need Connect Wallet!");const i=a.value,s=yield U();if(s!=(0,ct.v)().networks[i].id)return ut.log(s,"!=",(0,ct.v)().networks[i].id),void(t.value=!0);const o=r.value,c=new n.eth.Contract(wt,o);let u=c.methods.register(n.utils.toHex(e)),d=u.encodeABI();n.eth.estimateGas({from:l,to:o,value:0,data:d}).then((function(e){ut.log("gasAmount: ",e),n.eth.sendTransaction({from:l,to:o,value:0,gas:parseInt((1.05*e).toString()),gasPrice:36e9,data:d}).on("transactionHash",(e=>{ut.log("transactionHash: ",e)})).on("receipt",(e=>{ut.log("receipt: ",e),se(),ee()})).on("error",(e=>{ut.log("tx registerTx",e)}))})).catch((function(e){ut.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],n=JSON.parse(a);alert(n.message)}))}))}function re(){return dt(this,void 0,void 0,(function*(){const e=(0,ct.v)().web3,n=(0,ct.v)().account;if(!e.utils.isAddress(n))return void alert("Need Connect Wallet!");const l=a.value,i=yield U();if(i!=(0,ct.v)().networks[l].id)return ut.log(i,"!=",(0,ct.v)().networks[l].id),void(t.value=!0);const s=o.value,r=new e.eth.Contract(vt,s);let c=r.methods.upgrade(),u=c.encodeABI();e.eth.estimateGas({from:n,to:s,value:0,data:u}).then((function(t){ut.log("gasAmount: ",t),e.eth.sendTransaction({from:n,to:s,value:0,gas:parseInt((1.05*t).toString()),gasPrice:36e9,data:u}).on("transactionHash",(e=>{ut.log("transactionHash: ",e)})).on("receipt",(e=>{ut.log("receipt: ",e),ee()})).on("error",(e=>{ut.log("tx registerTx",e)}))})).catch((function(e){ut.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],n=JSON.parse(a);alert(n.message)}))}))}function ce(){let e=parseInt(u.value).toString();u.value=e,ut.log("registerClick:",e),oe(e)}function ue(){ut.log("upgradeClick"),re()}return{currentBlock:m,userAccount:_,memberInfo:c,addAllowance:d,gemColumns:gt,tab:(0,at.iH)("browse"),browseTab:(0,at.iH)("browseGems"),allAuctions:p,userAuctions:v,userBids:w,userListing:g,userListSpace:h,upgradeFee:W,currentAuction:C,userBidsArray:A,allFilled:q,allAH:I,userAH:B,bidGem:b,bidGemBids:y,bidGemDetail:k,bidGemPrice:x,netIndex:a,ahContract:l,switchNet:t,registerClick:ce,upgradeClick:ue,getBlockNum:te,bidAuctionTx:ae,cancelAuctionTx:ne,fulfillAuctionTx:le,approveToken:ie,bidSubmit:P,shortNumStr:z,removeListeners:N,getBidById:M,getUserListing:ee,allAuctionCancel:V,allAuctionFulfill:G,allAuctionBid:O,userAuctionCancel:$,userAuctionFulfill:R,userAuctionBid:L,userBidHistory:J,allAuctionCreated:Y,userAuctionCreated:K,getAhById:X,checkNetwork:U,switchNetwork:H,bidClicked:D,setBid:F,shortAddress:it.sC,copyAddress:it.c4,linkAddress:it.ol,getRarity(e){let t="Common",a="C";switch(e){case 4:case 5:case 6:case 7:a="UC";break;case 8:case 9:a="R";break;case 10:a="RR";break;case 11:a="RRR";break;case 12:a="SR";break;case 13:a="HR";break;case 14:a="UR";break;case 15:a="SSR";break;default:break}switch(e){case 4:case 5:case 6:case 7:t="Uncommon";break;case 8:case 9:case 10:case 11:t="Rare";break;case 12:case 13:case 14:case 15:t="Epic";break;default:break}return{rarity:t,short:a}},initGame(){return dt(this,void 0,void 0,(function*(){let e=new URLSearchParams(window.location.search),n=e.get("ref");n&&"NaN"!=n&&(localStorage.refCode=n),localStorage.refCode&&(u.value=localStorage.refCode),ut.log(n||"No Ref");let l=e.get("id");ut.log(l||"No shareId"),b.value=l||"0","0"!=b.value&&D(b.value);const i=a.value;ht(i);const s=yield U();if(s!=(0,ct.v)().networks[i].id)return ut.log(s,"!=",(0,ct.v)().networks[i].id),void(t.value=!0);ee(),Y().then((()=>{O(),G(),V()})),K().then((()=>{L(),R(),$()})),J(),se()}))},initData(){localStorage.getItem("allAuctions")&&Object.assign(p.value,JSON.parse(localStorage.getItem("allAuctions")||"")),localStorage.getItem("allFulfilled")&&Object.assign(f.value,JSON.parse(localStorage.getItem("allFulfilled")||"")),localStorage.getItem("memberInfo")&&Object.assign(c.value,JSON.parse(localStorage.getItem("memberInfo")||""))},storeData(){localStorage.setItem("memberInfo",JSON.stringify(c.value)),localStorage.setItem("allAuctions",JSON.stringify(p.value)),localStorage.setItem("allFulfilled",JSON.stringify(f.value))},reloadData(){p.value={},v.value={},localStorage.setItem("allAuctions",JSON.stringify(p.value)),ee(),Y().then((()=>{O(),G()})),K().then((()=>{L(),R()}))}}},beforeMount(){this.initData(),this.initGame(),this.getBlockNum()},beforeUnmount(){this.removeListeners(),this.storeData()}});var kt=a(11639),xt=a(69885),_t=a(68879),At=a(44458),Wt=a(47817),Ct=a(57661),qt=a(50926),It=a(89800),Bt=a(84106),St=a(13246),zt=a(490),Nt=a(76749),Ut=a(33115),Ht=a(22857),Dt=a(8858),Ft=a(31233),Pt=a(21682),Et=a(67220),Tt=a(46858),Zt=a(52765),Qt=a(47128),jt=a(32074),Vt=a(63190),Gt=a(61357),Ot=a(90136),$t=a(11821),Rt=a(57691),Lt=a(66611),Jt=a(66663),Mt=a(62146),Yt=a(69984),Kt=a.n(Yt);const Xt=(0,kt.Z)(yt,[["render",tt],["__scopeId","data-v-5c249851"]]),ea=Xt;Kt()(yt,"components",{QPage:xt.Z,QBtn:_t.Z,QCard:At.Z,QTabs:Wt.Z,QTab:Ct.Z,QSeparator:qt.Z,QTabPanels:It.Z,QTabPanel:Bt.Z,QList:St.Z,QItem:zt.Z,QItemSection:Nt.Z,QItemLabel:Ut.Z,QIcon:Ht.Z,QTable:Dt.Z,QTr:Ft.Z,QTh:Pt.Z,QTd:Et.Z,QTooltip:Tt.Z,QPopupProxy:Zt.Z,QBanner:Qt.Z,QDialog:jt.Z,QCardSection:Vt.Z,QAvatar:Gt.Z,QSpace:Ot.Z,QCardActions:$t.Z,QChip:Rt.Z,QInput:Lt.Z,QScrollArea:Jt.Z}),Kt()(yt,"directives",{ClosePopup:Mt.Z})}}]);