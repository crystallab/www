"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[804],{73804:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ee});var n=a(59835),s=a(86970);const i=e=>((0,n.dD)("data-v-5ebe1e72"),e=e(),(0,n.Cn)(),e),r=i((()=>(0,n._)("div",{class:"min-width-320 text-white text-h6 text-bold text-center"}," Dig Your Crystal ",-1))),l=i((()=>(0,n._)("div",{class:"min-width-320 text-white text-center"},"Coming soon...",-1))),o=i((()=>(0,n._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," Member Points: ",-1))),u=i((()=>(0,n._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," Points/Stone: ",-1))),c={class:"row items-center justify-evenly"},d=(0,n.Uk)(" Go back "),p=i((()=>(0,n._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1))),m=i((()=>(0,n._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1)));function y(e,t,a,i,y,w){const v=(0,n.up)("q-field"),f=(0,n.up)("CrystalGem"),b=(0,n.up)("q-btn"),h=(0,n.up)("q-card-section"),g=(0,n.up)("q-card"),k=(0,n.up)("q-avatar"),_=(0,n.up)("q-space"),x=(0,n.up)("q-card-actions"),C=(0,n.up)("q-dialog"),q=(0,n.up)("q-page"),T=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(q,{class:"row items-center justify-evenly"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{class:"bg-glass",style:{"max-width":"340px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"row q-gutter-sm justify-evenly"},{default:(0,n.w5)((()=>[r,l,(0,n.Wm)(v,{outlined:"","stack-label":"",label:"Play game to get more",readonly:"",class:"min-width-320"},{control:(0,n.w5)((()=>[o])),append:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.memberInfo.score.value),1)])),_:1}),(0,n.Wm)(v,{outlined:"",dense:"","stack-label":"",label:"The cost of digging once",readonly:"",class:"min-width-320"},{control:(0,n.w5)((()=>[u])),append:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.minerInfo.price.value),1)])),_:1}),(0,n._)("div",null," You Can Dig "+(0,s.zw)(Math.floor(parseInt(e.memberInfo.score.value)/parseInt(e.minerInfo.price.value)))+" Times ",1),(0,n._)("div",c,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(18,(e=>(0,n.Wm)(f,{key:e,nft:e,level:(e-1)%16,color:Math.floor(6*Math.random()),quality:Math.floor(10*Math.random())+1,size:50,scale:1,detail:!0},null,8,["nft","level","color","quality"]))),64))]),(0,n.Wm)(b,{unelevated:"",color:"primary",class:"min-width-320",to:"/"},{default:(0,n.w5)((()=>[d])),_:1})])),_:1})])),_:1}),(0,n.Wm)(C,{modelValue:e.switchNet,"onUpdate:modelValue":t[1]||(t[1]=t=>e.switchNet=t),persistent:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{class:"bg-glass"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"row items-center q-pb-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),p,(0,n.Wm)(_),(0,n.wy)((0,n.Wm)(b,{icon:"close",flat:"",round:"",dense:""},null,512),[[T]])])),_:1}),(0,n.Wm)(h,{class:"row items-center"},{default:(0,n.w5)((()=>[m])),_:1}),(0,n.Wm)(x,{align:"right"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(b,{class:"full-width",label:"Switch",color:"primary",onClick:t[0]||(t[0]=t=>e.switchNetwork(e.netIndex))},null,512),[[T]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var w=a(60499),v=a(19302),f=a(65457);const b=e=>((0,n.dD)("data-v-57f087eb"),e=e(),(0,n.Cn)(),e),h=b((()=>(0,n._)("img",{class:"gem",src:"/gems/shine.png",alt:"shine"},null,-1))),g={class:"gem-box row items-center justify-evenly"},k=b((()=>(0,n._)("img",{class:"gem",src:"/gems/shine.png",alt:"shine"},null,-1))),_=[k],x=b((()=>(0,n._)("div",{class:"gem-box-text"},null,-1))),C={class:"info",style:{"text-shadow":"#000 1px 0 10px"}},q={class:"gem-level"},T={class:"gem-quality"},S={class:"gem-quality text-caption text-grey",style:{"max-width":"200px"}};function I(e,t,a,i,r,l){const o=(0,n.up)("q-btn"),u=(0,n.up)("q-chip"),c=(0,n.up)("q-card-section"),d=(0,n.up)("q-card"),p=(0,n.up)("q-dialog");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o,{style:(0,s.j5)(e.imgStyle),onClick:t[0]||(t[0]=t=>e.showDetail=!e.showDetail&&e.detail)},{default:(0,n.w5)((()=>[h])),_:1},8,["style"]),(0,n.Wm)(p,{modelValue:e.showDetail,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showDetail=t)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{dark:"",class:"bg-glass min-width-320"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"row"},{default:(0,n.w5)((()=>[(0,n._)("div",g,[(0,n._)("div",{style:(0,s.j5)(e.imgStyle)},_,4),x]),(0,n._)("div",C,[(0,n._)("div",{class:"text-h6 gem-name",style:(0,s.j5)("color: "+e.rarityColor)},(0,s.zw)(e.$t("gems.levels."+e.level.toString())+e.$t("gems.names."+e.color.toString())),5),(0,n._)("div",{class:"gem-rarity",style:(0,s.j5)("color: "+e.rarityColor)},[(0,n.Uk)((0,s.zw)(e.$t("gems."+e.rarity)+" "+e.$t("gems.gem"))+" ",1),(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n._)("a",{style:(0,s.j5)("color: "+e.rarityColor)},(0,s.zw)(e.rarityShort),5)])),_:1})],4),(0,n._)("div",q,(0,s.zw)(e.$t("gems.level")+":")+" "+(0,s.zw)(4*e.level+10),1),(0,n._)("div",T,(0,s.zw)(e.$t("gems.quality")+":")+" "+(0,s.zw)(e.quality),1),(0,n._)("div",S,(0,s.zw)(e.$t("gems.qualityInfo")),1)])])),_:1}),(0,n.Wm)(c,{class:"row"})])),_:1})])),_:1},8,["modelValue"])])}const M=(0,n.aZ)({name:"CrystalGem",props:{nft:{type:Number,required:!0},level:{type:Number,required:!0},color:{type:Number,required:!0},quality:{type:Number,required:!0},size:{type:Number,required:!1},scale:{type:Number,required:!1},detail:{type:Boolean,required:!1}},setup(e){const t=(0,w.iH)("#f0f0f0"),a=(0,w.iH)("gems/15.png"),n=(0,w.iH)(""),s=(0,w.iH)(!1),i=(0,w.iH)("Common"),r=(0,w.iH)("C"),l=(0,w.iH)("#ffffff");switch(e.level){case 4:case 5:case 6:case 7:r.value="U";break;case 8:r.value="R";break;case 9:case 10:r.value="RR";break;case 11:r.value="RRR";break;case 12:r.value="SR";break;case 13:r.value="HR";break;case 14:r.value="UR";break;case 15:r.value="SSR";break;default:break}switch(e.level){case 4:case 5:case 6:case 7:i.value="Uncommon",l.value="#1eff00";break;case 8:case 9:case 10:i.value="Rare",l.value="#0070dd";break;case 11:case 12:case 13:case 14:case 15:i.value="Epic",l.value="#a335ee";break;default:break}switch(e.color){case 1:t.value="#bb0a1e";break;case 2:t.value="#16a52d";break;case 3:t.value="#2b26c1";break;case 4:t.value="#f6e83e";break;case 5:t.value="#9966cc";break;default:break}return a.value="gems/"+e.level.toString()+".png",n.value="transform: scale("+(e.scale||.5).toString()+"); height: "+(e.size||64).toString()+"px; width: "+(e.size||64).toString()+"px; background-blend-mode: hard-light; -webkit-mask-mode: alpha; mask-mode: alpha; background-image: url('"+a.value+"'), linear-gradient("+t.value+", "+t.value+"); -webkit-mask-image: url('"+a.value+"'); mask-image: url('"+a.value+"'); background-size: cover; -webkit-mask-size: 100%; mask-size: 100%;",{imgColor:t,imgUrl:a,imgStyle:n,showDetail:s,rarity:i,rarityShort:r,rarityColor:l}}});var Z=a(11639),W=a(68879),N=a(32074),z=a(44458),D=a(63190),H=a(90136),Q=a(57691),U=a(62146),R=a(69984),j=a.n(R);const A=(0,Z.Z)(M,[["render",I],["__scopeId","data-v-57f087eb"]]),P=A;j()(M,"components",{QBtn:W.Z,QDialog:N.Z,QCard:z.Z,QCardSection:D.Z,QSpace:H.Z,QChip:Q.Z}),j()(M,"directives",{ClosePopup:U.Z});var O=a(85990),$=a(17779),B=function(e,t,a,n){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,i){function r(e){try{o(n.next(e))}catch(t){i(t)}}function l(e){try{o(n["throw"](e))}catch(t){i(t)}}function o(e){e.done?a(e.value):s(e.value).then(r,l)}o((n=n.apply(e,t||[])).next())}))};const G=a(94428);function V(e){$.log("Switch network: ",(0,O.v)().networks[e].name,(0,O.v)().networks[e].id),(0,O.v)().initWeb3(e)}const E={title:"Crystal - NFT"},F=(0,n.aZ)({name:"NftClaimPage",components:{CrystalGem:P},setup(){const e=(0,v.Z)();e.dark.set(!0),(0,f.Z)(E);const t=(0,w.iH)(!1),a=(0,w.iH)(0),n=(0,w.iH)("0xf18a1FEf4823Ce5ddb20B71D82FA06470DF84B17"),s={bets:(0,w.iH)("0"),score:(0,w.iH)("0"),name:(0,w.iH)("n/a")},i={price:(0,w.iH)("10000")};function r(){return B(this,void 0,void 0,(function*(){const e=yield(0,O.v)().web3.eth.net.getId().then((e=>($.log(e),e))).catch((e=>($.log("checkNetwork: ",e),-1)));return e}))}function l(e){return B(this,void 0,void 0,(function*(){const t=(0,O.v)().networks[e].id,a=(0,O.v)().networks[e].name,n=(0,O.v)().networks[e].tokenName,s=(0,O.v)().networks[e].symbol,i=(0,O.v)().networks[e].rpcUrl,r=(0,O.v)().networks[e].explorer,l="0x"+t.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:l}]}),location.reload()}catch(o){if($.log(o),4902===o.code){$.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:l,chainName:a,nativeCurrency:{name:n,symbol:s,decimals:18},rpcUrls:[i],blockExplorerUrls:[r]}]}),location.reload()}catch(u){alert(u.message)}}else alert(o.message)}}))}function o(e){return B(this,void 0,void 0,(function*(){const t=(0,O.v)().web3Instance;if(t.utils.isAddress((0,O.v)().accountAddr)){const a=new t.eth.Contract(G,e);a.methods.userDetail((0,O.v)().accountAddr).call().then((function(e){$.log("getMemberInfo: ",e),s.bets.value=e.bets,s.score.value=e.score,s.name.value="0"==e.name?"N/a":e.name})).catch((function(e){$.log("getMemberInfo: ",e)}))}}))}return{netIndex:a,switchNet:t,memberContract:n,memberInfo:s,minerInfo:i,checkNetwork:r,switchNetwork:l,getMemberInfo:o,initGame(){return B(this,void 0,void 0,(function*(){const e=a.value;V(e);const s=yield r();if(s!=(0,O.v)().networks[e].id)return $.log(s,"!=",(0,O.v)().networks[e].id),void(t.value=!0);o(n.value)}))},updateInputs(e){$.log("updateInputs: ",e)}}},beforeMount(){this.initGame()}});var Y=a(69885),J=a(18149),K=a(61357),L=a(11821);const X=(0,Z.Z)(F,[["render",y],["__scopeId","data-v-5ebe1e72"]]),ee=X;j()(F,"components",{QPage:Y.Z,QCard:z.Z,QCardSection:D.Z,QField:J.Z,QBtn:W.Z,QDialog:N.Z,QAvatar:K.Z,QSpace:H.Z,QCardActions:L.Z}),j()(F,"directives",{ClosePopup:U.Z})},94428:e=>{e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"added","type":"address"}],"name":"CertifiedAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"removed","type":"address"}],"name":"CertifiedRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"addCertified","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"score","type":"uint256"},{"internalType":"address","name":"account","type":"address"}],"name":"addScore","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"certifieds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"isCertified","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"removeCertified","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"nameIndex","type":"uint256"},{"internalType":"address","name":"account","type":"address"}],"name":"setName","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"score","type":"uint256"},{"internalType":"address","name":"account","type":"address"}],"name":"subScore","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"userBets","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"userDetail","outputs":[{"components":[{"internalType":"uint256","name":"bets","type":"uint256"},{"internalType":"uint256","name":"score","type":"uint256"},{"internalType":"uint256","name":"name","type":"uint256"}],"internalType":"struct Membership.User","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"userNameIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"userScore","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')}}]);