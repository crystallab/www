"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[47],{80374:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Pe});var l=a(59835),n=a(86970);const s={class:"q-pa-md",style:{width:"100%","max-width":"1439px"}},o=(0,l._)("br",null,null,-1),i={class:"q-pa-md col-3 col-md-4 col-sm-6 col-xs-12"},r={class:"q-gutter-x-sm",style:{"z-index":"2"}},u=["src"],d={class:"q-gutter-x-sm",style:{"z-index":"1",position:"absolute",top:"0px",left:"0px"}},c=["src"],m=["href"],p={class:"cursor-pointer"},v=(0,l.Uk)(" House Edge "),w=(0,l._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," Invested: ",-1),f=(0,l._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," LP Token: ",-1),h=(0,l._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," Value: ",-1),g=(0,l._)("br",null,null,-1),k=(0,l._)("br",null,null,-1),b={class:"text-center"},_=(0,l._)("br",null,null,-1),y=(0,l._)("br",null,null,-1),x=(0,l._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1),W=(0,l._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1),I=(0,l._)("span",{class:"text-h6 q-ml-sm"},"Transaction",-1),q={class:"q-pa-xs"},H={key:0,class:"text-left"},S=(0,l._)("a",null,[(0,l._)("span",{class:"cursor-pointer"}," Sign transaction with your wallet and we will never touch your private key! ")],-1),T=[S],C={key:1,class:"text-left text-red"},Z=["href"],U={class:"cursor-pointer"},L=(0,l._)("a",null,[(0,l._)("span",{class:"cursor-pointer"}," Transaction is broadcasted, waiting for confirmation. ")],-1),Q=(0,l._)("div",null,"Transaction Success!",-1),F=["href"],A={class:"cursor-pointer"},P=(0,l._)("span",{class:"text-subtitle2 text-secondary q-ml-sm"},"https://crystal.network",-1),V=(0,l.Uk)(" You can invest some of your crypto currency with this game for other players to bet against. This both increases the maximum bets on the game, and you keep any profits made. You also 'keep' any losses. "),E=(0,l.Uk)("If you believe that the potential gains do not outweigh the potential losses, please do not invest."),z=(0,l.Uk)(" Please help advertise the site. The more players we have, the faster your investment will grow. "),N=(0,l.Uk)(" https://crystal.network ");function B(e,t,a,S,B,D){const G=(0,l.up)("q-icon"),j=(0,l.up)("q-btn"),R=(0,l.up)("q-page-sticky"),M=(0,l.up)("q-avatar"),O=(0,l.up)("q-item-section"),Y=(0,l.up)("q-item-label"),J=(0,l.up)("q-item"),K=(0,l.up)("q-chip"),X=(0,l.up)("q-card-section"),$=(0,l.up)("q-separator"),ee=(0,l.up)("q-field"),te=(0,l.up)("q-tab"),ae=(0,l.up)("q-tabs"),le=(0,l.up)("q-input"),ne=(0,l.up)("q-btn-group"),se=(0,l.up)("q-tab-panel"),oe=(0,l.up)("q-slider"),ie=(0,l.up)("q-tab-panels"),re=(0,l.up)("q-card-actions"),ue=(0,l.up)("q-card"),de=(0,l.up)("q-space"),ce=(0,l.up)("q-dialog"),me=(0,l.up)("q-step"),pe=(0,l.up)("q-linear-progress"),ve=(0,l.up)("q-stepper"),we=(0,l.up)("q-expansion-item"),fe=(0,l.up)("q-list"),he=(0,l.up)("BalanceView"),ge=(0,l.up)("q-page"),ke=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(ge,{class:"row justify-evenly"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{position:"top-left",offset:[0,0],style:{"z-index":"999"}},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{flat:"","no-caps":"",to:"/"},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{name:"las la-angle-double-left"})])),_:1}),(0,l.Wm)(j,{flat:"","no-caps":"",onClick:e.refresh},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{name:"las la-sync"})])),_:1},8,["onClick"])])),_:1}),(0,l._)("div",s,[o,(0,l._)("div",i,[(0,l.Wm)(ue,{class:"my-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(X,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,{avatar:""},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(M,{size:"48px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"tokens/"+e.token+".png"},null,8,u)])),_:1})]),(0,l._)("div",d,[(0,l.Wm)(M,{size:"30px",color:"white"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"chains/"+e.networkName+".svg",style:{width:"60%"}},null,8,c)])),_:1})])])),_:1}),(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Y,{class:"text-h6"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.gameName),1)])),_:1}),(0,l.Wm)(Y,{caption:""},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{"no-caps":"",size:"10px",flat:"",dense:"",icon:"open_in_new"},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.contract,e.network),target:"_blank",class:"text-white"},[(0,l._)("span",p,(0,n.zw)(e.shortAddress(e.contract)),1)],8,m)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(M,{color:"orange","text-color":"white",icon:"las la-coins"}),(0,l.Uk)(" Profit "+(0,n.zw)(e.gameInfo.profitRate.value+"%"),1)])),_:1}),(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" APR "+(0,n.zw)((365*parseFloat(e.gameInfo.profitRate.value)/e.days).toFixed(2)+"%"),1)])),_:1}),(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(M,{color:"red","text-color":"white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.houseEdge+"%"),1)])),_:1}),v])),_:1}),(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Rake "+(0,n.zw)(e.rake+"%"),1)])),_:1})])])),_:1})])),_:1}),(0,l.Wm)($),(0,l.Wm)(X,{class:"row q-gutter-sm justify-evenly"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[w])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(parseFloat(e.infoStr.userInvested.value).toPrecision(6))+" "+e.token),1)])),_:1}),(0,l.Wm)(ee,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[f])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(parseFloat(e.infoStr.userLp.value).toPrecision(6))+" LP"),1)])),_:1}),(0,l.Wm)(ee,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[h])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat((parseFloat(e.infoStr.userLp.value)*parseFloat(e.infoStr.gameBalanceEth.value)/parseFloat(e.infoStr.gameLpSupplyEth.value)).toPrecision(6))+" "+e.token),1)])),_:1})])),_:1}),(0,l.Wm)(re,{class:"row",align:"around"},{default:(0,l.w5)((()=>[(0,l.Wm)(ae,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey full-width","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"",breakpoint:0},{default:(0,l.w5)((()=>[(0,l.Wm)(te,{name:"invest",label:"Invest"}),parseFloat(e.infoStr.userLp.value)>0?((0,l.wg)(),(0,l.j4)(te,{key:0,name:"divest",label:"Divest"})):((0,l.wg)(),(0,l.j4)(te,{key:1,label:"Divest",disable:""}))])),_:1},8,["modelValue"]),(0,l.Wm)(ie,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=t=>e.tab=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{class:"q-pa-md q-gutter-y-md",name:"invest"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{filled:"",type:"number",modelValue:e.investInputed,"onUpdate:modelValue":t[1]||(t[1]=t=>e.investInputed=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[2]||(t[2]=t=>e.updateInputs(0)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(j,{class:"fixed-width-100",color:"brown",label:"Token"})])),append:(0,l.w5)((()=>[(0,l.Wm)(j,{flat:"",label:e.token,class:"fixed-width-80"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1}),g,(0,l.Wm)(j,{class:"full-width min-width-320",color:"primary",label:"Invest",onClick:t[3]||(t[3]=t=>e.investClicked())})])),_:1}),(0,l.Wm)(se,{class:"q-pa-md q-gutter-y-md",name:"divest"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{filled:"",type:"number",modelValue:e.divestLp,"onUpdate:modelValue":t[4]||(t[4]=t=>e.divestLp=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[5]||(t[5]=t=>e.updateInputs(1)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(j,{class:"fixed-width-100",color:"brown",label:"Liquidity"})])),append:(0,l.w5)((()=>[(0,l.Wm)(j,{flat:"",label:"LP",class:"fixed-width-80"})])),_:1},8,["modelValue"])])),_:1}),k,(0,l._)("div",b,[(0,l.Wm)(G,{name:"las la-angle-double-down",color:"primary"})]),(0,l.Wm)(ne,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{filled:"",type:"number",modelValue:e.divestToken,"onUpdate:modelValue":t[6]||(t[6]=t=>e.divestToken=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[7]||(t[7]=t=>e.updateInputs(2)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(j,{class:"fixed-width-100",color:"brown",label:"Token"})])),append:(0,l.w5)((()=>[(0,l.Wm)(j,{flat:"",label:e.token,class:"fixed-width-80"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(oe,{"model-value":e.divestPercent,min:0,max:100,step:1,markers:25,"marker-labels":e=>e+"%",color:"primary",label:"",onChange:t[8]||(t[8]=t=>{e.divestPercent=t,e.updateInputs(3)})},null,8,["model-value","marker-labels"]),_,(0,l.Wm)(j,{class:"full-width min-width-320",color:"primary",label:"Divest",onClick:t[9]||(t[9]=t=>e.divestClicked())}),y])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,l.Wm)(ce,{modelValue:e.switchNet,"onUpdate:modelValue":t[11]||(t[11]=t=>e.switchNet=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,null,{default:(0,l.w5)((()=>[(0,l.Wm)(X,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),x,(0,l.Wm)(de),(0,l.wy)((0,l.Wm)(j,{icon:"close",flat:"",round:"",dense:""},null,512),[[ke]])])),_:1}),(0,l.Wm)(X,{class:"row items-center"},{default:(0,l.w5)((()=>[W])),_:1}),(0,l.Wm)(re,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(j,{class:"full-width",label:"Switch",color:"primary",onClick:e.switchNetwork},null,8,["onClick"]),[[ke]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ce,{modelValue:e.signTx,"onUpdate:modelValue":t[14]||(t[14]=t=>e.signTx=t),position:"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{style:{top:"50px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(X,{class:"q-pa-xs row items-center q-pb-none"},{default:(0,l.w5)((()=>[I,(0,l.Wm)(de),(0,l.wy)((0,l.Wm)(j,{icon:"close",flat:"",round:"",dense:""},null,512),[[ke]])])),_:1}),(0,l.Wm)(X,{class:"row items-center q-pa-xs"},{default:(0,l.w5)((()=>[(0,l._)("div",q,[(0,l.Wm)(ve,{modelValue:e.txStep,"onUpdate:modelValue":t[13]||(t[13]=t=>e.txStep=t),vertical:"",color:"primary",flat:"",animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(me,{name:1,title:"Sign Transaction",icon:"las la-wallet",done:e.txStep>1,error:e.signTxErr.length>0},{default:(0,l.w5)((()=>[""==e.signTxErr?((0,l.wg)(),(0,l.iD)("div",H,T)):((0,l.wg)(),(0,l.iD)("div",C,(0,n.zw)(e.signTxErr),1))])),_:1},8,["done","error"]),(0,l.Wm)(me,{name:2,title:"Send Transaction",icon:"las la-receipt",done:e.txStep>2},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.signTxHash,e.network,"tx"),target:"_blank",class:"text-grey-6"},[(0,l._)("span",U,(0,n.zw)(" tx hash: "+e.shortAddress(e.signTxHash,6,!1)),1)],8,Z),L,(0,l.Wm)(pe,{dark:"",rounded:"",indeterminate:"",color:"secondary",class:"q-mt-sm"})])),_:1},8,["done"]),(0,l.Wm)(me,{name:3,title:"Success",icon:"las la-trophy"},{default:(0,l.w5)((()=>[Q,(0,l._)("a",{href:e.linkAddress(e.signTxHash,e.network,"tx"),target:"_blank",class:"text-grey-6"},[(0,l._)("span",A,(0,n.zw)("tx hash: "+e.shortAddress(e.signTxHash,6,!1)),1)],8,F),(0,l.Wm)(j,{onClick:t[12]||(t[12]=t=>e.signTx=!1),color:"primary",label:"OK",class:"q-ml-sm full-width",dense:""})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,l.Wm)(X,{class:"q-pa-xs row items-center q-pb-none"},{default:(0,l.w5)((()=>[P])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,l._)("div",null,[(0,l.Wm)(fe,null,{default:(0,l.w5)((()=>[(0,l.Wm)(we,{icon:"las la-hand-holding-usd",label:"Your crypto Bank!","header-class":"text-primary text-h6","default-opened":""},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,null,{default:(0,l.w5)((()=>[(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[V])),_:1}),(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Although we this game has a "+(0,n.zw)(e.houseEdge)+"% house edge, and in the long run will earn a profit of "+(0,n.zw)(e.houseEdge)+"% of the wagered amount, in the short to medium term we can still lose money. In times when we are lucky, we win many bets and earn a larger-than-expected profit, and in unlucky times we earn less than expected, and can even lose out. This is especially so if someone comes in and makes a large number of massive bets; we can either gain a lot or lose a lot. ",1)])),_:1}),(0,l.Wm)(X,{class:"text-bold"},{default:(0,l.w5)((()=>[E])),_:1})])),_:1})])),_:1}),(0,l.Wm)(we,{icon:"las la-bullhorn",label:"Help advertise the site!","header-class":"text-primary text-h6","default-opened":""},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,null,{default:(0,l.w5)((()=>[(0,l.Wm)(X,{class:"text-bold text-h6"},{default:(0,l.w5)((()=>[z])),_:1}),(0,l.Wm)(X,{class:"text-center text-bold text-h5"},{default:(0,l.w5)((()=>[N])),_:1})])),_:1})])),_:1})])),_:1})]),(0,l.Wm)(he)])),_:1})}var D=a(60499),G=a(85990),j=a(19302),R=a(65457),M=a(18910),O=a(28488),Y=a(37948),J=a(17779),K=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(l.next(e))}catch(t){s(t)}}function i(e){try{r(l["throw"](e))}catch(t){s(t)}}function r(e){e.done?a(e.value):n(e.value).then(o,i)}r((l=l.apply(e,t||[])).next())}))};const X=a(57841),$={title:"Crystal - Invest"};function ee(e){J.log("Switch network: ",(0,G.v)().networks[e].name,(0,G.v)().networks[e].id),(0,G.v)().initWeb3(e)}const te=(0,l.aZ)({name:"InvestPage",components:{BalanceView:Y.Z},setup(){const e=(0,M.yj)(),t=(0,j.Z)();t.dark.set(!0),(0,R.Z)($);const a=(0,D.iH)(256e5),l=(0,D.iH)(0),n=(0,D.iH)(""),s=(0,D.iH)(""),o=(0,D.iH)("04/04/2022"),i=(0,D.iH)(1),r=(0,D.iH)(""),u=(0,D.iH)(""),d=(0,D.iH)(0),c=(0,D.iH)(0),m=(0,D.iH)(!1),p=(0,D.iH)(!1),v=(0,D.iH)(""),w=(0,D.iH)(""),f=(0,D.iH)(1),h={bets:(0,D.iH)("0"),supply:(0,D.iH)("0"),invested:(0,D.iH)("0"),divisted:(0,D.iH)("0"),balance:(0,D.iH)("0"),profitRate:(0,D.iH)("0")},g={lpBalnce:(0,D.iH)("0"),invested:(0,D.iH)("0")},k={userInvested:(0,D.iH)("0"),userLp:(0,D.iH)("0"),userLpValue:(0,D.iH)("0"),gameBalanceEth:(0,D.iH)("0"),gameLpSupplyEth:(0,D.iH)("0")},b=(0,D.iH)(0),_=(0,D.iH)(0),y=(0,D.iH)(0),x=(0,D.iH)(0),W=(0,G.v)();function I(){return K(this,void 0,void 0,(function*(){const e=yield(0,G.v)().web3.eth.net.getId().then((e=>(J.log(e),e))).catch((e=>(J.log("checkNetwork: ",e),-1)));return e}))}function q(){return K(this,void 0,void 0,(function*(){const e=(0,G.v)().networks[l.value].id,t=(0,G.v)().networks[l.value].name,a=(0,G.v)().networks[l.value].tokenName,n=(0,G.v)().networks[l.value].symbol,s=(0,G.v)().networks[l.value].rpcUrl,o=(0,G.v)().networks[l.value].explorer,i="0x"+e.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:i}]}),location.reload()}catch(r){if(J.log(r),4902===r.code){J.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:i,chainName:t,nativeCurrency:{name:a,symbol:n,decimals:18},rpcUrls:[s],blockExplorerUrls:[o]}]}),location.reload()}catch(u){alert(u.message)}}else alert(r.message)}}))}function H(e){return K(this,void 0,void 0,(function*(){const t=(0,G.v)().web3Instance,a=new t.eth.Contract(X,e);a.methods.gameInfo().call().then((function(e){J.log(e),h.bets.value=e[0],h.supply.value=e[1],h.invested.value=e[2],h.divisted.value=e[3],h.balance.value=e[4];let a=parseFloat(t.utils.fromWei(e[1])),l=parseFloat(t.utils.fromWei(e[2])),n=parseFloat(t.utils.fromWei(e[3])),s=parseFloat(t.utils.fromWei(e[4])),o=s+n-l;o=o<0?0:o;let i=100*o/l;h.profitRate.value=i.toFixed(4),k.gameBalanceEth.value=s.toPrecision(6),k.gameLpSupplyEth.value=a.toPrecision(6)})).catch((function(e){J.log("getGameInfo: ",e)}))}))}function S(e){return K(this,void 0,void 0,(function*(){const t=(0,G.v)().web3Instance;if(t.utils.isAddress((0,G.v)().accountAddr)){const a=new t.eth.Contract(X,e);a.methods.userDetail((0,G.v)().accountAddr).call().then((function(e){J.log("getUserInfo: ",e),g.invested.value=e.invested,k.userInvested.value=parseFloat(t.utils.fromWei(e.invested)).toPrecision(6)})).catch((function(e){J.log("getUserInfo: ",e)}))}}))}function T(e){return K(this,void 0,void 0,(function*(){const t=(0,G.v)().web3Instance;if(t.utils.isAddress((0,G.v)().accountAddr)){const a=new t.eth.Contract(X,e);a.methods.balanceOf((0,G.v)().accountAddr).call().then((function(e){J.log("getUserLp: ",e),g.lpBalnce.value=e,k.userLp.value=parseFloat(t.utils.fromWei(e)).toPrecision(6)})).catch((function(e){J.log("getUserLp: ",e)}))}}))}function C(e,t){return K(this,void 0,void 0,(function*(){if(!(0,G.v)().web3.utils.isAddress((0,G.v)().accountAddr))return void alert("Need Connect Wallet!");const a=yield I();if(a!=(0,G.v)().networks[l.value].id)return J.log(a,"!=",(0,G.v)().networks[l.value].id),void(m.value=!0);const n=(0,G.v)().web3,s=new n.eth.Contract(X,t);J.log("Invest(",t,",",e,")");let o=s.methods.invest(),i=o.encodeABI();n.eth.estimateGas({from:(0,G.v)().account,to:t,value:n.utils.toWei(e.toString(),"ether"),data:i}).then((function(a){J.log("gasAmount: ",a),n.eth.sendTransaction({from:(0,G.v)().account,to:t,value:n.utils.toWei(e.toString(),"ether"),gas:parseInt((1.05*a).toString()),gasPrice:36e9,data:i}).on("transactionHash",(e=>{J.log("transactionHash: ",e),f.value=2,w.value=e})).on("receipt",(e=>{J.log("receipt: ",e),f.value=3,H(t),S(t),T(t)})).on("error",(e=>{J.log("investTx ",e),v.value=e.message,f.value=1}))})).catch((function(e){J.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],l=JSON.parse(a),n=l.message.split(":");v.value=n[0]+": "+n[1]}))}))}function Z(){return K(this,void 0,void 0,(function*(){let e=b.value;J.log("Invest Clicked: ",e),C(e,r.value),p.value=!0,v.value="",w.value="",f.value=1,b.value=0}))}function U(e,t){return K(this,void 0,void 0,(function*(){if(!(0,G.v)().web3.utils.isAddress((0,G.v)().accountAddr))return void alert("Need Connect Wallet!");const a=yield I();if(a!=(0,G.v)().networks[l.value].id)return J.log(a,"!=",(0,G.v)().networks[l.value].id),void(m.value=!0);const n=(0,G.v)().web3,s=new n.eth.Contract(X,t);J.log("Divest(",t,",",e,")");let o=s.methods.divest(e),i=o.encodeABI();n.eth.estimateGas({from:(0,G.v)().account,to:t,value:0,data:i}).then((function(e){J.log("gasAmount: ",e),n.eth.sendTransaction({from:(0,G.v)().account,to:t,value:0,gas:parseInt((1.05*e).toString()),gasPrice:36e9,data:i}).on("transactionHash",(e=>{J.log("transactionHash: ",e),f.value=2,w.value=e})).on("receipt",(e=>{J.log("receipt: ",e),f.value=3,H(t),S(t),T(t)})).on("error",(e=>{J.log("divestTx ",e),v.value=e.message,f.value=1}))})).catch((function(e){J.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],l=JSON.parse(a),n=l.message.split(":");v.value=n[0]+": "+n[1]}))}))}function L(){return K(this,void 0,void 0,(function*(){let e=W.web3.utils.toWei(y.value.toFixed(10));_.value>=99.9&&(J.log(g.lpBalnce.value),e=g.lpBalnce.value),J.log("Divest Clicked: ",e),U(e,r.value),p.value=!0,v.value="",w.value="",f.value=1,_.value=0,x.value=0,y.value=0}))}return{tab:(0,D.iH)("invest"),shortAddress:O.sC,copyAddress:O.c4,linkAddress:O.ol,signTx:p,signTxErr:v,signTxHash:w,txStep:f,store:W,network:l,networkName:n,switchNet:m,fromBlock:a,gameName:s,start:o,days:i,contract:r,token:u,houseEdge:d,rake:c,gameInfo:h,userInfo:g,infoStr:k,investInputed:b,divestPercent:_,divestLp:y,divestToken:x,refresh(){J.log("Refresh"),location.reload()},updateInputs(e){(y.value<0||x.value<0)&&(y.value=0,_.value=0);var t=0;2==e?(t=x.value,y.value=x.value*parseFloat(k.gameLpSupplyEth.value)/parseFloat(k.gameBalanceEth.value)):3==e&&(y.value=_.value*parseFloat(k.userLp.value)/100),y.value>parseFloat(k.userLp.value)?(y.value=parseFloat(k.userLp.value),_.value=100,t=0):_.value=100*y.value/parseFloat(k.userLp.value),x.value=2==e&&0!=t?t:y.value*parseFloat(k.gameBalanceEth.value)/parseFloat(k.gameLpSupplyEth.value),1!=e&&(y.value=parseFloat(y.value.toPrecision(6))),2!=e&&(x.value=parseFloat(x.value.toPrecision(6)))},initInvest(){return K(this,void 0,void 0,(function*(){let t=0;null!=e.query.game?t=parseInt(e.query.game.toString()):J.log("Default game");let a=W.gameList[t];s.value=a.name,l.value=a.networkId,n.value=(0,G.v)().networks[a.networkId].name.toLowerCase(),r.value=a.contract,u.value=a.token,d.value=a.houseEdge,c.value=a.rake,o.value=a.start;let p=new Date(o.value),v=new Date;i.value=Math.round(v.getTime()-p.getTime())/864e5,J.log("Init Invest: ",t),ee(a.networkId);const w=yield I();if(w!=(0,G.v)().networks[l.value].id)return J.log(w,"!=",(0,G.v)().networks[l.value].id),void(m.value=!0)}))},checkNetwork:I,switchNetwork:q,investTx:C,investClicked:Z,divestTx:U,divestClicked:L,getGameInfo:H,getUserInfo:S,getUserLp:T}},beforeMount(){this.initInvest(),this.getGameInfo(this.contract),this.getUserInfo(this.contract),this.getUserLp(this.contract)}});var ae=a(11639),le=a(69885),ne=a(3388),se=a(68879),oe=a(22857),ie=a(44458),re=a(63190),ue=a(490),de=a(76749),ce=a(61357),me=a(33115),pe=a(57691),ve=a(11821),we=a(50926),fe=a(18149),he=a(47817),ge=a(70900),ke=a(89800),be=a(84106),_e=a(67236),ye=a(66611),xe=a(28423),We=a(32074),Ie=a(90136),qe=a(8225),He=a(46017),Se=a(21992),Te=a(8289),Ce=a(13246),Ze=a(50651),Ue=a(44518),Le=a(62146),Qe=a(69984),Fe=a.n(Qe);const Ae=(0,ae.Z)(te,[["render",B]]),Pe=Ae;Fe()(te,"components",{QPage:le.Z,QPageSticky:ne.Z,QBtn:se.Z,QIcon:oe.Z,QCard:ie.Z,QCardSection:re.Z,QItem:ue.Z,QItemSection:de.Z,QAvatar:ce.Z,QItemLabel:me.Z,QChip:pe.Z,QCardActions:ve.Z,QSeparator:we.Z,QField:fe.Z,QTabs:he.Z,QTab:ge.Z,QTabPanels:ke.Z,QTabPanel:be.Z,QBtnGroup:_e.Z,QInput:ye.Z,QSlider:xe.Z,QDialog:We.Z,QSpace:Ie.Z,QStepper:qe.Z,QStep:He.Z,QStepperNavigation:Se.Z,QLinearProgress:Te.Z,QList:Ce.Z,QExpansionItem:Ze.Z,QTable:Ue.Z}),Fe()(te,"directives",{ClosePopup:Le.Z})}}]);