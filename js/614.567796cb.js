"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[614],{42718:(e,t,a)=>{a.r(t),a.d(t,{default:()=>dt});var l=a(59835),n=a(86970);const o=e=>((0,l.dD)("data-v-1abc42d7"),e=e(),(0,l.Cn)(),e),i={class:"q-pa-md",style:{"max-width":"1439px"}},s=o((()=>(0,l._)("div",{class:"text-shadow text-h6"},"Auction House - Beta",-1))),r=o((()=>(0,l._)("div",{class:"text-h6"},"Under Construction",-1))),c=(0,l.Uk)(" Auction House is coming soon. These data are just samples. "),u={class:"my-table-details",style:{"padding-left":"0px"}},d=["onClick"],m={class:"my-table-details row"},p={class:"text-left inline"},f={style:{display:"flex","flex-wrap":"nowrap"}},w=o((()=>(0,l._)("div",{class:"text-bold"}," Auction is ending soon ",-1))),v={style:{display:"flex","flex-wrap":"nowrap"}},h={key:0,class:"container",style:{"margin-right":"5px"}},b={class:"text-h7"},g=(0,l.Uk)(" Current Price "),y={style:{display:"flex","flex-wrap":"nowrap"}},_={class:"container",style:{"margin-right":"5px"}},k={class:"text-h7 text-grey"},x=(0,l.Uk)(" Buy Out Price "),q={class:"my-table-details text-left text-h7"},A={class:"my-table-details text-left text-h7"},W={class:"my-table-details text-left text-h7"},C=o((()=>(0,l._)("div",{class:"text-h4 q-mb-md"},"Alarms",-1))),I=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),B=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),z=o((()=>(0,l._)("div",{class:"text-h4 q-mb-md"},"Movies",-1))),U=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),S=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),P=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),Z=o((()=>(0,l._)("div",{class:"text-h6"},"Under Construction",-1))),D=(0,l.Uk)(" Auction House is coming soon. These data are just samples. "),H=o((()=>(0,l._)("div",{class:"text-h6"},"Under Construction",-1))),Q=(0,l.Uk)(" Auction House is coming soon. These data are just samples. "),V={class:"text-shadow"},E=o((()=>(0,l._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1))),N=o((()=>(0,l._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1))),T={class:"gem-detail-box row items-center justify-evenly"},$={key:0,class:"gem-box-text"},G={class:"info text-shadow"},R={class:"row"},F={class:"gem-level q-pr-sm"},j={class:"gem-scale q-pr-sm"},O={class:"gem-quality q-pr-sm"},L={class:"gem-quality text-caption text-grey",style:{"max-width":"200px"}},J=["href"],M={key:0,class:"text-grey"},Y=["href"],K={class:"self-center full-width no-outline text-h6",tabindex:"0"},X=o((()=>(0,l._)("div",{class:"text-h6"},"USDC",-1))),ee={class:"self-center full-width no-outline text-h6",tabindex:"0"},te=o((()=>(0,l._)("div",{class:"text-h6"},"USDC",-1))),ae={class:"self-center full-width no-outline text-h6",tabindex:"0"},le=o((()=>(0,l._)("div",{class:"text-h6"},"USDC",-1))),ne=o((()=>(0,l._)("br",null,null,-1))),oe={class:"event-view row justify-between",style:{"align-items":"baseline",display:"flex","flex-wrap":"wrap-reverse"}},ie={class:"row"},se={class:"USER q-pr-xs",style:{"margin-top":"0px"}},re=["href"],ce=o((()=>(0,l._)("i",{class:"las la-user"},null,-1))),ue={class:"tx q-pr-xs",style:{"margin-top":"0px"}},de=["href"],me=o((()=>(0,l._)("i",{class:"las la-file-alt"},null,-1))),pe={class:(0,n.C_)(""),style:{display:"flex","align-items":"center"}},fe=o((()=>(0,l._)("div",{class:"event text-bold q-mr-sm"},[(0,l._)("a",null,(0,n.zw)("Bid:"))],-1))),we={class:"event text-h6"},ve=["src"],he=o((()=>(0,l._)("span",{class:"text-h6 q-ml-sm"},"USDC Allowance",-1))),be={class:"q-ml-sm"};function ge(e,t,a,o,ge,ye){const _e=(0,l.up)("q-tab"),ke=(0,l.up)("q-tabs"),xe=(0,l.up)("q-separator"),qe=(0,l.up)("q-tab-panel"),Ae=(0,l.up)("q-th"),We=(0,l.up)("q-tr"),Ce=(0,l.up)("CrystalGem"),Ie=(0,l.up)("q-td"),Be=(0,l.up)("q-icon"),ze=(0,l.up)("q-banner"),Ue=(0,l.up)("q-popup-proxy"),Se=(0,l.up)("q-btn"),Pe=(0,l.up)("q-tooltip"),Ze=(0,l.up)("q-table"),De=(0,l.up)("q-tab-panels"),He=(0,l.up)("q-card"),Qe=(0,l.up)("nft-menu"),Ve=(0,l.up)("q-avatar"),Ee=(0,l.up)("q-space"),Ne=(0,l.up)("q-card-section"),Te=(0,l.up)("q-card-actions"),$e=(0,l.up)("q-dialog"),Ge=(0,l.up)("q-chip"),Re=(0,l.up)("q-input"),Fe=(0,l.up)("q-scroll-area"),je=(0,l.up)("BalanceView"),Oe=(0,l.up)("q-page"),Le=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(Oe,{class:"row items-start justify-center bg-pic",style:{"padding-top":"58px"}},{default:(0,l.w5)((()=>[(0,l._)("div",i,[s,(0,l.Wm)(He,{class:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ke,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e,{name:"browse",label:"Browse"}),(0,l.Wm)(_e,{name:"bids",label:"Bids"}),(0,l.Wm)(_e,{name:"auctions",label:"Auctions"})])),_:1},8,["modelValue"]),(0,l.Wm)(xe),(0,l.Wm)(De,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=t=>e.tab=t),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(qe,{name:"overview"},{default:(0,l.w5)((()=>[r,c])),_:1}),(0,l.Wm)(qe,{name:"browse",class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(ke,{"narrow-indicator":"",modelValue:e.browseTab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.browseTab=t),class:"text-teal"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e,{name:"browseGems",icon:"mdi-diamond-stone"}),(0,l.Wm)(_e,{disable:"",name:"browseEquipment",icon:"mdi-sword"}),(0,l.Wm)(_e,{disable:"",name:"browseAvatars",icon:"mdi-account-box-multiple"})])),_:1},8,["modelValue"]),(0,l.Wm)(De,{modelValue:e.browseTab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.browseTab=t),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(qe,{name:"browseGems",class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ze,{dense:"","row-key":"auctionId","rows-per-page-options":[25],rows:e.allAH,columns:e.gemColumns,class:"my-sticky-header-table bg-none text-shadow"},{header:(0,l.w5)((t=>[(0,l.Wm)(We,{props:t},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.cols,(a=>((0,l.wg)(),(0,l.j4)(Ae,{key:a.name,props:t,class:"text-primary text-justify"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(""==a.label?"":e.$t("gems."+a.label)),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),"body-cell-nft":(0,l.w5)((t=>[(0,l.Wm)(Ie,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l._)("div",{onClick:a=>e.bidClicked(t.row.auctionId)},[(0,l.Wm)(Ce,{nft:t.row.nft,level:t.row.level,color:t.row.color,quality:t.row.quality,scale:t.row.scale,size:50,owner:!0,names:!0},null,8,["nft","level","color","quality","scale"])],8,d)])])),_:2},1024)])),"body-cell-price":(0,l.w5)((t=>[(0,l.Wm)(Ie,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l._)("div",p,[(0,l._)("div",f,[t.row.endBlock-e.currentBlock<900?((0,l.wg)(),(0,l.j4)(Se,{key:0,flat:"",dense:"",class:"no-padding",style:{width:"18px","margin-right":"5px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(Be,{size:"xs",name:"las la-stopwatch"}),(0,l.Wm)(Ue,{anchor:"center start",self:"center end"},{default:(0,l.w5)((()=>[(0,l.Wm)(ze,null,{avatar:(0,l.w5)((()=>[(0,l.Wm)(Be,{size:"md",name:"las la-stopwatch",color:"primary"})])),default:(0,l.w5)((()=>[w])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(Se,{size:"xs",align:"left",dense:"",flat:"",onClick:a=>e.bidClicked(t.row.auctionId),style:{"padding-left":"0px"}},{default:(0,l.w5)((()=>[(0,l._)("div",v,[t.row.endBlock-e.currentBlock>=900?((0,l.wg)(),(0,l.iD)("div",h,[(0,l.Wm)(Be,{size:"xs",name:"img:tokens/USDC.png"})])):(0,l.kq)("",!0),(0,l._)("div",b,(0,n.zw)(e.$n(t.row.price)),1)]),(0,l.Wm)(Pe,{anchor:"center start",self:"center end"},{default:(0,l.w5)((()=>[(0,l.Wm)(Be,{name:"mdi-gavel"}),g])),_:1})])),_:2},1032,["onClick"])]),(0,l._)("div",null,[(0,l.Wm)(Se,{align:"left",size:"xs",flat:"",dense:"",onClick:a=>e.bidClicked(t.row.auctionId),style:{"padding-left":"0px"}},{default:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l._)("div",_,[(0,l.Wm)(Be,{size:"xs",name:"img:tokens/USDC.png"})]),(0,l._)("div",k,(0,n.zw)(e.$n(t.row.buyoutPrice)),1)]),(0,l.Wm)(Pe,{anchor:"center start",self:"center end"},{default:(0,l.w5)((()=>[(0,l.Wm)(Be,{name:"mdi-gavel"}),x])),_:1})])),_:2},1032,["onClick"])])])])])),_:2},1024)])),"body-cell-level":(0,l.w5)((e=>[(0,l.Wm)(Ie,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",q,(0,n.zw)(parseInt(4*e.row.level+10)),1)])),_:2},1024)])),"body-cell-scale":(0,l.w5)((e=>[(0,l.Wm)(Ie,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",A,(0,n.zw)(parseInt(100*e.row.scale)),1)])),_:2},1024)])),"body-cell-quality":(0,l.w5)((e=>[(0,l.Wm)(Ie,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",W,(0,n.zw)(e.row.quality),1)])),_:2},1024)])),_:1},8,["rows","columns"])])),_:1}),(0,l.Wm)(qe,{name:"browseEquipment"},{default:(0,l.w5)((()=>[C,I,B])),_:1}),(0,l.Wm)(qe,{name:"browseAvatars"},{default:(0,l.w5)((()=>[z,U,S,P])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(qe,{name:"bids"},{default:(0,l.w5)((()=>[Z,D])),_:1}),(0,l.Wm)(qe,{name:"auctions"},{default:(0,l.w5)((()=>[H,Q])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l._)("a",V," Block Number: "+(0,n.zw)(e.currentBlock),1)]),(0,l.Wm)(Qe),(0,l.Wm)($e,{modelValue:e.switchNet,"onUpdate:modelValue":t[5]||(t[5]=t=>e.switchNet=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(He,{class:"bg-glass"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ve,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),E,(0,l.Wm)(Ee),(0,l.wy)((0,l.Wm)(Se,{icon:"close",flat:"",round:"",dense:""},null,512),[[Le]])])),_:1}),(0,l.Wm)(Ne,{class:"row items-center"},{default:(0,l.w5)((()=>[N])),_:1}),(0,l.Wm)(Te,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(Se,{class:"full-width",label:"Switch",color:"primary",onClick:t[4]||(t[4]=t=>e.switchNetwork(e.netIndex))},null,512),[[Le]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)($e,{modelValue:e.bidGemDetail,"onUpdate:modelValue":t[10]||(t[10]=t=>e.bidGemDetail=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(He,{dark:"",class:"bg-glass min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,{class:"q-pb-none row"},{default:(0,l.w5)((()=>[(0,l._)("div",T,[(0,l.Wm)(Ce,{nft:e.currentAuction.nft,level:e.currentAuction.level,color:e.currentAuction.color,quality:e.currentAuction.quality,scale:e.currentAuction.scale,size:50},null,8,["nft","level","color","quality","scale"]),e.currentAuction.nft>0?((0,l.wg)(),(0,l.iD)("div",$," # "+(0,n.zw)(e.currentAuction.nft),1)):(0,l.kq)("",!0)]),(0,l._)("div",G,[(0,l._)("div",{class:(0,n.C_)(e.getRarity(e.currentAuction.level).rarity+" text-h6")},(0,n.zw)(e.$t("gems.levels."+e.currentAuction.level)+e.$t("gems.names."+e.currentAuction.color)),3),(0,l._)("div",{class:(0,n.C_)(e.getRarity(e.currentAuction.level).rarity)},[(0,l.Uk)((0,n.zw)(e.$t("gems."+e.getRarity(e.currentAuction.level).rarity)+" "+e.$t("gems.gem"))+" ",1),(0,l.Wm)(Ge,{dense:""},{default:(0,l.w5)((()=>[(0,l._)("a",{class:(0,n.C_)(e.getRarity(e.currentAuction.level).rarity)},(0,n.zw)(e.getRarity(e.currentAuction.level).short),3)])),_:1})],2),(0,l._)("div",R,[(0,l._)("div",F,(0,n.zw)(e.$t("gems.level")+":")+" "+(0,n.zw)(4*parseInt(e.currentAuction.level)+10),1),(0,l._)("div",j,(0,n.zw)(e.$t("gems.weight")+":")+" "+(0,n.zw)(parseInt(100*e.currentAuction.scale)),1),(0,l._)("div",O,(0,n.zw)(e.$t("gems.quality")+":")+" "+(0,n.zw)(e.currentAuction.quality),1)]),(0,l._)("div",L,(0,n.zw)(e.$t("gems.qualityInfo")),1)])])),_:1}),(0,l.Wm)(Ne,{class:"row q-py-none justify-between"},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.currentAuction.owner),target:"_blank",class:"text-grey-6"},[(0,l.Uk)((0,n.zw)(e.$t("auction.owner")+":")+" ",1),(0,l._)("span",null,(0,n.zw)(e.shortAddress(e.currentAuction.owner,6,!0)),1)],8,J),"0x0000000000000000000000000000000000000000"!=e.currentAuction.bidder?((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("a",{href:e.linkAddress(e.currentAuction.bidder),target:"_blank",class:"text-grey-6"},[(0,l.Uk)((0,n.zw)(e.$t("auction.highestBidder")+":")+" ",1),(0,l._)("span",null,(0,n.zw)(e.shortAddress(e.currentAuction.bidder,6,!0)),1)],8,Y)])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(Ne,{class:"q-py-xs"},{default:(0,l.w5)((()=>[(0,l.Wm)(Re,{filled:"",dense:"",readonly:"",color:"purple-12","input-class":"text-right"},{prepend:(0,l.w5)((()=>[(0,l._)("div",K,(0,n.zw)(e.$t("auction.currentPrice")+":"),1)])),append:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)("div",{class:"text-h6 q-pr-sm",onClick:t[6]||(t[6]=t=>e.setBid(e.currentAuction.price,.05)),key:e.currentAuction.price},(0,n.zw)(e.$n(e.currentAuction.price)),1)),(0,l.Wm)(Se,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ue,{anchor:"center end",self:"center start"},{default:(0,l.w5)((()=>[(0,l.Wm)(ze,null,{avatar:(0,l.w5)((()=>[(0,l.Wm)(Be,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,l.w5)((()=>[X])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(Re,{filled:"",dense:"",readonly:"",color:"purple-12","input-class":"text-right",type:"number"},{prepend:(0,l.w5)((()=>[(0,l._)("div",ee,(0,n.zw)(e.$t("auction.buyoutPriceS")+":"),1)])),append:(0,l.w5)((()=>[(0,l._)("div",{class:"text-h6 q-pr-sm",onClick:t[7]||(t[7]=t=>e.setBid(e.currentAuction.buyoutPrice))},(0,n.zw)(e.$n(e.currentAuction.buyoutPrice)),1),(0,l.Wm)(Se,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ue,{anchor:"center end",self:"center start"},{default:(0,l.w5)((()=>[(0,l.Wm)(ze,null,{avatar:(0,l.w5)((()=>[(0,l.Wm)(Be,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,l.w5)((()=>[te])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(Re,{filled:"",color:"purple-12","input-class":"text-right text-h6",type:"number",modelValue:e.bidGemPrice,"onUpdate:modelValue":t[8]||(t[8]=t=>e.bidGemPrice=t)},{prepend:(0,l.w5)((()=>[(0,l._)("div",ae,(0,n.zw)(e.$t("auction.bidPrice")+":"),1)])),append:(0,l.w5)((()=>[(0,l.Wm)(Se,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ue,{anchor:"center end",self:"center start"},{default:(0,l.w5)((()=>[(0,l.Wm)(ze,null,{avatar:(0,l.w5)((()=>[(0,l.Wm)(Be,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,l.w5)((()=>[le])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(Se,{unelevated:"",color:"primary",class:"full-width","no-caps":"",onClick:t[9]||(t[9]=t=>e.bidSubmit())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("auction.submit")),1)])),_:1}),ne])),_:1}),(0,l.Wm)(Ne,null,{default:(0,l.w5)((()=>[e.bidGemBids[0]?((0,l.wg)(),(0,l.j4)(Fe,{key:0,visible:"",class:"full-width",style:{height:"96px"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.bidGemBids,(t=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"q-gutter-md"},[(0,l._)("div",oe,[(0,l._)("div",ie,[(0,l._)("div",se,[(0,l._)("a",{class:"text-grey",href:"https://polygonscan.com/address/"+t.bidder,target:"_blank",rel:"noopener noreferrer"},[ce,(0,l.Uk)(" "+(0,n.zw)(e.shortAddress(t.bidder,6,!0)),1)],8,re)]),(0,l._)("div",ue,[(0,l._)("a",{class:"text-grey",href:"https://polygonscan.com/address/tx/"+t.txhash,target:"_blank",rel:"noopener noreferrer"},[me,(0,l.Uk)(" "+(0,n.zw)(e.shortAddress(t.txhash,4,!0)),1)],8,de)])]),(0,l._)("div",pe,[fe,(0,l._)("div",we,(0,n.zw)(e.$n(t.price)),1),(0,l.Wm)(Be,{size:"sm",name:"img:tokens/USDC.png"})])])])))),128))])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)($e,{modelValue:e.addAllowance,"onUpdate:modelValue":t[12]||(t[12]=t=>e.addAllowance=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(He,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Ne,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ve,{color:"primary","text-color":"white",size:"md"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"tokens/usdc.png"},null,8,ve)])),_:1}),he,(0,l.Wm)(Ee),(0,l.wy)((0,l.Wm)(Se,{icon:"close",flat:"",round:"",dense:""},null,512),[[Le]])])),_:1}),(0,l.Wm)(Ne,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l._)("span",be,(0,n.zw)(e.$t("allowanceInfo")),1)])),_:1}),(0,l.Wm)(Te,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(Se,{class:"full-width",label:e.$t("increase"),color:"primary",onClick:t[11]||(t[11]=t=>e.approveToken())},null,8,["label"]),[[Le]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(je,{modelValue:"usdc"})])),_:1})}var ye=a(60499),_e=a(19302),ke=a(65457),xe=a(28488),qe=a(9229),Ae=a(6783),We=a(68090),Ce=a(85990),Ie=a(17779),Be=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,o){function i(e){try{r(l.next(e))}catch(t){o(t)}}function s(e){try{r(l["throw"](e))}catch(t){o(t)}}function r(e){e.done?a(e.value):n(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())}))};const ze=a(89003),Ue=a(53310),Se=[{name:"nft",label:"itemName",field:"endBlock",align:"left",sortable:!0,headerStyle:"text-align: center;"},{name:"price",label:"price",field:"price",align:"left",sortable:!0},{name:"level",label:"level",field:"level",align:"left",sortable:!0},{name:"scale",label:"weight",field:"scale",align:"left",sortable:!0},{name:"quality",label:"quality",field:"quality",align:"left",sortable:!0}];function Pe(e){Ie.log("Switch network: ",(0,Ce.v)().networks[e].name,(0,Ce.v)().networks[e].id),(0,Ce.v)().initWeb3(e)}const Ze={title:"Crystal - Auction"},De=(0,l.aZ)({name:"AuctionPage",components:{NftMenu:qe.Z,CrystalGem:Ae.Z,BalanceView:We.Z},setup(){const e=(0,_e.Z)();e.dark.set(!0),(0,ke.Z)(Ze);const t=(0,ye.iH)(!1),a=(0,ye.iH)(0),n=(0,ye.iH)("0xAa5c10B4a0e610B8607BCae5aaE454a4657400A6"),o=(0,ye.iH)("0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"),i=(0,ye.iH)(!1),s=(0,ye.iH)(0),r=(0,ye.iH)({}),c=(0,ye.iH)({}),u=(0,ye.iH)("0"),d=(0,ye.iH)([]),m=(0,ye.iH)(!1),p=(0,ye.iH)(0);let f=(0,l.Fl)((()=>r.value[u.value])),w=(0,l.Fl)((()=>{let e=[];for(var t in r.value)r.value.hasOwnProperty(t)&&(r.value[t].end||e.unshift(r.value[t]));return e})),v=(0,l.Fl)((()=>{let e=[];for(var t in c.value)r.value.hasOwnProperty(t)&&e.unshift(r.value[t]);return e})),h=[];function b(){Ie.log("listeners:",h),h&&h.length>0&&h.forEach((e=>{e&&(e.unsubscribe(),Ie.log("unsubscribe:",e))}))}function g(){return Be(this,void 0,void 0,(function*(){const e=yield(0,Ce.v)().web3.eth.net.getId().then((e=>(Ie.log(e),e))).catch((e=>(Ie.log("checkNetwork: ",e),-1)));return e}))}function y(e){return Be(this,void 0,void 0,(function*(){const t=(0,Ce.v)().networks[e].id,a=(0,Ce.v)().networks[e].name,l=(0,Ce.v)().networks[e].tokenName,n=(0,Ce.v)().networks[e].symbol,o=(0,Ce.v)().networks[e].rpcUrl,i=(0,Ce.v)().networks[e].explorer,s="0x"+t.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:s}]}),location.reload()}catch(r){if(Ie.log(r),4902===r.code){Ie.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:s,chainName:a,nativeCurrency:{name:l,symbol:n,decimals:18},rpcUrls:[o],blockExplorerUrls:[i]}]}),location.reload()}catch(c){alert(c.message)}}else alert(r.message)}}))}function _(e){return Be(this,void 0,void 0,(function*(){u.value=e,P(e).then((()=>{m.value=!0,k(r.value[e].price,.05),z(e)}))}))}function k(e,t=0){let a=0;t>0&&(a=e*t,a<1&&(a=1)),p.value=parseFloat((e+a).toFixed(2))}function x(){if(void 0!=u.value){let e=u.value,t=parseFloat(p.value.toString()).toFixed(6).replace(".","");Z(e,t)}}function q(e){const t=JSON.parse(e),a=(0,Ce.v)().web3.utils.toHex(t.properties);let l=10,n=10;for(let o=2;o<14;o++){const e=parseInt(a[o],16);o<8?l+=e:o<14&&(n+=e)}return{level:t.level,color:t.color,quality:l,scale:n/100}}function A(e,t=!1){var a;if(e.removed)return;const l=(0,Ce.v)().web3Instance,n=e.returnValues,o=n.auctionId,i=n.price,s=l.utils.fromWei(i+"000000000000");r.value[o]?(parseFloat(s)>(null===(a=r.value[o])||void 0===a?void 0:a.price)&&(r.value[o].price=parseFloat(s),r.value[o].bidder=n.user),t&&(r.value[o].end=!0)):Ie.log("No AH")}function W(e,t=!1){var a,l;if(e.removed)return;const n=(0,Ce.v)().web3Instance,o=e.returnValues,i=o.auctionId,s=o.uri,u=q(s),d=n.utils.fromWei(o.startingPrice+"000000000000"),m=n.utils.fromWei(o.buyoutPrice+"000000000000");let p={owner:o.owner,bidder:"",auctionId:parseInt(i),nft:parseInt(o.nft),startingPrice:parseFloat(d),buyoutPrice:parseFloat(m),price:parseFloat(d),bids:0,startBlock:parseInt(e.blockNumber),endBlock:parseInt(e.blockNumber)+76800,end:!1,uri:s,level:u.level,color:u.color,quality:u.quality,scale:u.scale};t?c.value[i]=p:(void 0==r.value[i]||!(null===(a=r.value[i])||void 0===a?void 0:a.end)&&(null===(l=r.value[i])||void 0===l?void 0:l.price)<p.price)&&(r.value[i]=p)}function C(e,t){let a=[];e.forEach((e=>{if(!e.removed){const t=(0,Ce.v)().web3Instance,l=e.returnValues,n=l.auctionId,o=t.utils.fromWei(l.price+"000000000000");let i={txhash:e.transactionHash,bidder:l.user,nft:l.nft,auctionId:n,price:parseFloat(o)};a.unshift(i)}})),t==u.value&&(d.value=a)}function I(){return Be(this,void 0,void 0,(function*(){const e=(0,Ce.v)().web3Instance,t=new e.eth.Contract(ze,n.value);e.eth.getBlockNumber().then((function(e){return Be(this,void 0,void 0,(function*(){s.value=e;let a=e-1e5;const l={fromBlock:a};yield t.getPastEvents("FulfillAuction",l).then((function(e){e.forEach((e=>{A(e,!0)}))})).catch((e=>{Ie.error("allAuctionFulfill Error:",e)}))}))}))}))}function B(){return Be(this,void 0,void 0,(function*(){const e=(0,Ce.v)().web3Instance,t=new e.eth.Contract(ze,n.value);e.eth.getBlockNumber().then((function(e){return Be(this,void 0,void 0,(function*(){s.value=e;let a=e-1e5;const l={fromBlock:a};yield t.getPastEvents("Bid",l).then((function(e){e.forEach((e=>{A(e)}))})).catch((e=>{Ie.error("allAuctionBid Error:",e)}))}))}))}))}function z(e){return Be(this,void 0,void 0,(function*(){const t=(0,Ce.v)().web3Instance,a=new t.eth.Contract(ze,n.value);let l=29703714;const o={filter:{auctionId:e},fromBlock:l};yield a.getPastEvents("Bid",o).then((function(t){Ie.log("getBidById Bid events",t),C(t,e),t.forEach((e=>{A(e)}))})).catch((e=>{Ie.error("getBidById Error:",e)}))}))}function U(){return Be(this,void 0,void 0,(function*(){const e=(0,Ce.v)().web3Instance,t=new e.eth.Contract(ze,n.value);e.eth.getBlockNumber().then((function(e){return Be(this,void 0,void 0,(function*(){s.value=e;let a=e-1e5;const l={fromBlock:a};yield t.getPastEvents("CreateAuction",l).then((function(e){e.forEach((e=>{W(e)}))})).catch((e=>{Ie.error("allAuctionCreated Error:",e)}))}))}))}))}function S(){return Be(this,void 0,void 0,(function*(){const e=(0,Ce.v)().web3Instance,t=(0,Ce.v)().account;if(!e.utils.isAddress(t))return void Ie.log("Not Address:",t);const a=new e.eth.Contract(ze,n.value),l={filter:{owner:t},fromBlock:29685023};yield a.getPastEvents("CreateAuction",l).then((function(e){e.forEach((e=>{W(e,!0)}))})).catch((e=>{Ie.error("userAuctionCreated Error:",e)}))}))}function P(e){return Be(this,void 0,void 0,(function*(){const t=(0,Ce.v)().web3Instance,a=new t.eth.Contract(ze,n.value);a.methods.auctionDetail(e).call().then((function(a){const l=e,n=a.uri,o=q(n),i=t.utils.fromWei(a.startingPrice+"000000000000"),s=t.utils.fromWei(a.buyoutPrice+"000000000000"),u=t.utils.fromWei(a.price+"000000000000");let d={owner:a.owner,bidder:a.bidder,auctionId:parseInt(e),nft:parseInt(a.nft),startingPrice:parseFloat(i),buyoutPrice:parseFloat(s),price:parseFloat(u),bids:a.bids,startBlock:parseInt(a.startBlock),endBlock:parseInt(a.endBlock),end:a.end,uri:a.uri,level:o.level,color:o.color,quality:o.quality,scale:o.scale};r.value[l]=d;const m=(0,Ce.v)().account;m.toUpperCase()==a.owner.toUpperCase()&&(c.value[l]=d)})).catch((function(e){Ie.log("getAhById: ",e)}))}))}function Z(e,t){return Be(this,void 0,void 0,(function*(){if(!(0,Ce.v)().web3.utils.isAddress((0,Ce.v)().account))return void alert("Need Connect Wallet!");const a=(0,Ce.v)().web3,l=n.value,o=(0,Ce.v)().account;if(!a.utils.isAddress(o))return void alert("Account is not valid address!");const s=new a.eth.Contract(ze,l);let r=s.methods.bidAuction(e,t),c=r.encodeABI();a.eth.estimateGas({from:o,to:l,value:0,data:c}).then((function(e){Ie.log("gasAmount: ",e),a.eth.sendTransaction({from:o,to:l,value:0,gas:parseInt((1.05*e).toString()),gasPrice:36e9,data:c}).on("transactionHash",(e=>{Ie.log("transactionHash: ",e)})).on("receipt",(e=>{})).on("error",(e=>{Ie.log("tx bidAuctionTx",e)}))})).catch((function(e){Ie.log("estimateGas: ",e);let t=e.message.toString();if(t.includes("exceeds")&&t.includes("allowance"))i.value=!0;else{let e=t.substring(t.indexOf("{"),t.lastIndexOf("}")+1);if(e){let t=JSON.parse(e);alert(t.message)}else alert(t)}}))}))}function D(){return Be(this,void 0,void 0,(function*(){const e=o.value;Ie.log("approveToken");const t=(0,Ce.v)().web3,a="0xffffffffffffffffffffffffffffff",l=new t.eth.Contract(Ue,e);let i=l.methods.approve(n.value,a),s=i.encodeABI();t.eth.estimateGas({from:(0,Ce.v)().account,to:e,value:0,data:s}).then((function(a){Ie.log("gasAmount: ",a),t.eth.sendTransaction({from:(0,Ce.v)().account,to:e,value:0,gas:parseInt((1.05*a).toString()),gasPrice:36e9,data:s}).on("transactionHash",(e=>{Ie.log("transactionHash: ",e)})).on("receipt",(e=>{Ie.log("receipt: ",e)})).on("error",(e=>{Ie.log("tx increaseAllowance ",e)}))})).catch((function(e){alert(e)}))}))}return{currentBlock:s,addAllowance:i,gemColumns:Se,tab:(0,ye.iH)("browse"),browseTab:(0,ye.iH)("browseGems"),allAuctions:r,userAuctions:c,currentAuction:f,allAH:w,userAH:v,bidGem:u,bidGemBids:d,bidGemDetail:m,bidGemPrice:p,netIndex:a,ahContract:n,switchNet:t,bidAuctionTx:Z,approveToken:D,bidSubmit:x,removeListeners:b,getBidById:z,allAuctionFulfill:I,allAuctionBid:B,allAuctionCreated:U,userAuctionCreated:S,getAhById:P,checkNetwork:g,switchNetwork:y,bidClicked:_,setBid:k,shortAddress:xe.sC,copyAddress:xe.c4,linkAddress:xe.ol,getRarity(e){let t="Common",a="C";switch(e){case 4:case 5:case 6:case 7:a="UC";break;case 8:case 9:a="R";break;case 10:a="RR";break;case 11:a="RRR";break;case 12:a="SR";break;case 13:a="HR";break;case 14:a="UR";break;case 15:a="SSR";break;default:break}switch(e){case 4:case 5:case 6:case 7:t="Uncommon";break;case 8:case 9:case 10:case 11:t="Rare";break;case 12:case 13:case 14:case 15:t="Epic";break;default:break}return{rarity:t,short:a}},initGame(){return Be(this,void 0,void 0,(function*(){let e=new URLSearchParams(window.location.search),l=e.get("ref");Ie.log(l||"No Ref");const n=a.value;Pe(n);const o=yield g();if(o!=(0,Ce.v)().networks[n].id)return Ie.log(o,"!=",(0,Ce.v)().networks[n].id),void(t.value=!0);U().then((()=>{B(),I()})),S()}))},initDate(){localStorage.getItem("allAuctions")&&Object.assign(r.value,JSON.parse(localStorage.getItem("allAuctions")||""))},storeData(){localStorage.setItem("allAuctions",JSON.stringify(r.value))}}},beforeMount(){this.initDate(),this.initGame()},beforeUnmount(){this.removeListeners(),this.storeData()}});var He=a(11639),Qe=a(69885),Ve=a(44458),Ee=a(47817),Ne=a(57661),Te=a(50926),$e=a(89800),Ge=a(84106),Re=a(8858),Fe=a(31233),je=a(21682),Oe=a(67220),Le=a(68879),Je=a(22857),Me=a(52765),Ye=a(47128),Ke=a(46858),Xe=a(32074),et=a(63190),tt=a(61357),at=a(90136),lt=a(11821),nt=a(57691),ot=a(66611),it=a(66663),st=a(62146),rt=a(69984),ct=a.n(rt);const ut=(0,He.Z)(De,[["render",ge],["__scopeId","data-v-1abc42d7"]]),dt=ut;ct()(De,"components",{QPage:Qe.Z,QCard:Ve.Z,QTabs:Ee.Z,QTab:Ne.Z,QSeparator:Te.Z,QTabPanels:$e.Z,QTabPanel:Ge.Z,QTable:Re.Z,QTr:Fe.Z,QTh:je.Z,QTd:Oe.Z,QBtn:Le.Z,QIcon:Je.Z,QPopupProxy:Me.Z,QBanner:Ye.Z,QTooltip:Ke.Z,QDialog:Xe.Z,QCardSection:et.Z,QAvatar:tt.Z,QSpace:at.Z,QCardActions:lt.Z,QChip:nt.Z,QInput:ot.Z,QScrollArea:it.Z}),ct()(De,"directives",{ClosePopup:st.Z})}}]);