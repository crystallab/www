"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[939],{17081:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ae});var l=a(59835),n=a(86970);const s={class:"q-pa-md",style:{width:"100%","max-width":"1439px","padding-top":"60px"}},o=(0,l._)("br",null,null,-1),i={class:"q-pa-md col-3 col-md-4 col-sm-6 col-xs-12"},r={class:"q-gutter-x-sm",style:{"z-index":"2"}},u=["src"],d={class:"q-gutter-x-sm",style:{"z-index":"1",position:"absolute",top:"0px",left:"0px"}},c=["src"],m=["href"],p={class:"cursor-pointer"},v={class:"self-center full-width no-outline",tabindex:"0"},w=(0,l._)("div",{class:"self-center full-width no-outline",tabindex:"0"}," LP Token: ",-1),f={class:"self-center full-width no-outline",tabindex:"0"},h=(0,l._)("br",null,null,-1),g=(0,l._)("br",null,null,-1),k={class:"text-center"},b=(0,l._)("br",null,null,-1),_=(0,l._)("br",null,null,-1),y=(0,l._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1),x=(0,l._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1),W=(0,l._)("span",{class:"text-h6 q-ml-sm"},"Transaction",-1),q={class:"q-pa-xs"},I={key:0,class:"text-left"},H=(0,l._)("a",null,[(0,l._)("span",{class:"cursor-pointer"}," Sign transaction with your wallet and we will never touch your private key! ")],-1),S=[H],T={key:1,class:"text-left text-red"},C=["href"],Z={class:"cursor-pointer"},U=(0,l._)("a",null,[(0,l._)("span",{class:"cursor-pointer"}," Transaction is broadcasted, waiting for confirmation. ")],-1),L=(0,l._)("div",null,"Transaction Success!",-1),Q=["href"],F={class:"cursor-pointer"},A=(0,l._)("span",{class:"text-subtitle2 text-secondary q-ml-sm"},"https://crystal.network",-1),z=(0,l.Uk)(" You can invest some of your crypto currency with this game for other players to bet against. This both increases the maximum bets on the game, and you keep any profits made. You also 'keep' any losses. "),P=(0,l.Uk)("If you believe that the potential gains do not outweigh the potential losses, please do not invest."),V=(0,l.Uk)(" Please help advertise the site. The more players we have, the faster your investment will grow. "),E=(0,l.Uk)(" https://crystal.network ");function N(e,t,a,H,N,B){const $=(0,l.up)("q-icon"),D=(0,l.up)("q-btn"),G=(0,l.up)("q-page-sticky"),j=(0,l.up)("q-avatar"),R=(0,l.up)("q-item-section"),M=(0,l.up)("q-item-label"),O=(0,l.up)("q-item"),Y=(0,l.up)("q-chip"),J=(0,l.up)("q-card-section"),K=(0,l.up)("q-separator"),X=(0,l.up)("q-field"),ee=(0,l.up)("q-tab"),te=(0,l.up)("q-tabs"),ae=(0,l.up)("q-input"),le=(0,l.up)("q-btn-group"),ne=(0,l.up)("q-tab-panel"),se=(0,l.up)("q-slider"),oe=(0,l.up)("q-tab-panels"),ie=(0,l.up)("q-card-actions"),re=(0,l.up)("q-card"),ue=(0,l.up)("q-space"),de=(0,l.up)("q-dialog"),ce=(0,l.up)("q-step"),me=(0,l.up)("q-linear-progress"),pe=(0,l.up)("q-stepper"),ve=(0,l.up)("q-expansion-item"),we=(0,l.up)("q-list"),fe=(0,l.up)("BalanceView"),he=(0,l.up)("q-page"),ge=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(he,{class:"row justify-evenly"},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{position:"top-left",offset:[0,0],style:{"z-index":"999"}},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{flat:"","no-caps":"",to:"/"},{default:(0,l.w5)((()=>[(0,l.Wm)($,{name:"las la-angle-double-left"})])),_:1}),(0,l.Wm)(D,{flat:"","no-caps":"",onClick:e.refresh},{default:(0,l.w5)((()=>[(0,l.Wm)($,{name:"las la-sync"})])),_:1},8,["onClick"])])),_:1}),(0,l._)("div",s,[o,(0,l._)("div",i,[(0,l.Wm)(re,{class:"my-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Wm)(R,{avatar:""},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(j,{size:"48px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"tokens/"+e.token+".png"},null,8,u)])),_:1})]),(0,l._)("div",d,[(0,l.Wm)(j,{size:"30px",color:"white"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"chains/"+e.networkName+".svg",style:{width:"60%"}},null,8,c)])),_:1})])])),_:1}),(0,l.Wm)(R,null,{default:(0,l.w5)((()=>[(0,l.Wm)(M,{class:"text-h6"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.gameName),1)])),_:1}),(0,l.Wm)(M,{caption:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{"no-caps":"",size:"10px",flat:"",dense:"",icon:"open_in_new"},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.contract,e.network),target:"_blank",class:"text-white"},[(0,l._)("span",p,(0,n.zw)(e.shortAddress(e.contract)),1)],8,m)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(Y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(j,{color:"orange","text-color":"white",icon:"las la-coins"}),(0,l.Uk)(" "+(0,n.zw)(e.$t("profit"))+" "+(0,n.zw)(e.gameInfo.profitRate.value+"%"),1)])),_:1}),(0,l.Wm)(Y,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("APR"))+" "+(0,n.zw)((365*parseFloat(e.gameInfo.profitRate.value)/e.days).toFixed(2)+"%"),1)])),_:1}),(0,l.Wm)(Y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(j,{color:"red","text-color":"white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.houseEdge+"%"),1)])),_:1}),(0,l.Uk)(" "+(0,n.zw)(e.$t("houseEdge")),1)])),_:1}),(0,l.Wm)(Y,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("rake"))+" "+(0,n.zw)(e.rake+"%"),1)])),_:1})])])),_:1})])),_:1}),(0,l.Wm)(K),(0,l.Wm)(J,{class:"row q-gutter-sm justify-evenly"},{default:(0,l.w5)((()=>[(0,l.Wm)(X,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[(0,l._)("div",v,(0,n.zw)(e.$t("invested"))+": ",1)])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(parseFloat(e.infoStr.userInvested.value).toPrecision(6))+" "+e.token),1)])),_:1}),(0,l.Wm)(X,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[w])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(parseFloat(e.infoStr.userLp.value).toPrecision(6))+" LP"),1)])),_:1}),(0,l.Wm)(X,{outlined:"","stack-label":"",class:"min-width-320"},{control:(0,l.w5)((()=>[(0,l._)("div",f,(0,n.zw)(e.$t("value"))+": ",1)])),append:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat((parseFloat(e.infoStr.userLp.value)*parseFloat(e.infoStr.gameBalanceEth.value)/parseFloat(e.infoStr.gameLpSupplyEth.value)).toPrecision(6))+" "+e.token),1)])),_:1})])),_:1}),(0,l.Wm)(ie,{class:"row",align:"around"},{default:(0,l.w5)((()=>[(0,l.Wm)(te,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey full-width","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"",breakpoint:0},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{name:"invest",label:e.$t("invest")},null,8,["label"]),parseFloat(e.infoStr.userLp.value)>0?((0,l.wg)(),(0,l.j4)(ee,{key:0,name:"divest",label:e.$t("divest")},null,8,["label"])):((0,l.wg)(),(0,l.j4)(ee,{key:1,label:e.$t("divest"),disable:""},null,8,["label"]))])),_:1},8,["modelValue"]),(0,l.Wm)(oe,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=t=>e.tab=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{class:"q-pa-md q-gutter-y-md",name:"invest"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(ae,{filled:"",type:"number",modelValue:e.investInputed,"onUpdate:modelValue":t[1]||(t[1]=t=>e.investInputed=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[2]||(t[2]=t=>e.updateInputs(0)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"fixed-width-100",color:"brown",label:"Token"})])),append:(0,l.w5)((()=>[(0,l.Wm)(D,{flat:"",label:e.token,class:"fixed-width-80"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1}),h,(0,l.Wm)(D,{class:"full-width min-width-320",color:"primary",label:e.$t("invest"),onClick:t[3]||(t[3]=t=>e.investClicked())},null,8,["label"])])),_:1}),(0,l.Wm)(ne,{class:"q-pa-md q-gutter-y-md",name:"divest"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(ae,{filled:"",type:"number",modelValue:e.divestLp,"onUpdate:modelValue":t[4]||(t[4]=t=>e.divestLp=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[5]||(t[5]=t=>e.updateInputs(1)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"fixed-width-100",color:"brown",label:"Liquidity"})])),append:(0,l.w5)((()=>[(0,l.Wm)(D,{flat:"",label:"LP",class:"fixed-width-80"})])),_:1},8,["modelValue"])])),_:1}),g,(0,l._)("div",k,[(0,l.Wm)($,{name:"las la-angle-double-down",color:"primary"})]),(0,l.Wm)(le,{outline:"",class:"min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(ae,{filled:"",type:"number",modelValue:e.divestToken,"onUpdate:modelValue":t[6]||(t[6]=t=>e.divestToken=t),modelModifiers:{number:!0},dense:"",debounce:"200",onChange:t[7]||(t[7]=t=>e.updateInputs(2)),class:"no-padding-left"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"fixed-width-100",color:"brown",label:"Token"})])),append:(0,l.w5)((()=>[(0,l.Wm)(D,{flat:"",label:e.token,class:"fixed-width-80"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(se,{"model-value":e.divestPercent,min:0,max:100,step:1,markers:25,"marker-labels":e=>e+"%",color:"primary",label:"",onChange:t[8]||(t[8]=t=>{e.divestPercent=t,e.updateInputs(3)})},null,8,["model-value","marker-labels"]),b,(0,l.Wm)(D,{class:"full-width min-width-320",color:"primary",label:e.$t("divest"),onClick:t[9]||(t[9]=t=>e.divestClicked())},null,8,["label"]),_])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,l.Wm)(de,{modelValue:e.switchNet,"onUpdate:modelValue":t[11]||(t[11]=t=>e.switchNet=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(re,null,{default:(0,l.w5)((()=>[(0,l.Wm)(J,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),y,(0,l.Wm)(ue),(0,l.wy)((0,l.Wm)(D,{icon:"close",flat:"",round:"",dense:""},null,512),[[ge]])])),_:1}),(0,l.Wm)(J,{class:"row items-center"},{default:(0,l.w5)((()=>[x])),_:1}),(0,l.Wm)(ie,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(D,{class:"full-width",label:"Switch",color:"primary",onClick:e.switchNetwork},null,8,["onClick"]),[[ge]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(de,{modelValue:e.signTx,"onUpdate:modelValue":t[14]||(t[14]=t=>e.signTx=t),position:"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{class:"bg-glass",style:{top:"50px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(J,{class:"q-pa-xs row items-center q-pb-none"},{default:(0,l.w5)((()=>[W,(0,l.Wm)(ue),(0,l.wy)((0,l.Wm)(D,{icon:"close",flat:"",round:"",dense:""},null,512),[[ge]])])),_:1}),(0,l.Wm)(J,{class:"row items-center q-pa-xs"},{default:(0,l.w5)((()=>[(0,l._)("div",q,[(0,l.Wm)(pe,{modelValue:e.txStep,"onUpdate:modelValue":t[13]||(t[13]=t=>e.txStep=t),vertical:"",color:"primary",flat:"",animated:"",class:"bg-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(ce,{name:1,title:"Sign Transaction",icon:"las la-wallet",done:e.txStep>1,error:e.signTxErr.length>0},{default:(0,l.w5)((()=>[""==e.signTxErr?((0,l.wg)(),(0,l.iD)("div",I,S)):((0,l.wg)(),(0,l.iD)("div",T,(0,n.zw)(e.signTxErr),1))])),_:1},8,["done","error"]),(0,l.Wm)(ce,{name:2,title:"Send Transaction",icon:"las la-receipt",done:e.txStep>2},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.signTxHash,e.network,"tx"),target:"_blank",class:"text-grey-6"},[(0,l._)("span",Z,(0,n.zw)(" tx hash: "+e.shortAddress(e.signTxHash,6,!1)),1)],8,C),U,(0,l.Wm)(me,{dark:"",rounded:"",indeterminate:"",color:"secondary",class:"q-mt-sm"})])),_:1},8,["done"]),(0,l.Wm)(ce,{name:3,title:"Success",icon:"las la-trophy"},{default:(0,l.w5)((()=>[L,(0,l._)("a",{href:e.linkAddress(e.signTxHash,e.network,"tx"),target:"_blank",class:"text-grey-6"},[(0,l._)("span",F,(0,n.zw)("tx hash: "+e.shortAddress(e.signTxHash,6,!1)),1)],8,Q),(0,l.Wm)(D,{onClick:t[12]||(t[12]=t=>e.signTx=!1),color:"primary",label:"OK",class:"q-ml-sm full-width",dense:""})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,l.Wm)(J,{class:"q-pa-xs row items-center q-pb-none"},{default:(0,l.w5)((()=>[A])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,l._)("div",null,[(0,l.Wm)(we,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ve,{icon:"las la-hand-holding-usd",label:"Your crypto Bank!","header-class":"text-primary text-h6","default-opened":""},{default:(0,l.w5)((()=>[(0,l.Wm)(re,null,{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[z])),_:1}),(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Although we this game has a "+(0,n.zw)(e.houseEdge)+"% house edge, and in the long run will earn a profit of "+(0,n.zw)(e.houseEdge)+"% of the wagered amount, in the short to medium term we can still lose money. In times when we are lucky, we win many bets and earn a larger-than-expected profit, and in unlucky times we earn less than expected, and can even lose out. This is especially so if someone comes in and makes a large number of massive bets; we can either gain a lot or lose a lot. ",1)])),_:1}),(0,l.Wm)(J,{class:"text-bold"},{default:(0,l.w5)((()=>[P])),_:1})])),_:1})])),_:1}),(0,l.Wm)(ve,{icon:"las la-bullhorn",label:"Help advertise the site!","header-class":"text-primary text-h6","default-opened":""},{default:(0,l.w5)((()=>[(0,l.Wm)(re,null,{default:(0,l.w5)((()=>[(0,l.Wm)(J,{class:"text-bold text-h6"},{default:(0,l.w5)((()=>[V])),_:1}),(0,l.Wm)(J,{class:"text-center text-bold text-h5"},{default:(0,l.w5)((()=>[E])),_:1})])),_:1})])),_:1})])),_:1})]),(0,l.Wm)(fe)])),_:1})}var B=a(60499),$=a(85990),D=a(19302),G=a(65457),j=a(18910),R=a(28488),M=a(37948),O=a(17779),Y=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(l.next(e))}catch(t){s(t)}}function i(e){try{r(l["throw"](e))}catch(t){s(t)}}function r(e){e.done?a(e.value):n(e.value).then(o,i)}r((l=l.apply(e,t||[])).next())}))};const J=a(57841),K={title:"Crystal - Invest"};function X(e){O.log("Switch network: ",(0,$.v)().networks[e].name,(0,$.v)().networks[e].id),(0,$.v)().initWeb3(e)}const ee=(0,l.aZ)({name:"InvestPage",components:{BalanceView:M.Z},setup(){const e=(0,j.yj)(),t=(0,D.Z)();t.dark.set(!0),(0,G.Z)(K);const a=(0,B.iH)(256e5),l=(0,B.iH)(0),n=(0,B.iH)(""),s=(0,B.iH)(""),o=(0,B.iH)("04/04/2022"),i=(0,B.iH)(1),r=(0,B.iH)(""),u=(0,B.iH)(""),d=(0,B.iH)(0),c=(0,B.iH)(0),m=(0,B.iH)(!1),p=(0,B.iH)(!1),v=(0,B.iH)(""),w=(0,B.iH)(""),f=(0,B.iH)(1),h={bets:(0,B.iH)("0"),supply:(0,B.iH)("0"),invested:(0,B.iH)("0"),divisted:(0,B.iH)("0"),balance:(0,B.iH)("0"),profitRate:(0,B.iH)("0")},g={lpBalnce:(0,B.iH)("0"),invested:(0,B.iH)("0")},k={userInvested:(0,B.iH)("0"),userLp:(0,B.iH)("0"),userLpValue:(0,B.iH)("0"),gameBalanceEth:(0,B.iH)("0"),gameLpSupplyEth:(0,B.iH)("0")},b=(0,B.iH)(0),_=(0,B.iH)(0),y=(0,B.iH)(0),x=(0,B.iH)(0),W=(0,$.v)();function q(){return Y(this,void 0,void 0,(function*(){const e=yield(0,$.v)().web3.eth.net.getId().then((e=>(O.log(e),e))).catch((e=>(O.log("checkNetwork: ",e),-1)));return e}))}function I(){return Y(this,void 0,void 0,(function*(){const e=(0,$.v)().networks[l.value].id,t=(0,$.v)().networks[l.value].name,a=(0,$.v)().networks[l.value].tokenName,n=(0,$.v)().networks[l.value].symbol,s=(0,$.v)().networks[l.value].rpcUrl,o=(0,$.v)().networks[l.value].explorer,i="0x"+e.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:i}]}),location.reload()}catch(r){if(O.log(r),4902===r.code){O.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:i,chainName:t,nativeCurrency:{name:a,symbol:n,decimals:18},rpcUrls:[s],blockExplorerUrls:[o]}]}),location.reload()}catch(u){alert(u.message)}}else alert(r.message)}}))}function H(e){return Y(this,void 0,void 0,(function*(){const t=(0,$.v)().web3Instance,a=new t.eth.Contract(J,e);a.methods.gameInfo().call().then((function(e){O.log(e),h.bets.value=e[0],h.supply.value=e[1],h.invested.value=e[2],h.divisted.value=e[3],h.balance.value=e[4];let a=parseFloat(t.utils.fromWei(e[1])),l=parseFloat(t.utils.fromWei(e[2])),n=parseFloat(t.utils.fromWei(e[3])),s=parseFloat(t.utils.fromWei(e[4])),o=s+n-l;o=o<0?0:o;let i=100*o/l;h.profitRate.value=i.toFixed(4),k.gameBalanceEth.value=s.toPrecision(6),k.gameLpSupplyEth.value=a.toPrecision(6)})).catch((function(e){O.log("getGameInfo: ",e)}))}))}function S(e){return Y(this,void 0,void 0,(function*(){const t=(0,$.v)().web3Instance;if(t.utils.isAddress((0,$.v)().accountAddr)){const a=new t.eth.Contract(J,e);a.methods.userDetail((0,$.v)().accountAddr).call().then((function(e){O.log("getUserInfo: ",e),g.invested.value=e.invested,k.userInvested.value=parseFloat(t.utils.fromWei(e.invested)).toPrecision(6)})).catch((function(e){O.log("getUserInfo: ",e)}))}}))}function T(e){return Y(this,void 0,void 0,(function*(){const t=(0,$.v)().web3Instance;if(t.utils.isAddress((0,$.v)().accountAddr)){const a=new t.eth.Contract(J,e);a.methods.balanceOf((0,$.v)().accountAddr).call().then((function(e){O.log("getUserLp: ",e),g.lpBalnce.value=e,k.userLp.value=parseFloat(t.utils.fromWei(e)).toPrecision(6)})).catch((function(e){O.log("getUserLp: ",e)}))}}))}function C(e,t){return Y(this,void 0,void 0,(function*(){if(!(0,$.v)().web3.utils.isAddress((0,$.v)().accountAddr))return void alert("Need Connect Wallet!");const a=yield q();if(a!=(0,$.v)().networks[l.value].id)return O.log(a,"!=",(0,$.v)().networks[l.value].id),void(m.value=!0);const n=(0,$.v)().web3,s=new n.eth.Contract(J,t);O.log("Invest(",t,",",e,")");let o=s.methods.invest(),i=o.encodeABI();n.eth.estimateGas({from:(0,$.v)().account,to:t,value:n.utils.toWei(e.toString(),"ether"),data:i}).then((function(a){O.log("gasAmount: ",a),n.eth.sendTransaction({from:(0,$.v)().account,to:t,value:n.utils.toWei(e.toString(),"ether"),gas:parseInt((1.05*a).toString()),gasPrice:36e9,data:i}).on("transactionHash",(e=>{O.log("transactionHash: ",e),f.value=2,w.value=e})).on("receipt",(e=>{O.log("receipt: ",e),f.value=3,H(t),S(t),T(t)})).on("error",(e=>{O.log("investTx ",e),v.value=e.message,f.value=1}))})).catch((function(e){O.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],l=JSON.parse(a),n=l.message.split(":");v.value=n[0]+": "+n[1]}))}))}function Z(){return Y(this,void 0,void 0,(function*(){let e=b.value;O.log("Invest Clicked: ",e),C(e,r.value),p.value=!0,v.value="",w.value="",f.value=1,b.value=0}))}function U(e,t){return Y(this,void 0,void 0,(function*(){if(!(0,$.v)().web3.utils.isAddress((0,$.v)().accountAddr))return void alert("Need Connect Wallet!");const a=yield q();if(a!=(0,$.v)().networks[l.value].id)return O.log(a,"!=",(0,$.v)().networks[l.value].id),void(m.value=!0);const n=(0,$.v)().web3,s=new n.eth.Contract(J,t);O.log("Divest(",t,",",e,")");let o=s.methods.divest(e),i=o.encodeABI();n.eth.estimateGas({from:(0,$.v)().account,to:t,value:0,data:i}).then((function(e){O.log("gasAmount: ",e),n.eth.sendTransaction({from:(0,$.v)().account,to:t,value:0,gas:parseInt((1.05*e).toString()),gasPrice:36e9,data:i}).on("transactionHash",(e=>{O.log("transactionHash: ",e),f.value=2,w.value=e})).on("receipt",(e=>{O.log("receipt: ",e),f.value=3,H(t),S(t),T(t)})).on("error",(e=>{O.log("divestTx ",e),v.value=e.message,f.value=1}))})).catch((function(e){O.log("estimateGas: ",e);let t=e.message.toString(),a=t.split(".")[1],l=JSON.parse(a),n=l.message.split(":");v.value=n[0]+": "+n[1]}))}))}function L(){return Y(this,void 0,void 0,(function*(){let e=W.web3.utils.toWei(y.value.toFixed(10));_.value>=99.9&&(O.log(g.lpBalnce.value),e=g.lpBalnce.value),O.log("Divest Clicked: ",e),U(e,r.value),p.value=!0,v.value="",w.value="",f.value=1,_.value=0,x.value=0,y.value=0}))}return{tab:(0,B.iH)("invest"),shortAddress:R.sC,copyAddress:R.c4,linkAddress:R.ol,signTx:p,signTxErr:v,signTxHash:w,txStep:f,store:W,network:l,networkName:n,switchNet:m,fromBlock:a,gameName:s,start:o,days:i,contract:r,token:u,houseEdge:d,rake:c,gameInfo:h,userInfo:g,infoStr:k,investInputed:b,divestPercent:_,divestLp:y,divestToken:x,refresh(){O.log("Refresh"),location.reload()},updateInputs(e){(y.value<0||x.value<0)&&(y.value=0,_.value=0);var t=0;2==e?(t=x.value,y.value=x.value*parseFloat(k.gameLpSupplyEth.value)/parseFloat(k.gameBalanceEth.value)):3==e&&(y.value=_.value*parseFloat(k.userLp.value)/100),y.value>parseFloat(k.userLp.value)?(y.value=parseFloat(k.userLp.value),_.value=100,t=0):_.value=100*y.value/parseFloat(k.userLp.value),x.value=2==e&&0!=t?t:y.value*parseFloat(k.gameBalanceEth.value)/parseFloat(k.gameLpSupplyEth.value),1!=e&&(y.value=parseFloat(y.value.toPrecision(6))),2!=e&&(x.value=parseFloat(x.value.toPrecision(6)))},initInvest(){return Y(this,void 0,void 0,(function*(){let t=0;null!=e.query.game?t=parseInt(e.query.game.toString()):O.log("Default game");let a=W.gameList[t];s.value=a.name,l.value=a.networkId,n.value=(0,$.v)().networks[a.networkId].name.toLowerCase(),r.value=a.contract,u.value=a.token,d.value=a.houseEdge,c.value=a.rake,o.value=a.start;let p=new Date(o.value),v=new Date;i.value=Math.round(v.getTime()-p.getTime())/864e5,O.log("Init Invest: ",t),X(a.networkId);const w=yield q();if(w!=(0,$.v)().networks[l.value].id)return O.log(w,"!=",(0,$.v)().networks[l.value].id),void(m.value=!0)}))},checkNetwork:q,switchNetwork:I,investTx:C,investClicked:Z,divestTx:U,divestClicked:L,getGameInfo:H,getUserInfo:S,getUserLp:T}},beforeMount(){this.initInvest(),this.getGameInfo(this.contract),this.getUserInfo(this.contract),this.getUserLp(this.contract)}});var te=a(11639),ae=a(69885),le=a(3388),ne=a(68879),se=a(22857),oe=a(44458),ie=a(63190),re=a(490),ue=a(76749),de=a(61357),ce=a(33115),me=a(57691),pe=a(11821),ve=a(50926),we=a(18149),fe=a(47817),he=a(57661),ge=a(89800),ke=a(84106),be=a(67236),_e=a(66611),ye=a(28423),xe=a(32074),We=a(90136),qe=a(8225),Ie=a(46017),He=a(21992),Se=a(8289),Te=a(13246),Ce=a(50651),Ze=a(8858),Ue=a(62146),Le=a(69984),Qe=a.n(Le);const Fe=(0,te.Z)(ee,[["render",N]]),Ae=Fe;Qe()(ee,"components",{QPage:ae.Z,QPageSticky:le.Z,QBtn:ne.Z,QIcon:se.Z,QCard:oe.Z,QCardSection:ie.Z,QItem:re.Z,QItemSection:ue.Z,QAvatar:de.Z,QItemLabel:ce.Z,QChip:me.Z,QCardActions:pe.Z,QSeparator:ve.Z,QField:we.Z,QTabs:fe.Z,QTab:he.Z,QTabPanels:ge.Z,QTabPanel:ke.Z,QBtnGroup:be.Z,QInput:_e.Z,QSlider:ye.Z,QDialog:xe.Z,QSpace:We.Z,QStepper:qe.Z,QStep:Ie.Z,QStepperNavigation:He.Z,QLinearProgress:Se.Z,QList:Te.Z,QExpansionItem:Ce.Z,QTable:Ze.Z}),Qe()(ee,"directives",{ClosePopup:Ue.Z})}}]);