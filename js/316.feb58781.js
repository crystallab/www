"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[316],{96948:(e,t,a)=>{a.r(t),a.d(t,{default:()=>et});var l=a(59835),n=a(86970);const o=e=>((0,l.dD)("data-v-30993d14"),e=e(),(0,l.Cn)(),e),i={class:"q-pa-md",style:{"max-width":"1439px"}},r=o((()=>(0,l._)("div",{class:"text-shadow text-h6"},"Auction House - Beta",-1))),s=o((()=>(0,l._)("div",{class:"text-h6"},"Under Construction",-1))),c=(0,l.Uk)(" Auction House is coming soon. These data are just samples. "),u={class:"my-table-details",style:{"padding-left":"0px"}},d=["onClick"],m={class:"my-table-details row"},p={class:"text-left inline"},f={style:{display:"flex","flex-wrap":"nowrap"}},w=o((()=>(0,l._)("div",{class:"text-bold"}," Auction is ending soon ",-1))),v={style:{display:"flex","flex-wrap":"nowrap"}},b={key:0,class:"container",style:{"margin-right":"5px"}},h={class:"text-h7"},g=(0,l.Uk)(" Current Price "),y={style:{display:"flex","flex-wrap":"nowrap"}},_={class:"container",style:{"margin-right":"5px"}},k={class:"text-h7 text-grey"},x=(0,l.Uk)(" Buy Out Price "),A={class:"my-table-details text-left text-h7"},q={class:"my-table-details text-left text-h7"},W={class:"my-table-details text-left text-h7"},C=o((()=>(0,l._)("div",{class:"text-h4 q-mb-md"},"Alarms",-1))),I=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),B=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),U=o((()=>(0,l._)("div",{class:"text-h4 q-mb-md"},"Movies",-1))),z=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),S=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),P=o((()=>(0,l._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),Z=o((()=>(0,l._)("div",{class:"text-h6"},"Under Construction",-1))),Q=(0,l.Uk)(" Auction House is coming soon. These data are just samples. "),V=o((()=>(0,l._)("div",{class:"text-h6"},"Under Construction",-1))),D=(0,l.Uk)(" Auction House is coming soon. These data are just samples. "),H={class:"text-shadow"},N=o((()=>(0,l._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1))),T=o((()=>(0,l._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1))),E={class:"gem-detail-box row items-center justify-evenly"},$={key:0,class:"gem-box-text"},R={class:"info text-shadow"},F={class:"row"},G={class:"gem-level q-pr-sm"},j={class:"gem-scale q-pr-sm"},O={class:"gem-quality q-pr-sm"},L={class:"gem-quality text-caption text-grey",style:{"max-width":"200px"}},J=["href"],M={key:0,class:"text-grey"},Y=["href"],K={class:"self-center full-width no-outline text-h6",tabindex:"0"},X=o((()=>(0,l._)("div",{class:"text-h6"},"USDC",-1))),ee={class:"self-center full-width no-outline text-h6",tabindex:"0"},te=o((()=>(0,l._)("div",{class:"text-h6"},"USDC",-1))),ae={class:"self-center full-width no-outline text-h6",tabindex:"0"},le=o((()=>(0,l._)("div",{class:"text-h6"},"USDC",-1))),ne=o((()=>(0,l._)("br",null,null,-1))),oe=["src"],ie=o((()=>(0,l._)("span",{class:"text-h6 q-ml-sm"},"USDC Allowance",-1))),re={class:"q-ml-sm"};function se(e,t,a,o,se,ce){const ue=(0,l.up)("q-tab"),de=(0,l.up)("q-tabs"),me=(0,l.up)("q-separator"),pe=(0,l.up)("q-tab-panel"),fe=(0,l.up)("q-th"),we=(0,l.up)("q-tr"),ve=(0,l.up)("CrystalGem"),be=(0,l.up)("q-td"),he=(0,l.up)("q-icon"),ge=(0,l.up)("q-banner"),ye=(0,l.up)("q-popup-proxy"),_e=(0,l.up)("q-btn"),ke=(0,l.up)("q-tooltip"),xe=(0,l.up)("q-table"),Ae=(0,l.up)("q-tab-panels"),qe=(0,l.up)("q-card"),We=(0,l.up)("nft-menu"),Ce=(0,l.up)("q-avatar"),Ie=(0,l.up)("q-space"),Be=(0,l.up)("q-card-section"),Ue=(0,l.up)("q-card-actions"),ze=(0,l.up)("q-dialog"),Se=(0,l.up)("q-chip"),Pe=(0,l.up)("q-input"),Ze=((0,l.up)("q-scroll-area"),(0,l.up)("BalanceView")),Qe=(0,l.up)("q-page"),Ve=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(Qe,{class:"row items-start justify-center bg-pic",style:{"padding-top":"58px"}},{default:(0,l.w5)((()=>[(0,l._)("div",i,[r,(0,l.Wm)(qe,{class:""},{default:(0,l.w5)((()=>[(0,l.Wm)(de,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{name:"browse",label:"Browse"}),(0,l.Wm)(ue,{name:"bids",label:"Bids"}),(0,l.Wm)(ue,{name:"auctions",label:"Auctions"})])),_:1},8,["modelValue"]),(0,l.Wm)(me),(0,l.Wm)(Ae,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=t=>e.tab=t),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(pe,{name:"overview"},{default:(0,l.w5)((()=>[s,c])),_:1}),(0,l.Wm)(pe,{name:"browse",class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(de,{"narrow-indicator":"",modelValue:e.browseTab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.browseTab=t),class:"text-teal"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{name:"browseGems",icon:"mdi-diamond-stone"}),(0,l.Wm)(ue,{disable:"",name:"browseEquipment",icon:"mdi-sword"}),(0,l.Wm)(ue,{disable:"",name:"browseAvatars",icon:"mdi-account-box-multiple"})])),_:1},8,["modelValue"]),(0,l.Wm)(Ae,{modelValue:e.browseTab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.browseTab=t),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(pe,{name:"browseGems",class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(xe,{dense:"","row-key":"auctionId","rows-per-page-options":[25],rows:e.allAH,columns:e.gemColumns,class:"my-sticky-header-table bg-none text-shadow"},{header:(0,l.w5)((t=>[(0,l.Wm)(we,{props:t},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.cols,(a=>((0,l.wg)(),(0,l.j4)(fe,{key:a.name,props:t,class:"text-primary text-justify"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(""==a.label?"":e.$t("gems."+a.label)),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),"body-cell-nft":(0,l.w5)((t=>[(0,l.Wm)(be,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l._)("div",{onClick:a=>e.bidClicked(t.row.auctionId)},[(0,l.Wm)(ve,{nft:t.row.nft,level:t.row.level,color:t.row.color,quality:t.row.quality,scale:t.row.scale,size:50,owner:!0,names:!0},null,8,["nft","level","color","quality","scale"])],8,d)])])),_:2},1024)])),"body-cell-price":(0,l.w5)((t=>[(0,l.Wm)(be,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l._)("div",p,[(0,l._)("div",f,[t.row.endBlock-e.currentBlock<900?((0,l.wg)(),(0,l.j4)(_e,{key:0,flat:"",dense:"",class:"no-padding",style:{width:"18px","margin-right":"5px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(he,{size:"xs",name:"las la-stopwatch"}),(0,l.Wm)(ye,{anchor:"center start",self:"center end"},{default:(0,l.w5)((()=>[(0,l.Wm)(ge,null,{avatar:(0,l.w5)((()=>[(0,l.Wm)(he,{size:"md",name:"las la-stopwatch",color:"primary"})])),default:(0,l.w5)((()=>[w])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(_e,{size:"xs",align:"left",dense:"",flat:"",onClick:a=>e.bidClicked(t.row.auctionId),style:{"padding-left":"0px"}},{default:(0,l.w5)((()=>[(0,l._)("div",v,[t.row.endBlock-e.currentBlock>=900?((0,l.wg)(),(0,l.iD)("div",b,[(0,l.Wm)(he,{size:"xs",name:"img:tokens/USDC.png"})])):(0,l.kq)("",!0),(0,l._)("div",h,(0,n.zw)(e.$n(t.row.price)),1)]),(0,l.Wm)(ke,{anchor:"center start",self:"center end"},{default:(0,l.w5)((()=>[(0,l.Wm)(he,{name:"mdi-gavel"}),g])),_:1})])),_:2},1032,["onClick"])]),(0,l._)("div",null,[(0,l.Wm)(_e,{align:"left",size:"xs",flat:"",dense:"",onClick:a=>e.bidClicked(t.row.auctionId),style:{"padding-left":"0px"}},{default:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l._)("div",_,[(0,l.Wm)(he,{size:"xs",name:"img:tokens/USDC.png"})]),(0,l._)("div",k,(0,n.zw)(e.$n(t.row.buyoutPrice)),1)]),(0,l.Wm)(ke,{anchor:"center start",self:"center end"},{default:(0,l.w5)((()=>[(0,l.Wm)(he,{name:"mdi-gavel"}),x])),_:1})])),_:2},1032,["onClick"])])])])])),_:2},1024)])),"body-cell-level":(0,l.w5)((e=>[(0,l.Wm)(be,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",A,(0,n.zw)(parseInt(4*e.row.level+10)),1)])),_:2},1024)])),"body-cell-scale":(0,l.w5)((e=>[(0,l.Wm)(be,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",q,(0,n.zw)(parseInt(100*e.row.scale)),1)])),_:2},1024)])),"body-cell-quality":(0,l.w5)((e=>[(0,l.Wm)(be,{class:"top-border"},{default:(0,l.w5)((()=>[(0,l._)("div",W,(0,n.zw)(e.row.quality),1)])),_:2},1024)])),_:1},8,["rows","columns"])])),_:1}),(0,l.Wm)(pe,{name:"browseEquipment"},{default:(0,l.w5)((()=>[C,I,B])),_:1}),(0,l.Wm)(pe,{name:"browseAvatars"},{default:(0,l.w5)((()=>[U,z,S,P])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(pe,{name:"bids"},{default:(0,l.w5)((()=>[Z,Q])),_:1}),(0,l.Wm)(pe,{name:"auctions"},{default:(0,l.w5)((()=>[V,D])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l._)("a",H," Block Number: "+(0,n.zw)(e.currentBlock),1)]),(0,l.Wm)(We),(0,l.Wm)(ze,{modelValue:e.switchNet,"onUpdate:modelValue":t[5]||(t[5]=t=>e.switchNet=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(qe,{class:"bg-glass"},{default:(0,l.w5)((()=>[(0,l.Wm)(Be,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ce,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),N,(0,l.Wm)(Ie),(0,l.wy)((0,l.Wm)(_e,{icon:"close",flat:"",round:"",dense:""},null,512),[[Ve]])])),_:1}),(0,l.Wm)(Be,{class:"row items-center"},{default:(0,l.w5)((()=>[T])),_:1}),(0,l.Wm)(Ue,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(_e,{class:"full-width",label:"Switch",color:"primary",onClick:t[4]||(t[4]=t=>e.switchNetwork(e.netIndex))},null,512),[[Ve]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ze,{modelValue:e.bidGemDetail,"onUpdate:modelValue":t[10]||(t[10]=t=>e.bidGemDetail=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(qe,{dark:"",class:"bg-glass min-width-320"},{default:(0,l.w5)((()=>[(0,l.Wm)(Be,{class:"q-pb-none row"},{default:(0,l.w5)((()=>[(0,l._)("div",E,[(0,l.Wm)(ve,{nft:e.currentAuction.nft,level:e.currentAuction.level,color:e.currentAuction.color,quality:e.currentAuction.quality,scale:e.currentAuction.scale,size:50},null,8,["nft","level","color","quality","scale"]),e.currentAuction.nft>0?((0,l.wg)(),(0,l.iD)("div",$," # "+(0,n.zw)(e.currentAuction.nft),1)):(0,l.kq)("",!0)]),(0,l._)("div",R,[(0,l._)("div",{class:(0,n.C_)(e.getRarity(e.currentAuction.level).rarity+" text-h6")},(0,n.zw)(e.$t("gems.levels."+e.currentAuction.level)+e.$t("gems.names."+e.currentAuction.color)),3),(0,l._)("div",{class:(0,n.C_)(e.getRarity(e.currentAuction.level).rarity)},[(0,l.Uk)((0,n.zw)(e.$t("gems."+e.getRarity(e.currentAuction.level).rarity)+" "+e.$t("gems.gem"))+" ",1),(0,l.Wm)(Se,{dense:""},{default:(0,l.w5)((()=>[(0,l._)("a",{class:(0,n.C_)(e.getRarity(e.currentAuction.level).rarity)},(0,n.zw)(e.getRarity(e.currentAuction.level).short),3)])),_:1})],2),(0,l._)("div",F,[(0,l._)("div",G,(0,n.zw)(e.$t("gems.level")+":")+" "+(0,n.zw)(4*parseInt(e.currentAuction.level)+10),1),(0,l._)("div",j,(0,n.zw)(e.$t("gems.weight")+":")+" "+(0,n.zw)(parseInt(100*e.currentAuction.scale)),1),(0,l._)("div",O,(0,n.zw)(e.$t("gems.quality")+":")+" "+(0,n.zw)(e.currentAuction.quality),1)]),(0,l._)("div",L,(0,n.zw)(e.$t("gems.qualityInfo")),1)])])),_:1}),(0,l.Wm)(Be,{class:"row q-py-none justify-between"},{default:(0,l.w5)((()=>[(0,l._)("a",{href:e.linkAddress(e.currentAuction.owner),target:"_blank",class:"text-grey-6"},[(0,l.Uk)((0,n.zw)(e.$t("auction.owner")+":")+" ",1),(0,l._)("span",null,(0,n.zw)(e.shortAddress(e.currentAuction.owner,6,!0)),1)],8,J),"0x0000000000000000000000000000000000000000"!=e.currentAuction.bidder?((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("a",{href:e.linkAddress(e.currentAuction.bidder),target:"_blank",class:"text-grey-6"},[(0,l.Uk)((0,n.zw)(e.$t("auction.highestBidder")+":")+" ",1),(0,l._)("span",null,(0,n.zw)(e.shortAddress(e.currentAuction.bidder,6,!0)),1)],8,Y)])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(Be,{class:"q-py-xs"},{default:(0,l.w5)((()=>[(0,l.Wm)(Pe,{filled:"",dense:"",readonly:"",color:"purple-12","input-class":"text-right"},{prepend:(0,l.w5)((()=>[(0,l._)("div",K,(0,n.zw)(e.$t("auction.currentPrice")+":"),1)])),append:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)("div",{class:"text-h6 q-pr-sm",onClick:t[6]||(t[6]=t=>e.setBid(e.currentAuction.price,.05)),key:e.currentAuction.price},(0,n.zw)(e.$n(e.currentAuction.price)),1)),(0,l.Wm)(_e,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,l.w5)((()=>[(0,l.Wm)(ye,{anchor:"center end",self:"center start"},{default:(0,l.w5)((()=>[(0,l.Wm)(ge,null,{avatar:(0,l.w5)((()=>[(0,l.Wm)(he,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,l.w5)((()=>[X])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(Pe,{filled:"",dense:"",readonly:"",color:"purple-12","input-class":"text-right",type:"number"},{prepend:(0,l.w5)((()=>[(0,l._)("div",ee,(0,n.zw)(e.$t("auction.buyoutPriceS")+":"),1)])),append:(0,l.w5)((()=>[(0,l._)("div",{class:"text-h6 q-pr-sm",onClick:t[7]||(t[7]=t=>e.setBid(e.currentAuction.buyoutPrice))},(0,n.zw)(e.$n(e.currentAuction.buyoutPrice)),1),(0,l.Wm)(_e,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,l.w5)((()=>[(0,l.Wm)(ye,{anchor:"center end",self:"center start"},{default:(0,l.w5)((()=>[(0,l.Wm)(ge,null,{avatar:(0,l.w5)((()=>[(0,l.Wm)(he,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,l.w5)((()=>[te])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(Pe,{filled:"",color:"purple-12","input-class":"text-right text-h6",type:"number",modelValue:e.bidGemPrice,"onUpdate:modelValue":t[8]||(t[8]=t=>e.bidGemPrice=t)},{prepend:(0,l.w5)((()=>[(0,l._)("div",ae,(0,n.zw)(e.$t("auction.bidPrice")+":"),1)])),append:(0,l.w5)((()=>[(0,l.Wm)(_e,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,l.w5)((()=>[(0,l.Wm)(ye,{anchor:"center end",self:"center start"},{default:(0,l.w5)((()=>[(0,l.Wm)(ge,null,{avatar:(0,l.w5)((()=>[(0,l.Wm)(he,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,l.w5)((()=>[le])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(_e,{unelevated:"",color:"primary",class:"full-width","no-caps":"",onClick:t[9]||(t[9]=t=>e.bidSubmit())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("auction.submit")),1)])),_:1}),ne])),_:1}),(0,l.kq)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ze,{modelValue:e.addAllowance,"onUpdate:modelValue":t[12]||(t[12]=t=>e.addAllowance=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(qe,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Be,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ce,{color:"primary","text-color":"white",size:"md"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"tokens/usdc.png"},null,8,oe)])),_:1}),ie,(0,l.Wm)(Ie),(0,l.wy)((0,l.Wm)(_e,{icon:"close",flat:"",round:"",dense:""},null,512),[[Ve]])])),_:1}),(0,l.Wm)(Be,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l._)("span",re,(0,n.zw)(e.$t("allowanceInfo")),1)])),_:1}),(0,l.Wm)(Ue,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(_e,{class:"full-width",label:e.$t("increase"),color:"primary",onClick:t[11]||(t[11]=t=>e.approveToken())},null,8,["label"]),[[Ve]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(Ze,{modelValue:"usdc"})])),_:1})}var ce=a(60499),ue=a(19302),de=a(65457),me=a(28488),pe=a(9229),fe=a(6783),we=a(68090),ve=a(85990),be=a(17779),he=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,o){function i(e){try{s(l.next(e))}catch(t){o(t)}}function r(e){try{s(l["throw"](e))}catch(t){o(t)}}function s(e){e.done?a(e.value):n(e.value).then(i,r)}s((l=l.apply(e,t||[])).next())}))};const ge=a(89003),ye=a(53310),_e=[{name:"nft",label:"itemName",field:"endBlock",align:"left",sortable:!0,headerStyle:"text-align: center;"},{name:"price",label:"price",field:"price",align:"left",sortable:!0},{name:"level",label:"level",field:"level",align:"left",sortable:!0},{name:"scale",label:"weight",field:"scale",align:"left",sortable:!0},{name:"quality",label:"quality",field:"quality",align:"left",sortable:!0}];function ke(e){be.log("Switch network: ",(0,ve.v)().networks[e].name,(0,ve.v)().networks[e].id),(0,ve.v)().initWeb3(e)}const xe={title:"Crystal - Auction"},Ae=(0,l.aZ)({name:"AuctionPage",components:{NftMenu:pe.Z,CrystalGem:fe.Z,BalanceView:we.Z},setup(){const e=(0,ue.Z)();e.dark.set(!0),(0,de.Z)(xe);const t=(0,ce.iH)(!1),a=(0,ce.iH)(0),n=(0,ce.iH)("0xAa5c10B4a0e610B8607BCae5aaE454a4657400A6"),o=(0,ce.iH)("0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"),i=(0,ce.iH)(!1),r=(0,ce.iH)(0),s=(0,ce.iH)({}),c=(0,ce.iH)({}),u=(0,ce.iH)("0"),d=(0,ce.iH)(!1),m=(0,ce.iH)(0);let p=(0,l.Fl)((()=>s.value[u.value])),f=(0,l.Fl)((()=>{let e=[];for(var t in s.value)s.value.hasOwnProperty(t)&&(s.value[t].end||e.unshift(s.value[t]));return e})),w=(0,l.Fl)((()=>{let e=[];for(var t in c.value)s.value.hasOwnProperty(t)&&e.unshift(s.value[t]);return e})),v=[];function b(){be.log("listeners:",v),v&&v.length>0&&v.forEach((e=>{e&&(e.unsubscribe(),be.log("unsubscribe:",e))}))}function h(){return he(this,void 0,void 0,(function*(){const e=yield(0,ve.v)().web3.eth.net.getId().then((e=>(be.log(e),e))).catch((e=>(be.log("checkNetwork: ",e),-1)));return e}))}function g(e){return he(this,void 0,void 0,(function*(){const t=(0,ve.v)().networks[e].id,a=(0,ve.v)().networks[e].name,l=(0,ve.v)().networks[e].tokenName,n=(0,ve.v)().networks[e].symbol,o=(0,ve.v)().networks[e].rpcUrl,i=(0,ve.v)().networks[e].explorer,r="0x"+t.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]}),location.reload()}catch(s){if(be.log(s),4902===s.code){be.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:r,chainName:a,nativeCurrency:{name:l,symbol:n,decimals:18},rpcUrls:[o],blockExplorerUrls:[i]}]}),location.reload()}catch(c){alert(c.message)}}else alert(s.message)}}))}function y(e){return he(this,void 0,void 0,(function*(){u.value=e,U(e).then((()=>{d.value=!0,_(s.value[e].price,.05)}))}))}function _(e,t=0){let a=0;t>0&&(a=e*t,a<1&&(a=1)),m.value=parseFloat((e+a).toFixed(2))}function k(){if(void 0!=u.value){let e=u.value,t=m.value.toFixed(6).replace(".","");z(e,t)}}function x(e){const t=JSON.parse(e),a=(0,ve.v)().web3.utils.toHex(t.properties);let l=10,n=10;for(let o=2;o<14;o++){const e=parseInt(a[o],16);o<8?l+=e:o<14&&(n+=e)}return{level:t.level,color:t.color,quality:l,scale:n/100}}function A(e,t=!1){if(e.removed)return;const a=(0,ve.v)().web3Instance,l=e.returnValues,n=l.auctionId,o=l.price,i=a.utils.fromWei(o+"000000000000");s.value[n]?(parseFloat(i)>s.value[n].price&&(s.value[n].price=parseFloat(i),s.value[n].bidder=l.user),t&&(s.value[n].end=!0)):be.log("No AH")}function q(e,t=!1){if(e.removed)return;const a=(0,ve.v)().web3Instance,l=e.returnValues,n=l.auctionId,o=l.uri,i=x(o),r=a.utils.fromWei(l.startingPrice+"000000000000"),u=a.utils.fromWei(l.buyoutPrice+"000000000000");let d={owner:l.owner,bidder:"",auctionId:parseInt(n),nft:parseInt(l.nft),startingPrice:parseFloat(r),buyoutPrice:parseFloat(u),price:parseFloat(r),bids:0,startBlock:parseInt(e.blockNumber),endBlock:parseInt(e.blockNumber)+76800,end:!1,uri:o,level:i.level,color:i.color,quality:i.quality,scale:i.scale};t?c.value[n]=d:!s.value[n].end&&s.value[n].price<d.price&&(s.value[n]=d)}function W(){return he(this,void 0,void 0,(function*(){const e=(0,ve.v)().web3Instance,t=new e.eth.Contract(ge,n.value);e.eth.getBlockNumber().then((function(e){return he(this,void 0,void 0,(function*(){r.value=e;let a=e-1e5;const l={fromBlock:a};yield t.getPastEvents("FulfillAuction",l).then((function(e){e.forEach((e=>{A(e,!0)}))})).catch((e=>{be.error("allAuctionFulfill Error:",e)}))}))}))}))}function C(){return he(this,void 0,void 0,(function*(){const e=(0,ve.v)().web3Instance,t=new e.eth.Contract(ge,n.value);e.eth.getBlockNumber().then((function(e){return he(this,void 0,void 0,(function*(){r.value=e;let a=e-1e5;const l={fromBlock:a};yield t.getPastEvents("Bid",l).then((function(e){e.forEach((e=>{A(e)}))})).catch((e=>{be.error("allAuctionBid Error:",e)}))}))}))}))}function I(){return he(this,void 0,void 0,(function*(){const e=(0,ve.v)().web3Instance,t=new e.eth.Contract(ge,n.value);e.eth.getBlockNumber().then((function(e){return he(this,void 0,void 0,(function*(){r.value=e;let a=e-1e5;const l={fromBlock:a};yield t.getPastEvents("CreateAuction",l).then((function(e){e.forEach((e=>{q(e)}))})).catch((e=>{be.error("allAuctionCreated Error:",e)}))}))}))}))}function B(){return he(this,void 0,void 0,(function*(){const e=(0,ve.v)().web3Instance,t=(0,ve.v)().account;if(!e.utils.isAddress(t))return void be.log("Not Address:",t);const a=new e.eth.Contract(ge,n.value),l={filter:{owner:t},fromBlock:29685023};yield a.getPastEvents("CreateAuction",l).then((function(e){e.forEach((e=>{q(e,!0)}))})).catch((e=>{be.error("userAuctionCreated Error:",e)}))}))}function U(e){return he(this,void 0,void 0,(function*(){const t=(0,ve.v)().web3Instance,a=new t.eth.Contract(ge,n.value);a.methods.auctionDetail(e).call().then((function(a){const l=e,n=a.uri,o=x(n),i=t.utils.fromWei(a.startingPrice+"000000000000"),r=t.utils.fromWei(a.buyoutPrice+"000000000000"),u=t.utils.fromWei(a.price+"000000000000");let d={owner:a.owner,bidder:a.bidder,auctionId:parseInt(e),nft:parseInt(a.nft),startingPrice:parseFloat(i),buyoutPrice:parseFloat(r),price:parseFloat(u),bids:a.bids,startBlock:parseInt(a.startBlock),endBlock:parseInt(a.endBlock),end:a.end,uri:a.uri,level:o.level,color:o.color,quality:o.quality,scale:o.scale};s.value[l]=d;const m=(0,ve.v)().account;m.toUpperCase()==a.owner.toUpperCase()&&(c.value[l]=d)})).catch((function(e){be.log("getAhById: ",e)}))}))}function z(e,t){return he(this,void 0,void 0,(function*(){if(!(0,ve.v)().web3.utils.isAddress((0,ve.v)().account))return void alert("Need Connect Wallet!");const a=(0,ve.v)().web3,l=n.value,o=(0,ve.v)().account;if(!a.utils.isAddress(o))return void alert("Account is not valid address!");const r=new a.eth.Contract(ge,l);let s=r.methods.bidAuction(e,t),c=s.encodeABI();a.eth.estimateGas({from:o,to:l,value:0,data:c}).then((function(e){be.log("gasAmount: ",e),a.eth.sendTransaction({from:o,to:l,value:0,gas:parseInt((1.05*e).toString()),gasPrice:36e9,data:c}).on("transactionHash",(e=>{be.log("transactionHash: ",e)})).on("receipt",(e=>{})).on("error",(e=>{be.log("tx bidAuctionTx",e)}))})).catch((function(e){be.log("estimateGas: ",e);let t=e.message.toString();if(t.includes("exceeds")&&t.includes("allowance"))i.value=!0;else{let e=t.substring(t.indexOf("{"),t.lastIndexOf("}")+1);if(e){let t=JSON.parse(e);alert(t.message)}else alert(t)}}))}))}function S(){return he(this,void 0,void 0,(function*(){const e=o.value;be.log("approveToken");const t=(0,ve.v)().web3,a="0xffffffffffffffffffffffffffffff",l=new t.eth.Contract(ye,e);let i=l.methods.approve(n.value,a),r=i.encodeABI();t.eth.estimateGas({from:(0,ve.v)().account,to:e,value:0,data:r}).then((function(a){be.log("gasAmount: ",a),t.eth.sendTransaction({from:(0,ve.v)().account,to:e,value:0,gas:parseInt((1.05*a).toString()),gasPrice:36e9,data:r}).on("transactionHash",(e=>{be.log("transactionHash: ",e)})).on("receipt",(e=>{be.log("receipt: ",e)})).on("error",(e=>{be.log("tx increaseAllowance ",e)}))})).catch((function(e){alert(e)}))}))}return{currentBlock:r,addAllowance:i,gemColumns:_e,tab:(0,ce.iH)("browse"),browseTab:(0,ce.iH)("browseGems"),allAuctions:s,userAuctions:c,currentAuction:p,allAH:f,userAH:w,bidGem:u,bidGemDetail:d,bidGemPrice:m,netIndex:a,ahContract:n,switchNet:t,bidAuctionTx:z,approveToken:S,bidSubmit:k,removeListeners:b,allAuctionFulfill:W,allAuctionBid:C,allAuctionCreated:I,userAuctionCreated:B,getAhById:U,checkNetwork:h,switchNetwork:g,bidClicked:y,setBid:_,shortAddress:me.sC,copyAddress:me.c4,linkAddress:me.ol,getRarity(e){let t="Common",a="C";switch(e){case 4:case 5:case 6:case 7:a="UC";break;case 8:case 9:a="R";break;case 10:a="RR";break;case 11:a="RRR";break;case 12:a="SR";break;case 13:a="HR";break;case 14:a="UR";break;case 15:a="SSR";break;default:break}switch(e){case 4:case 5:case 6:case 7:t="Uncommon";break;case 8:case 9:case 10:case 11:t="Rare";break;case 12:case 13:case 14:case 15:t="Epic";break;default:break}return{rarity:t,short:a}},initGame(){return he(this,void 0,void 0,(function*(){let e=new URLSearchParams(window.location.search),l=e.get("ref");be.log(l||"No Ref");const n=a.value;ke(n);const o=yield h();if(o!=(0,ve.v)().networks[n].id)return be.log(o,"!=",(0,ve.v)().networks[n].id),void(t.value=!0);I().then((()=>{C(),W()})),B()}))},initDate(){localStorage.getItem("allAuctions")&&Object.assign(s.value,JSON.parse(localStorage.getItem("allAuctions")||""))},storeData(){localStorage.setItem("allAuctions",JSON.stringify(s.value))}}},beforeMount(){this.initDate(),this.initGame()},beforeUnmount(){this.removeListeners(),this.storeData()}});var qe=a(11639),We=a(69885),Ce=a(44458),Ie=a(47817),Be=a(57661),Ue=a(50926),ze=a(89800),Se=a(84106),Pe=a(8858),Ze=a(31233),Qe=a(21682),Ve=a(67220),De=a(68879),He=a(22857),Ne=a(52765),Te=a(47128),Ee=a(46858),$e=a(32074),Re=a(63190),Fe=a(61357),Ge=a(90136),je=a(11821),Oe=a(57691),Le=a(66611),Je=a(66663),Me=a(62146),Ye=a(69984),Ke=a.n(Ye);const Xe=(0,qe.Z)(Ae,[["render",se],["__scopeId","data-v-30993d14"]]),et=Xe;Ke()(Ae,"components",{QPage:We.Z,QCard:Ce.Z,QTabs:Ie.Z,QTab:Be.Z,QSeparator:Ue.Z,QTabPanels:ze.Z,QTabPanel:Se.Z,QTable:Pe.Z,QTr:Ze.Z,QTh:Qe.Z,QTd:Ve.Z,QBtn:De.Z,QIcon:He.Z,QPopupProxy:Ne.Z,QBanner:Te.Z,QTooltip:Ee.Z,QDialog:$e.Z,QCardSection:Re.Z,QAvatar:Fe.Z,QSpace:Ge.Z,QCardActions:je.Z,QChip:Oe.Z,QInput:Le.Z,QScrollArea:Je.Z}),Ke()(Ae,"directives",{ClosePopup:Me.Z})}}]);