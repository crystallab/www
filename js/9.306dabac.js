"use strict";(self["webpackChunkcrystal_dapp"]=self["webpackChunkcrystal_dapp"]||[]).push([[9],{56648:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Vt});var a=n(59835),l=n(86970);const o=e=>((0,a.dD)("data-v-30ef60e0"),e=e(),(0,a.Cn)(),e),i={class:"q-pa-md",style:{"max-width":"1439px"}},s={class:"row items-center"},r=o((()=>(0,a._)("div",{class:"text-shadow text-h6"},"Auction House - Beta",-1))),c=o((()=>(0,a._)("div",{class:"text-h6"},"Under Construction",-1))),u=(0,a.Uk)(" Auction House is coming soon. These data are just samples. "),d={class:"my-table-details",style:{"padding-left":"0px"}},m=["onClick"],f={class:"my-table-details row"},p={class:"text-left inline"},v={style:{display:"flex","flex-wrap":"nowrap"}},w=o((()=>(0,a._)("div",{class:"text-bold"}," Auction is ending soon ",-1))),g={style:{display:"flex","flex-wrap":"nowrap"}},h={key:0,class:"container",style:{"margin-right":"5px"}},b={class:"text-h7"},k=(0,a.Uk)(" Current Price "),y={key:0},_={style:{display:"flex","flex-wrap":"nowrap"}},x={class:"container",style:{"margin-right":"5px"}},A={class:"text-h7 text-grey"},C=(0,a.Uk)(" Buy Out Price "),W={class:"my-table-details text-left text-h7"},q={class:"my-table-details text-left text-h7"},I={class:"my-table-details text-left text-h7"},B=o((()=>(0,a._)("div",{class:"text-h4 q-mb-md"},"Alarms",-1))),S=o((()=>(0,a._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),z=o((()=>(0,a._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),U=o((()=>(0,a._)("div",{class:"text-h4 q-mb-md"},"Movies",-1))),N=o((()=>(0,a._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),D=o((()=>(0,a._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),H=o((()=>(0,a._)("p",null," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero. ",-1))),P=o((()=>(0,a._)("div",{class:"text-h6"},"Under Construction",-1))),E=(0,a.Uk)(" Auction House is coming soon. These data are just samples. "),F=o((()=>(0,a._)("div",null,null,-1))),T={key:0},Z={key:1},Q=(0,a.Uk)(" Register "),V={key:1,lines:"1"},G={key:2,lines:"2"},$=(0,a.Uk)(" Upgrade "),L={key:0,class:"text-h6"},R=["onClick"],j={class:"q-pr-xs cursor-pointer"},O=o((()=>(0,a._)("span",{class:"text-grey-8"},"Bids:",-1))),J={class:"text-weight-medium q-pr-xs"},M={lines:"1",class:"text-primary q-gutter-xs"},K=(0,a.Uk)(" Share "),Y=(0,a.Uk)(" Link Copied "),X={lines:"2",class:"text-primary q-gutter-xs"},ee=(0,a.Uk)(" FulFill "),te=(0,a.Uk)(" Cancel "),ne={class:"text-shadow"},ae=o((()=>(0,a._)("span",{class:"text-h6 q-ml-sm"},"Incorrect blockchain",-1))),le=o((()=>(0,a._)("span",{class:"q-ml-sm"},"You are currently not connected to the correct network.",-1))),oe={class:"gem-detail-box row items-center justify-evenly"},ie={key:0,class:"gem-box-text"},se={class:"info text-shadow"},re={class:"row"},ce={class:"gem-level q-pr-sm"},ue={class:"gem-scale q-pr-sm"},de={class:"gem-quality q-pr-sm"},me={class:"gem-quality text-caption text-grey",style:{"max-width":"200px"}},fe={key:0},pe={key:0},ve={key:1},we=(0,a.Uk)(" Auction Closing Time "),ge=(0,a.Uk)(" Share "),he=(0,a.Uk)(" Link Copied "),be=["href"],ke={key:0,class:"text-grey"},ye=["href"],_e={class:"self-center full-width no-outline text-h6",tabindex:"0"},xe=o((()=>(0,a._)("div",{class:"text-h6"},"USDC",-1))),Ae={class:"self-center full-width no-outline text-h6",tabindex:"0"},Ce=o((()=>(0,a._)("div",{class:"text-h6"},"USDC",-1))),We={class:"self-center full-width no-outline text-h6",tabindex:"0"},qe=o((()=>(0,a._)("div",{class:"text-h6"},"USDC",-1))),Ie=o((()=>(0,a._)("br",null,null,-1))),Be={class:"event-view row justify-between",style:{"align-items":"baseline",display:"flex","flex-wrap":"wrap-reverse"}},Se={class:"row"},ze={class:"USER q-pr-xs",style:{"margin-top":"0px"}},Ue=["href"],Ne=o((()=>(0,a._)("i",{class:"las la-user"},null,-1))),De={class:"tx q-pr-xs",style:{"margin-top":"0px"}},He=["href"],Pe=o((()=>(0,a._)("i",{class:"las la-file-alt"},null,-1))),Ee={class:(0,l.C_)(""),style:{display:"flex","align-items":"center"}},Fe=o((()=>(0,a._)("div",{class:"event text-bold q-mr-sm"},[(0,a._)("a",null,(0,l.zw)("Bid:"))],-1))),Te={class:"event text-h6"},Ze=["src"],Qe=o((()=>(0,a._)("span",{class:"text-h6 q-ml-sm"},"USDC Allowance",-1))),Ve={class:"q-ml-sm"};function Ge(e,t,n,o,Ge,$e){const Le=(0,a.up)("q-btn"),Re=(0,a.up)("q-tab"),je=(0,a.up)("q-tabs"),Oe=(0,a.up)("q-separator"),Je=(0,a.up)("q-tab-panel"),Me=(0,a.up)("q-th"),Ke=(0,a.up)("q-tr"),Ye=(0,a.up)("CrystalGem"),Xe=(0,a.up)("q-td"),et=(0,a.up)("q-icon"),tt=(0,a.up)("q-banner"),nt=(0,a.up)("q-popup-proxy"),at=(0,a.up)("q-tooltip"),lt=(0,a.up)("q-table"),ot=(0,a.up)("q-tab-panels"),it=(0,a.up)("q-item-section"),st=(0,a.up)("q-item"),rt=(0,a.up)("q-item-label"),ct=(0,a.up)("q-list"),ut=(0,a.up)("q-card"),dt=(0,a.up)("nft-menu"),mt=(0,a.up)("q-avatar"),ft=(0,a.up)("q-space"),pt=(0,a.up)("q-card-section"),vt=(0,a.up)("q-card-actions"),wt=(0,a.up)("q-dialog"),gt=(0,a.up)("q-chip"),ht=(0,a.up)("q-input"),bt=(0,a.up)("q-scroll-area"),kt=(0,a.up)("BalanceView"),yt=(0,a.up)("q-page"),_t=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(yt,{class:"row items-start justify-center bg-pic",style:{"padding-top":"68px"}},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",s,[r,(0,a._)("div",null,[(0,a.Wm)(Le,{size:"12px",flat:"",dense:"","icon-right":"refresh","no-caps":"",onClick:t[0]||(t[0]=t=>e.reloadData())})])]),(0,a.Wm)(ut,{class:""},{default:(0,a.w5)((()=>[(0,a.Wm)(je,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:(0,a.w5)((()=>[(0,a.Wm)(Re,{name:"browse",label:"Browse"}),(0,a.Wm)(Re,{name:"bids",label:"Bids"}),(0,a.Wm)(Re,{name:"auctions",label:"Auctions"})])),_:1},8,["modelValue"]),(0,a.Wm)(Oe),(0,a.Wm)(ot,{modelValue:e.tab,"onUpdate:modelValue":t[7]||(t[7]=t=>e.tab=t),animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Je,{name:"overview"},{default:(0,a.w5)((()=>[c,u])),_:1}),(0,a.Wm)(Je,{name:"browse",class:"q-pa-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(je,{"narrow-indicator":"",modelValue:e.browseTab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.browseTab=t),class:"text-teal"},{default:(0,a.w5)((()=>[(0,a.Wm)(Re,{name:"browseGems",icon:"mdi-diamond-stone"}),(0,a.Wm)(Re,{disable:"",name:"browseEquipment",icon:"mdi-sword"}),(0,a.Wm)(Re,{disable:"",name:"browseAvatars",icon:"mdi-account-box-multiple"})])),_:1},8,["modelValue"]),(0,a.Wm)(ot,{modelValue:e.browseTab,"onUpdate:modelValue":t[3]||(t[3]=t=>e.browseTab=t),animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Je,{name:"browseGems",class:"no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(lt,{dense:"","row-key":"auctionId","rows-per-page-options":[25],rows:e.allAH,columns:e.gemColumns,class:"my-sticky-header-table bg-none text-shadow"},{header:(0,a.w5)((t=>[(0,a.Wm)(Ke,{props:t},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.cols,(n=>((0,a.wg)(),(0,a.j4)(Me,{key:n.name,props:t,class:"text-primary text-justify"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(""==n.label?"":e.$t("gems."+n.label)),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),"body-cell-nft":(0,a.w5)((t=>[(0,a.Wm)(Xe,{class:"top-border"},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",{onClick:n=>e.bidClicked(t.row.auctionId)},[(0,a.Wm)(Ye,{nft:t.row.nft,level:t.row.level,color:t.row.color,quality:t.row.quality,scale:t.row.scale,size:50,names:!0},null,8,["nft","level","color","quality","scale"])],8,m)])])),_:2},1024)])),"body-cell-price":(0,a.w5)((t=>[(0,a.Wm)(Xe,{class:"top-border"},{default:(0,a.w5)((()=>[(0,a._)("div",f,[(0,a._)("div",p,[(0,a._)("div",v,[t.row.endBlock-e.currentBlock<900?((0,a.wg)(),(0,a.j4)(Le,{key:0,flat:"",dense:"",class:"no-padding",style:{width:"18px","margin-right":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(et,{size:"xs",name:"las la-stopwatch"}),(0,a.Wm)(nt,{anchor:"center start",self:"center end"},{default:(0,a.w5)((()=>[(0,a.Wm)(tt,null,{avatar:(0,a.w5)((()=>[(0,a.Wm)(et,{size:"md",name:"las la-stopwatch",color:"primary"})])),default:(0,a.w5)((()=>[w])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(Le,{size:"xs",align:"left",dense:"",flat:"",onClick:n=>e.bidClicked(t.row.auctionId),style:{"padding-left":"0px"}},{default:(0,a.w5)((()=>[(0,a._)("div",g,[t.row.endBlock-e.currentBlock>=900?((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(et,{size:"xs",name:"img:tokens/USDC.png"})])):(0,a.kq)("",!0),(0,a._)("div",b,(0,l.zw)(e.$n(e.shortNumStr(t.row.price).short))+" "+(0,l.zw)(e.shortNumStr(t.row.price).unit),1)]),(0,a.Wm)(at,{anchor:"center start",self:"center end"},{default:(0,a.w5)((()=>[(0,a.Wm)(et,{name:"mdi-gavel"}),k])),_:1})])),_:2},1032,["onClick"])]),t.row.buyoutPrice/t.row.price<1e4?((0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(Le,{align:"left",size:"xs",flat:"",dense:"",onClick:n=>e.bidClicked(t.row.auctionId),style:{"padding-left":"0px"}},{default:(0,a.w5)((()=>[(0,a._)("div",_,[(0,a._)("div",x,[(0,a.Wm)(et,{size:"xs",name:"img:tokens/USDC.png"})]),(0,a._)("div",A,(0,l.zw)(e.$n(e.shortNumStr(t.row.buyoutPrice).short))+" "+(0,l.zw)(e.shortNumStr(t.row.buyoutPrice).unit),1)]),(0,a.Wm)(at,{anchor:"center start",self:"center end"},{default:(0,a.w5)((()=>[(0,a.Wm)(et,{name:"mdi-gavel"}),C])),_:1})])),_:2},1032,["onClick"])])):(0,a.kq)("",!0)])])])),_:2},1024)])),"body-cell-level":(0,a.w5)((e=>[(0,a.Wm)(Xe,{class:"top-border"},{default:(0,a.w5)((()=>[(0,a._)("div",W,(0,l.zw)(parseInt(4*e.row.level+10)),1)])),_:2},1024)])),"body-cell-scale":(0,a.w5)((e=>[(0,a.Wm)(Xe,{class:"top-border"},{default:(0,a.w5)((()=>[(0,a._)("div",q,(0,l.zw)(parseInt(100*e.row.scale)),1)])),_:2},1024)])),"body-cell-quality":(0,a.w5)((e=>[(0,a.Wm)(Xe,{class:"top-border"},{default:(0,a.w5)((()=>[(0,a._)("div",I,(0,l.zw)(e.row.quality),1)])),_:2},1024)])),_:1},8,["rows","columns"])])),_:1}),(0,a.Wm)(Je,{name:"browseEquipment"},{default:(0,a.w5)((()=>[B,S,z])),_:1}),(0,a.Wm)(Je,{name:"browseAvatars"},{default:(0,a.w5)((()=>[U,N,D,H])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(Je,{name:"bids"},{default:(0,a.w5)((()=>[P,E,F])),_:1}),(0,a.Wm)(Je,{name:"auctions",class:"min-width-320 q-pa-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(st,null,{default:(0,a.w5)((()=>[(0,a.Wm)(it,{avatar:"",class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.userListing.length)+"/"+(0,l.zw)(e.userListSpace),1)])),_:1}),(0,a.Wm)(it,{class:"q-pr-none text-right justify-end"},{default:(0,a.w5)((()=>[0==parseInt(e.memberInfo.name)?((0,a.wg)(),(0,a.iD)("div",T," Register to get more listing space ")):((0,a.wg)(),(0,a.iD)("div",Z,"Upgrade to get more listing space"))])),_:1}),(0,a.Wm)(it,{side:""},{default:(0,a.w5)((()=>[0==parseInt(e.memberInfo.name)?((0,a.wg)(),(0,a.j4)(Le,{key:0,color:"primary",size:"12px",icon:"las la-user","no-caps":"",onClick:t[4]||(t[4]=t=>e.registerClick())},{default:(0,a.w5)((()=>[Q])),_:1})):(0,a.kq)("",!0),parseInt(e.memberInfo.name)>0?((0,a.wg)(),(0,a.iD)("div",V,[(0,a.Wm)(Le,{class:"full-width",color:"primary",flat:"",size:"12px",icon:"las la-gem","no-caps":"",dense:"",onClick:t[5]||(t[5]=t=>e.upgradeClick())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.$n(e.shortNumStr(e.upgradeFee).short))+" "+(0,l.zw)(e.shortNumStr(e.upgradeFee).unit),1)])),_:1})])):(0,a.kq)("",!0),parseInt(e.memberInfo.name)>0?((0,a.wg)(),(0,a.iD)("div",G,[(0,a.Wm)(Le,{class:"full-width",color:"primary",size:"12px","no-caps":"",onClick:t[6]||(t[6]=t=>e.upgradeClick())},{default:(0,a.w5)((()=>[$])),_:1})])):(0,a.kq)("",!0)])),_:1})])),_:1}),void 0==e.userListing[0]?((0,a.wg)(),(0,a.iD)("div",L," No Auctions ")):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(e.userListing,(t=>((0,a.wg)(),(0,a.j4)(ct,{class:"q-pa-none",style:{"max-width":"600px"},key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(Oe,{spaced:"0px",inset:""}),e.userAuctions[t]?((0,a.wg)(),(0,a.j4)(st,{key:0,class:"q-pl-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(it,{avatar:""},{default:(0,a.w5)((()=>[(0,a._)("div",{onClick:n=>e.bidClicked(t,!0)},[(0,a.Wm)(Ye,{nft:e.userAuctions[t].nft,level:e.userAuctions[t].level,color:e.userAuctions[t].color,quality:e.userAuctions[t].quality,scale:e.userAuctions[t].scale,size:50,names:!0,namesFixed:!0},null,8,["nft","level","color","quality","scale"])],8,R)])),_:2},1024),(0,a.Wm)(it,{class:"q-pr-none text-right justify-end"},{default:(0,a.w5)((()=>[(0,a.Wm)(rt,{lines:"1"},{default:(0,a.w5)((()=>[(0,a._)("span",j,(0,l.zw)(e.$n(e.shortNumStr(e.userAuctions[t].price).short))+" "+(0,l.zw)(e.shortNumStr(e.userAuctions[t].price).unit),1),(0,a.Wm)(et,{size:"xs",name:"img:tokens/USDC.png"})])),_:2},1024),(0,a.Wm)(rt,{caption:"",lines:"2"},{default:(0,a.w5)((()=>[O,(0,a._)("span",J,(0,l.zw)(e.userAuctions[t].bids),1),(0,a.Wm)(et,{size:"xs",name:"las la-gavel"})])),_:2},1024)])),_:2},1024),(0,a.Wm)(it,{side:""},{default:(0,a.w5)((()=>[(0,a._)("div",M,[(0,a.Wm)(Le,{size:"12px",flat:"",dense:"","icon-right":"share","no-caps":"",onClick:n=>e.copyAddress("https://Crystal.Network/auction?id="+(t||"1"))},{default:(0,a.w5)((()=>[K,(0,a.Wm)(nt,null,{default:(0,a.w5)((()=>[(0,a.Wm)(tt,null,{avatar:(0,a.w5)((()=>[(0,a.Wm)(et,{name:"check",color:"primary"})])),default:(0,a.w5)((()=>[Y])),_:1})])),_:1})])),_:2},1032,["onClick"])]),(0,a._)("div",X,[e.userAuctions[t].endBlock<e.currentBlock&&!e.userAuctions[t].end?((0,a.wg)(),(0,a.j4)(Le,{key:0,size:"12px",color:"primary",glossy:"",dense:"","icon-right":"las la-coins","no-caps":"",onClick:n=>e.fulfillAuctionTx(t)},{default:(0,a.w5)((()=>[ee])),_:2},1032,["onClick"])):(0,a.kq)("",!0),0==e.userAuctions[t].bids?((0,a.wg)(),(0,a.j4)(Le,{key:1,size:"12px",flat:"",dense:"","icon-right":"delete","no-caps":"",onClick:n=>e.cancelAuctionTx(t)},{default:(0,a.w5)((()=>[te])),_:2},1032,["onClick"])):(0,a.kq)("",!0)])])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a._)("a",ne," Block Number: "+(0,l.zw)(e.currentBlock),1)]),(0,a.Wm)(dt),(0,a.Wm)(wt,{modelValue:e.switchNet,"onUpdate:modelValue":t[9]||(t[9]=t=>e.switchNet=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ut,{class:"bg-glass"},{default:(0,a.w5)((()=>[(0,a.Wm)(pt,{class:"row items-center q-pb-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(mt,{icon:"signal_wifi_off",color:"primary","text-color":"white",size:"xs"}),ae,(0,a.Wm)(ft),(0,a.wy)((0,a.Wm)(Le,{icon:"close",flat:"",round:"",dense:""},null,512),[[_t]])])),_:1}),(0,a.Wm)(pt,{class:"row items-center"},{default:(0,a.w5)((()=>[le])),_:1}),(0,a.Wm)(vt,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(Le,{class:"full-width",label:"Switch",color:"primary",onClick:t[8]||(t[8]=t=>e.switchNetwork(e.netIndex))},null,512),[[_t]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(wt,{modelValue:e.bidGemDetail,"onUpdate:modelValue":t[16]||(t[16]=t=>e.bidGemDetail=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(ut,{dark:"",class:"bg-glass min-width-320"},{default:(0,a.w5)((()=>[(0,a.Wm)(pt,{class:"q-pb-none row"},{default:(0,a.w5)((()=>[(0,a._)("div",oe,[(0,a.Wm)(Ye,{nft:e.currentAuction.nft,level:e.currentAuction.level,color:e.currentAuction.color,quality:e.currentAuction.quality,scale:e.currentAuction.scale,size:50},null,8,["nft","level","color","quality","scale"]),e.currentAuction.nft>0?((0,a.wg)(),(0,a.iD)("div",ie," # "+(0,l.zw)(e.currentAuction.nft),1)):(0,a.kq)("",!0)]),(0,a._)("div",se,[(0,a._)("div",{class:(0,l.C_)(e.getRarity(e.currentAuction.level).rarity+" text-h6")},(0,l.zw)(e.$t("gems.levels."+e.currentAuction.level)+e.$t("gems.names."+e.currentAuction.color)),3),(0,a._)("div",{class:(0,l.C_)(e.getRarity(e.currentAuction.level).rarity)},[(0,a.Uk)((0,l.zw)(e.$t("gems."+e.getRarity(e.currentAuction.level).rarity)+" "+e.$t("gems.gem"))+" ",1),(0,a.Wm)(gt,{dense:""},{default:(0,a.w5)((()=>[(0,a._)("a",{class:(0,l.C_)(e.getRarity(e.currentAuction.level).rarity)},(0,l.zw)(e.getRarity(e.currentAuction.level).short),3)])),_:1})],2),(0,a._)("div",re,[(0,a._)("div",ce,(0,l.zw)(e.$t("gems.level")+":")+" "+(0,l.zw)(4*parseInt(e.currentAuction.level)+10),1),(0,a._)("div",ue,(0,l.zw)(e.$t("gems.weight")+":")+" "+(0,l.zw)(parseInt(100*e.currentAuction.scale)),1),(0,a._)("div",de,(0,l.zw)(e.$t("gems.quality")+":")+" "+(0,l.zw)(e.currentAuction.quality),1)]),(0,a._)("div",me,(0,l.zw)(e.$t("gems.qualityInfo")),1)])])),_:1}),(0,a.Wm)(pt,{class:"q-py-none row justify-end"},{default:(0,a.w5)((()=>[e.currentAuction.endBlock>e.currentBlock?((0,a.wg)(),(0,a.iD)("div",fe,[(0,a.Wm)(Le,{size:"12px",flat:"",dense:"","icon-right":"las la-clock","no-caps":"",onClick:t[10]||(t[10]=t=>e.getBlockNum())},{default:(0,a.w5)((()=>[e.currentAuction.endBlock>e.currentBlock+1800?((0,a.wg)(),(0,a.iD)("div",pe," End in "+(0,l.zw)(parseInt(2.25*(e.currentAuction.endBlock-e.currentBlock)/3600))+" Hours ",1)):((0,a.wg)(),(0,a.iD)("div",ve,"End Soon")),(0,a.Wm)(nt,null,{default:(0,a.w5)((()=>[(0,a.Wm)(tt,null,{avatar:(0,a.w5)((()=>[(0,a.Wm)(et,{name:"las la-clock",color:"primary"})])),default:(0,a.w5)((()=>[we])),_:1})])),_:1})])),_:1})])):(0,a.kq)("",!0),(0,a.Wm)(Le,{size:"12px",flat:"",dense:"","icon-right":"share","no-caps":"",onClick:t[11]||(t[11]=t=>e.copyAddress("https://Crystal.Network/auction?id="+(e.currentAuction.auctionId||"1")))},{default:(0,a.w5)((()=>[ge,(0,a.Wm)(nt,null,{default:(0,a.w5)((()=>[(0,a.Wm)(tt,null,{avatar:(0,a.w5)((()=>[(0,a.Wm)(et,{name:"check",color:"primary"})])),default:(0,a.w5)((()=>[he])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(pt,{class:"row q-py-none justify-between"},{default:(0,a.w5)((()=>[(0,a._)("a",{href:e.linkAddress(e.currentAuction.owner),target:"_blank",class:"text-grey-6"},[(0,a.Uk)(" #AH"+(0,l.zw)(e.currentAuction.auctionId)+" "+(0,l.zw)(e.$t("auction.owner")+":")+" ",1),(0,a._)("span",null,(0,l.zw)(e.shortAddress(e.currentAuction.owner,6,!0)),1)],8,be),"0x0000000000000000000000000000000000000000"!=e.currentAuction.bidder?((0,a.wg)(),(0,a.iD)("div",ke,[(0,a._)("a",{href:e.linkAddress(e.currentAuction.bidder),target:"_blank",class:"text-grey-6"},[(0,a.Uk)((0,l.zw)(e.$t("auction.highestBidder")+":")+" ",1),(0,a._)("span",null,(0,l.zw)(e.shortAddress(e.currentAuction.bidder,6,!0)),1)],8,ye)])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(pt,{class:"q-py-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(ht,{filled:"",dense:"",readonly:"",color:"purple-12","input-class":"text-right"},{prepend:(0,a.w5)((()=>[(0,a._)("div",_e,(0,l.zw)(e.$t("auction.currentPrice")+":"),1)])),append:(0,a.w5)((()=>[((0,a.wg)(),(0,a.iD)("div",{class:"text-h6 q-pr-sm",onClick:t[12]||(t[12]=t=>e.setBid(e.currentAuction.price,.05)),key:e.currentAuction.price},(0,l.zw)(e.$n(e.currentAuction.price)),1)),(0,a.Wm)(Le,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,a.w5)((()=>[(0,a.Wm)(nt,{anchor:"center end",self:"center start"},{default:(0,a.w5)((()=>[(0,a.Wm)(tt,null,{avatar:(0,a.w5)((()=>[(0,a.Wm)(et,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,a.w5)((()=>[xe])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(ht,{filled:"",dense:"",readonly:"",color:"purple-12","input-class":"text-right",type:"number"},{prepend:(0,a.w5)((()=>[(0,a._)("div",Ae,(0,l.zw)(e.$t("auction.buyoutPriceS")+":"),1)])),append:(0,a.w5)((()=>[(0,a._)("div",{class:"text-h6 q-pr-sm",onClick:t[13]||(t[13]=t=>e.setBid(e.currentAuction.buyoutPrice))},(0,l.zw)(e.$n(e.currentAuction.buyoutPrice)),1),(0,a.Wm)(Le,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,a.w5)((()=>[(0,a.Wm)(nt,{anchor:"center end",self:"center start"},{default:(0,a.w5)((()=>[(0,a.Wm)(tt,null,{avatar:(0,a.w5)((()=>[(0,a.Wm)(et,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,a.w5)((()=>[Ce])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(ht,{filled:"",color:"purple-12","input-class":"text-right text-h6",type:"number",modelValue:e.bidGemPrice,"onUpdate:modelValue":t[14]||(t[14]=t=>e.bidGemPrice=t)},{prepend:(0,a.w5)((()=>[(0,a._)("div",We,(0,l.zw)(e.$t("auction.bidPrice")+":"),1)])),append:(0,a.w5)((()=>[(0,a.Wm)(Le,{round:"",dense:"",flat:"",icon:"img:tokens/USDC.png"},{default:(0,a.w5)((()=>[(0,a.Wm)(nt,{anchor:"center end",self:"center start"},{default:(0,a.w5)((()=>[(0,a.Wm)(tt,null,{avatar:(0,a.w5)((()=>[(0,a.Wm)(et,{size:"md",name:"img:tokens/USDC.png",color:"primary"})])),default:(0,a.w5)((()=>[qe])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(Le,{unelevated:"",color:"primary",class:"full-width","no-caps":"",onClick:t[15]||(t[15]=t=>e.bidSubmit())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.$t("auction.submit")),1)])),_:1}),Ie])),_:1}),(0,a.Wm)(pt,null,{default:(0,a.w5)((()=>[e.bidGemBids[0]?((0,a.wg)(),(0,a.j4)(bt,{key:0,visible:"",class:"full-width",style:{height:"96px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.bidGemBids,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"q-gutter-md"},[(0,a._)("div",Be,[(0,a._)("div",Se,[(0,a._)("div",ze,[(0,a._)("a",{class:"text-grey",href:"https://polygonscan.com/address/"+t.bidder,target:"_blank",rel:"noopener noreferrer"},[Ne,(0,a.Uk)(" "+(0,l.zw)(e.shortAddress(t.bidder,6,!0)),1)],8,Ue)]),(0,a._)("div",De,[(0,a._)("a",{class:"text-grey",href:"https://polygonscan.com/address/tx/"+t.txhash,target:"_blank",rel:"noopener noreferrer"},[Pe,(0,a.Uk)(" "+(0,l.zw)(e.shortAddress(t.txhash,4,!0)),1)],8,He)])]),(0,a._)("div",Ee,[Fe,(0,a._)("div",Te,(0,l.zw)(e.$n(t.price)),1),(0,a.Wm)(et,{size:"sm",name:"img:tokens/USDC.png"})])])])))),128))])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(wt,{modelValue:e.addAllowance,"onUpdate:modelValue":t[18]||(t[18]=t=>e.addAllowance=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ut,null,{default:(0,a.w5)((()=>[(0,a.Wm)(pt,{class:"row items-center q-pb-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(mt,{color:"primary","text-color":"white",size:"md"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:"tokens/usdc.png"},null,8,Ze)])),_:1}),Qe,(0,a.Wm)(ft),(0,a.wy)((0,a.Wm)(Le,{icon:"close",flat:"",round:"",dense:""},null,512),[[_t]])])),_:1}),(0,a.Wm)(pt,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a._)("span",Ve,(0,l.zw)(e.$t("allowanceInfo")),1)])),_:1}),(0,a.Wm)(vt,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(Le,{class:"full-width",label:e.$t("increase"),color:"primary",onClick:t[17]||(t[17]=t=>e.approveToken())},null,8,["label"]),[[_t]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(kt,{modelValue:"usdc",points:e.memberInfo.score},null,8,["points"])])),_:1})}var $e=n(60499),Le=n(19302),Re=n(65457),je=n(28488),Oe=n(9229),Je=n(43380),Me=n(16898),Ke=n(85990),Ye=n(17779),Xe=function(e,t,n,a){function l(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{r(a.next(e))}catch(t){o(t)}}function s(e){try{r(a["throw"](e))}catch(t){o(t)}}function r(e){e.done?n(e.value):l(e.value).then(i,s)}r((a=a.apply(e,t||[])).next())}))};const et=n(89003),tt=n(53310),nt=n(94428),at=n(97921),lt=n(90278),ot=[{name:"nft",label:"itemName",field:"endBlock",align:"left",sortable:!0,headerStyle:"text-align: center;"},{name:"price",label:"price",field:"price",align:"left",sortable:!0},{name:"level",label:"level",field:"level",align:"left",sortable:!0},{name:"scale",label:"weight",field:"scale",align:"left",sortable:!0},{name:"quality",label:"quality",field:"quality",align:"left",sortable:!0}];function it(e){Ye.log("Switch network: ",(0,Ke.v)().networks[e].name,(0,Ke.v)().networks[e].id),(0,Ke.v)().initWeb3(e)}const st={title:"Crystal - Auction"},rt=(0,a.aZ)({name:"AuctionPage",components:{NftMenu:Oe.Z,CrystalGem:Je.Z,BalanceView:Me.Z},setup(){const e=(0,Le.Z)();e.dark.set(!0),(0,Re.Z)(st);const t=(0,$e.iH)(!1),n=(0,$e.iH)(0),l=(0,$e.iH)("0x7d14730913Cf4859258c285932EC31E804A7E25a"),o=(0,$e.iH)("0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"),i=(0,$e.iH)("0xf18a1FEf4823Ce5ddb20B71D82FA06470DF84B17"),s=(0,$e.iH)("0x92235Ce2CC98cb685dA8D70b2d0Aa86134440286"),r=(0,$e.iH)("0xA96E6895e61E1b19369930Fb763F379651a4D711"),c=(0,$e.iH)({bets:"0",score:"0",name:"0"}),u=(0,$e.iH)("2"),d=(0,$e.iH)(!1),m=(0,$e.iH)(0),f=(0,$e.iH)({}),p=(0,$e.iH)({}),v=(0,$e.iH)([]),w=(0,$e.iH)(1),g=(0,$e.iH)("0"),h=(0,$e.iH)([]),b=(0,$e.iH)(!1),k=(0,$e.iH)(0);let y=(0,a.Fl)((()=>1e4*Math.pow(2,w.value-1))),_=(0,a.Fl)((()=>f.value[g.value])),x=(0,a.Fl)((()=>{let e=[];for(var t in f.value)f.value.hasOwnProperty(t)&&!f.value[t].end&&f.value[t].endBlock>m.value&&e.push(f.value[t]);return e})),A=(0,a.Fl)((()=>{let e=[];for(var t in p.value)f.value.hasOwnProperty(t)&&e.unshift(f.value[t]);return e})),C=[];function W(e){let t=e,n="";return e>1e9?(t/=1e9,n="B"):e>1e6?(t/=1e6,n="M"):e>1e4&&(t/=1e3,n="K"),{short:t,unit:n}}function q(){Ye.log("listeners:",C),C&&C.length>0&&C.forEach((e=>{e&&(e.unsubscribe(),Ye.log("unsubscribe:",e))}))}function I(){return Xe(this,void 0,void 0,(function*(){const e=yield(0,Ke.v)().web3.eth.net.getId().then((e=>(Ye.log(e),e))).catch((e=>(Ye.log("checkNetwork: ",e),-1)));return e}))}function B(e){return Xe(this,void 0,void 0,(function*(){const t=(0,Ke.v)().networks[e].id,n=(0,Ke.v)().networks[e].name,a=(0,Ke.v)().networks[e].tokenName,l=(0,Ke.v)().networks[e].symbol,o=(0,Ke.v)().networks[e].rpcUrl,i=(0,Ke.v)().networks[e].explorer,s="0x"+t.toString(16);if("undefined"!==typeof window.ethereum)try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:s}]}),location.reload()}catch(r){if(Ye.log(r),4902===r.code){Ye.log("Add Chain");try{yield window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:s,chainName:n,nativeCurrency:{name:a,symbol:l,decimals:18},rpcUrls:[o],blockExplorerUrls:[i]}]}),location.reload()}catch(c){alert(c.message)}}else alert(r.message)}}))}function S(e,t=!1){return Xe(this,void 0,void 0,(function*(){g.value=e,j(e,t).then((()=>{b.value=!0,f.value[e].bids>0?z(f.value[e].price,.05):z(f.value[e].price),$(e,t)}))}))}function z(e,t=0){let n=0;t>0&&(n=e*t,n<1&&(n=1)),k.value=parseFloat((e+n).toFixed(6))}function U(){if(void 0!=g.value){let e=g.value,t=!1;if(f.value[e].bids>0?(k.value<f.value[e].price+1&&(k.value=parseFloat((f.value[e].price+1.0000001).toFixed(6)),t=!0),k.value<1.05*f.value[e].price&&(k.value=parseFloat((1.05*f.value[e].price+1e-7).toFixed(6)),t=!0)):k.value<f.value[e].price&&(k.value=parseFloat((f.value[e].price+1e-7).toFixed(6)),t=!0),t)return;let n=parseFloat(k.value.toString()).toFixed(6).replace(".","");M(e,n)}}function N(e){const t=JSON.parse(e),n=(0,Ke.v)().web3.utils.toHex(t.properties);let a=10,l=10;for(let o=2;o<14;o++){const e=parseInt(n[o],16);o<8?a+=e:o<14&&(l+=e)}return{level:t.level,color:t.color,quality:a,scale:l/100}}function D(e,t=!1){var n;if(e.removed)return;const a=(0,Ke.v)().web3Instance,l=e.returnValues,o=l.auctionId,i=l.price;if(f.value[o]){if(i){const e=a.utils.fromWei(i+"000000000000");parseFloat(e)>(null===(n=f.value[o])||void 0===n?void 0:n.price)&&(f.value[o].price=parseFloat(e),f.value[o].bidder=l.user)}t&&(f.value[o].end=!0)}else Ye.log("No AH")}function H(e,t=!1){var n;if(e.removed)return;const a=(0,Ke.v)().web3Instance,l=e.returnValues,o=l.auctionId,i=l.price;if(p.value[o]){if(i){const e=a.utils.fromWei(i+"000000000000");parseFloat(e)>(null===(n=p.value[o])||void 0===n?void 0:n.price)&&(p.value[o].price=parseFloat(e),p.value[o].bidder=l.user)}t&&(p.value[o].end=!0),j(o,!0)}else Ye.log("No AH")}function P(e,t=!1){var n,a;if(e.removed)return;const l=(0,Ke.v)().web3Instance,o=e.returnValues,i=o.auctionId,s=o.uri,r=N(s),c=l.utils.fromWei(o.startingPrice+"000000000000"),u=l.utils.fromWei(o.buyoutPrice+"000000000000");let d={owner:o.owner,bidder:"",auctionId:parseInt(i),nft:parseInt(o.nft),startingPrice:parseFloat(c),buyoutPrice:parseFloat(u),price:parseFloat(c),bids:0,startBlock:parseInt(e.blockNumber),endBlock:parseInt(e.blockNumber)+76800,end:!1,uri:s,level:r.level,color:r.color,quality:r.quality,scale:r.scale};t?p.value[i]=d:(void 0==f.value[i]||!(null===(n=f.value[i])||void 0===n?void 0:n.end)&&(null===(a=f.value[i])||void 0===a?void 0:a.price)<d.price)&&(f.value[i]=d)}function E(e,t){let n=[];e.forEach((e=>{if(!e.removed){const t=(0,Ke.v)().web3Instance,a=e.returnValues,l=a.auctionId,o=t.utils.fromWei(a.price+"000000000000");let i={txhash:e.transactionHash,bidder:a.user,nft:a.nft,auctionId:l,price:parseFloat(o)};n.unshift(i)}})),t==g.value&&(h.value=n)}function F(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=new e.eth.Contract(et,l.value);e.eth.getBlockNumber().then((function(e){return Xe(this,void 0,void 0,(function*(){m.value=e;let n=e-1e5;const a={fromBlock:n};yield t.getPastEvents("CancelAuction",a).then((function(e){e.forEach((e=>{D(e,!0)}))})).catch((e=>{Ye.error("allAuctionCancel Error:",e)}))}))}))}))}function T(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=new e.eth.Contract(et,l.value);e.eth.getBlockNumber().then((function(e){return Xe(this,void 0,void 0,(function*(){m.value=e;let n=e-1e5;const a={fromBlock:n};yield t.getPastEvents("FulfillAuction",a).then((function(e){e.forEach((e=>{D(e,!0)}))})).catch((e=>{Ye.error("allAuctionFulfill Error:",e)}))}))}))}))}function Z(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=new e.eth.Contract(et,l.value);e.eth.getBlockNumber().then((function(e){return Xe(this,void 0,void 0,(function*(){m.value=e;let n=e-1e5;const a={fromBlock:n};yield t.getPastEvents("Bid",a).then((function(e){e.forEach((e=>{D(e)}))})).catch((e=>{Ye.error("allAuctionBid Error:",e)}))}))}))}))}function Q(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=(0,Ke.v)().account;if(!e.utils.isAddress(t))return void Ye.log("Not Address:",t);const n=new e.eth.Contract(et,l.value),a={filter:{owner:t},fromBlock:29762935};yield n.getPastEvents("CancelAuction",a).then((function(e){e.forEach((e=>{H(e,!0)}))})).catch((e=>{Ye.error("userAuctionCancel Error:",e)}))}))}function V(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=(0,Ke.v)().account;if(!e.utils.isAddress(t))return void Ye.log("Not Address:",t);const n=new e.eth.Contract(et,l.value),a={filter:{owner:t},fromBlock:29762935};yield n.getPastEvents("FulfillAuction",a).then((function(e){e.forEach((e=>{H(e,!0)}))})).catch((e=>{Ye.error("userAuctionFulfill Error:",e)}))}))}function G(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=(0,Ke.v)().account;if(!e.utils.isAddress(t))return void Ye.log("Not Address:",t);const n=new e.eth.Contract(et,l.value),a={filter:{owner:t},fromBlock:29762935};yield n.getPastEvents("Bid",a).then((function(e){e.forEach((e=>{H(e)}))})).catch((e=>{Ye.error("userAuctionBid Error:",e)}))}))}function $(e,t=!1){return Xe(this,void 0,void 0,(function*(){const n=(0,Ke.v)().web3Instance,a=new n.eth.Contract(et,l.value);let o=29762935;const i={filter:{auctionId:e},fromBlock:o};yield a.getPastEvents("Bid",i).then((function(n){Ye.log("getBidById Bid events",n),E(n,e),n.forEach((e=>{D(e),t&&H(e)}))})).catch((e=>{Ye.error("getBidById Error:",e)}))}))}function L(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=new e.eth.Contract(et,l.value);e.eth.getBlockNumber().then((function(e){return Xe(this,void 0,void 0,(function*(){m.value=e;let n=e-1e5;const a={fromBlock:n};yield t.getPastEvents("CreateAuction",a).then((function(e){e.forEach((e=>{P(e)}))})).catch((e=>{Ye.error("allAuctionCreated Error:",e)}))}))}))}))}function R(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=(0,Ke.v)().account;if(!e.utils.isAddress(t))return void Ye.log("Not Address:",t);const n=new e.eth.Contract(et,l.value),a={filter:{owner:t},fromBlock:29762935};yield n.getPastEvents("CreateAuction",a).then((function(e){e.forEach((e=>{P(e,!0)}))})).catch((e=>{Ye.error("userAuctionCreated Error:",e)}))}))}function j(e,t=!1){return Xe(this,void 0,void 0,(function*(){const n=(0,Ke.v)().web3Instance,a=new n.eth.Contract(et,l.value);a.methods.auctionDetail(e).call().then((function(a){const l=e,o=a.uri,i=N(o),s=n.utils.fromWei(a.startingPrice+"000000000000"),r=n.utils.fromWei(a.buyoutPrice+"000000000000"),c=n.utils.fromWei(a.price+"000000000000");let u={owner:a.owner,bidder:a.bidder,auctionId:parseInt(e),nft:parseInt(a.nft),startingPrice:parseFloat(s),buyoutPrice:parseFloat(r),price:parseFloat(c),bids:a.bids,startBlock:parseInt(a.startBlock),endBlock:parseInt(a.endBlock),end:a.end,uri:a.uri,level:i.level,color:i.color,quality:i.quality,scale:i.scale};f.value[l]=u,t&&(p.value[l]=u);const d=(0,Ke.v)().account;d.toUpperCase()==a.owner.toUpperCase()&&(p.value[l]=u)})).catch((function(e){Ye.log("getAhById: ",e)}))}))}function O(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=new e.eth.Contract(et,l.value),n=(0,Ke.v)().account;e.utils.isAddress(n)?t.methods.userListing(n).call({from:n}).then((function(e){Ye.log("getUserListing: ",e);let t=[],n=e.list;n.forEach((e=>{t.unshift(e)})),v.value=t,Ye.log("getUserListing Space: ",e.space),w.value=parseInt(e.space)})).catch((function(e){Ye.log("getUserListing: ",e)})):Ye.log("Not Address:",n)}))}function J(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3;e.eth.getBlockNumber().then((function(e){return Xe(this,void 0,void 0,(function*(){m.value=e,Ye.log("getBlockNum:",e)}))}))}))}function M(e,t){return Xe(this,void 0,void 0,(function*(){if(!(0,Ke.v)().web3.utils.isAddress((0,Ke.v)().account))return void alert("Need Connect Wallet!");const n=(0,Ke.v)().web3,a=l.value,o=(0,Ke.v)().account;if(!n.utils.isAddress(o))return void alert("Account is not valid address!");const i=new n.eth.Contract(et,a);let s=i.methods.bidAuction(e,t),r=s.encodeABI();n.eth.estimateGas({from:o,to:a,value:0,data:r}).then((function(t){Ye.log("gasAmount: ",t),n.eth.sendTransaction({from:o,to:a,value:0,gas:parseInt((1.05*t).toString()),gasPrice:36e9,data:r}).on("transactionHash",(e=>{Ye.log("transactionHash: ",e)})).on("receipt",(t=>{t&&($(e),j(e))})).on("error",(e=>{Ye.log("tx bidAuctionTx",e)}))})).catch((function(e){Ye.log("estimateGas: ",e);let t=e.message.toString();if(t.includes("exceeds")&&t.includes("allowance"))d.value=!0;else{let e=t.substring(t.indexOf("{"),t.lastIndexOf("}")+1);if(e){let t=JSON.parse(e);alert(t.message)}else alert(t)}}))}))}function K(e){return Xe(this,void 0,void 0,(function*(){if(!(0,Ke.v)().web3.utils.isAddress((0,Ke.v)().account))return void alert("Need Connect Wallet!");const t=(0,Ke.v)().web3,n=l.value,a=(0,Ke.v)().account;if(!t.utils.isAddress(a))return void alert("Account is not valid address!");const o=new t.eth.Contract(et,n);let i=o.methods.cancelAuction(e),s=i.encodeABI();t.eth.estimateGas({from:a,to:n,value:0,data:s}).then((function(l){Ye.log("gasAmount: ",l),t.eth.sendTransaction({from:a,to:n,value:0,gas:parseInt((1.05*l).toString()),gasPrice:36e9,data:s}).on("transactionHash",(e=>{Ye.log("transactionHash: ",e)})).on("receipt",(t=>{t&&(O(),$(e,!0),j(e,!0))})).on("error",(e=>{Ye.log("tx cancelAuctionTx",e)}))})).catch((function(e){Ye.log("estimateGas: ",e);let t=e.message.toString();if(t.includes("exceeds")&&t.includes("allowance"))d.value=!0;else{let e=t.substring(t.indexOf("{"),t.lastIndexOf("}")+1);if(e){let t=JSON.parse(e);alert(t.message)}else alert(t)}}))}))}function Y(e){return Xe(this,void 0,void 0,(function*(){if(!(0,Ke.v)().web3.utils.isAddress((0,Ke.v)().account))return void alert("Need Connect Wallet!");const t=(0,Ke.v)().web3,n=l.value,a=(0,Ke.v)().account;if(!t.utils.isAddress(a))return void alert("Account is not valid address!");const o=new t.eth.Contract(et,n);let i=o.methods.fulfillAuction(e),s=i.encodeABI();t.eth.estimateGas({from:a,to:n,value:0,data:s}).then((function(l){Ye.log("gasAmount: ",l),t.eth.sendTransaction({from:a,to:n,value:0,gas:parseInt((1.05*l).toString()),gasPrice:36e9,data:s}).on("transactionHash",(e=>{Ye.log("transactionHash: ",e)})).on("receipt",(t=>{t&&(O(),$(e,!0),j(e,!0))})).on("error",(e=>{Ye.log("tx fulfillAuctionTx",e)}))})).catch((function(e){Ye.log("estimateGas: ",e);let t=e.message.toString();if(t.includes("exceeds")&&t.includes("allowance"))d.value=!0;else{let e=t.substring(t.indexOf("{"),t.lastIndexOf("}")+1);if(e){let t=JSON.parse(e);alert(t.message)}else alert(t)}}))}))}function X(){return Xe(this,void 0,void 0,(function*(){const e=o.value;Ye.log("approveToken");const t=(0,Ke.v)().web3,n="0xffffffffffffffffffffffffffffff",a=new t.eth.Contract(tt,e);let i=a.methods.approve(l.value,n),s=i.encodeABI();t.eth.estimateGas({from:(0,Ke.v)().account,to:e,value:0,data:s}).then((function(n){Ye.log("gasAmount: ",n),t.eth.sendTransaction({from:(0,Ke.v)().account,to:e,value:0,gas:parseInt((1.05*n).toString()),gasPrice:36e9,data:s}).on("transactionHash",(e=>{Ye.log("transactionHash: ",e)})).on("receipt",(e=>{Ye.log("receipt: ",e)})).on("error",(e=>{Ye.log("tx increaseAllowance ",e)}))})).catch((function(e){alert(e)}))}))}function ee(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3Instance,t=i.value,n=(0,Ke.v)().accountAddr;if(e.utils.isAddress(n)){const a=new e.eth.Contract(nt,t);a.methods.userDetail(n).call().then((function(e){Ye.log("getMemberInfo: ",e);const t={bets:e.bets,score:e.score,name:e.name};c.value=t})).catch((function(e){Ye.log("getMemberInfo: ",e)}))}}))}function te(e){return Xe(this,void 0,void 0,(function*(){Ye.log("Referral ID:",e);const a=(0,Ke.v)().web3,l=(0,Ke.v)().account;if(!a.utils.isAddress(l))return void alert("Need Connect Wallet!");const o=n.value,i=yield I();if(i!=(0,Ke.v)().networks[o].id)return Ye.log(i,"!=",(0,Ke.v)().networks[o].id),void(t.value=!0);const s=r.value,c=new a.eth.Contract(lt,s);let u=c.methods.register(a.utils.toHex(e)),d=u.encodeABI();a.eth.estimateGas({from:l,to:s,value:0,data:d}).then((function(e){Ye.log("gasAmount: ",e),a.eth.sendTransaction({from:l,to:s,value:0,gas:parseInt((1.05*e).toString()),gasPrice:36e9,data:d}).on("transactionHash",(e=>{Ye.log("transactionHash: ",e)})).on("receipt",(e=>{Ye.log("receipt: ",e),ee(),O()})).on("error",(e=>{Ye.log("tx registerTx",e)}))})).catch((function(e){Ye.log("estimateGas: ",e);let t=e.message.toString(),n=t.split(".")[1],a=JSON.parse(n);alert(a.message)}))}))}function ne(){return Xe(this,void 0,void 0,(function*(){const e=(0,Ke.v)().web3,a=(0,Ke.v)().account;if(!e.utils.isAddress(a))return void alert("Need Connect Wallet!");const l=n.value,o=yield I();if(o!=(0,Ke.v)().networks[l].id)return Ye.log(o,"!=",(0,Ke.v)().networks[l].id),void(t.value=!0);const i=s.value,r=new e.eth.Contract(at,i);let c=r.methods.upgrade(),u=c.encodeABI();e.eth.estimateGas({from:a,to:i,value:0,data:u}).then((function(t){Ye.log("gasAmount: ",t),e.eth.sendTransaction({from:a,to:i,value:0,gas:parseInt((1.05*t).toString()),gasPrice:36e9,data:u}).on("transactionHash",(e=>{Ye.log("transactionHash: ",e)})).on("receipt",(e=>{Ye.log("receipt: ",e),O()})).on("error",(e=>{Ye.log("tx registerTx",e)}))})).catch((function(e){Ye.log("estimateGas: ",e);let t=e.message.toString(),n=t.split(".")[1],a=JSON.parse(n);alert(a.message)}))}))}function ae(){let e=parseInt(u.value).toString();u.value=e,Ye.log("registerClick:",e),te(e)}function le(){Ye.log("upgradeClick"),ne()}return{currentBlock:m,memberInfo:c,addAllowance:d,gemColumns:ot,tab:(0,$e.iH)("browse"),browseTab:(0,$e.iH)("browseGems"),allAuctions:f,userAuctions:p,userListing:v,userListSpace:w,upgradeFee:y,currentAuction:_,allAH:x,userAH:A,bidGem:g,bidGemBids:h,bidGemDetail:b,bidGemPrice:k,netIndex:n,ahContract:l,switchNet:t,registerClick:ae,upgradeClick:le,getBlockNum:J,bidAuctionTx:M,cancelAuctionTx:K,fulfillAuctionTx:Y,approveToken:X,bidSubmit:U,shortNumStr:W,removeListeners:q,getBidById:$,getUserListing:O,allAuctionCancel:F,allAuctionFulfill:T,allAuctionBid:Z,userAuctionCancel:Q,userAuctionFulfill:V,userAuctionBid:G,allAuctionCreated:L,userAuctionCreated:R,getAhById:j,checkNetwork:I,switchNetwork:B,bidClicked:S,setBid:z,shortAddress:je.sC,copyAddress:je.c4,linkAddress:je.ol,getRarity(e){let t="Common",n="C";switch(e){case 4:case 5:case 6:case 7:n="UC";break;case 8:case 9:n="R";break;case 10:n="RR";break;case 11:n="RRR";break;case 12:n="SR";break;case 13:n="HR";break;case 14:n="UR";break;case 15:n="SSR";break;default:break}switch(e){case 4:case 5:case 6:case 7:t="Uncommon";break;case 8:case 9:case 10:case 11:t="Rare";break;case 12:case 13:case 14:case 15:t="Epic";break;default:break}return{rarity:t,short:n}},initGame(){return Xe(this,void 0,void 0,(function*(){let e=new URLSearchParams(window.location.search),a=e.get("ref");a&&"NaN"!=a&&(localStorage.refCode=a),localStorage.refCode&&(u.value=localStorage.refCode),Ye.log(a||"No Ref");let l=e.get("id");Ye.log(l||"No shareId"),g.value=l||"0","0"!=g.value&&S(g.value);const o=n.value;it(o);const i=yield I();if(i!=(0,Ke.v)().networks[o].id)return Ye.log(i,"!=",(0,Ke.v)().networks[o].id),void(t.value=!0);O(),L().then((()=>{Z(),T(),F()})),R().then((()=>{G(),V(),Q()})),ee()}))},initData(){localStorage.getItem("allAuctions")&&Object.assign(f.value,JSON.parse(localStorage.getItem("allAuctions")||"")),localStorage.getItem("memberInfo")&&Object.assign(c.value,JSON.parse(localStorage.getItem("memberInfo")||""))},storeData(){localStorage.setItem("allAuctions",JSON.stringify(f.value))},reloadData(){f.value={},p.value={},localStorage.setItem("allAuctions",JSON.stringify(f.value)),O(),L().then((()=>{Z(),T()})),R().then((()=>{G(),V()}))}}},beforeMount(){this.initData(),this.initGame(),this.getBlockNum()},beforeUnmount(){this.removeListeners(),this.storeData()}});var ct=n(11639),ut=n(69885),dt=n(68879),mt=n(44458),ft=n(47817),pt=n(57661),vt=n(50926),wt=n(89800),gt=n(84106),ht=n(8858),bt=n(31233),kt=n(21682),yt=n(67220),_t=n(22857),xt=n(52765),At=n(47128),Ct=n(46858),Wt=n(490),qt=n(76749),It=n(13246),Bt=n(33115),St=n(32074),zt=n(63190),Ut=n(61357),Nt=n(90136),Dt=n(11821),Ht=n(57691),Pt=n(66611),Et=n(66663),Ft=n(62146),Tt=n(69984),Zt=n.n(Tt);const Qt=(0,ct.Z)(rt,[["render",Ge],["__scopeId","data-v-30ef60e0"]]),Vt=Qt;Zt()(rt,"components",{QPage:ut.Z,QBtn:dt.Z,QCard:mt.Z,QTabs:ft.Z,QTab:pt.Z,QSeparator:vt.Z,QTabPanels:wt.Z,QTabPanel:gt.Z,QTable:ht.Z,QTr:bt.Z,QTh:kt.Z,QTd:yt.Z,QIcon:_t.Z,QPopupProxy:xt.Z,QBanner:At.Z,QTooltip:Ct.Z,QItem:Wt.Z,QItemSection:qt.Z,QList:It.Z,QItemLabel:Bt.Z,QDialog:St.Z,QCardSection:zt.Z,QAvatar:Ut.Z,QSpace:Nt.Z,QCardActions:Dt.Z,QChip:Ht.Z,QInput:Pt.Z,QScrollArea:Et.Z}),Zt()(rt,"directives",{ClosePopup:Ft.Z})}}]);